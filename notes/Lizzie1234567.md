---
timezone: UTC+8
---

# Lizzie 

**GitHub ID:** Lizzie1234567

**Telegram:** 

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->
# 以太坊技术升级与 DeFi 协议核心解析（精简版）

## 二、以太坊技术升级路径

### 2.1 The Merge：从高能耗到环保的转变

2022 年 9 月 15 日，以太坊完成 The Merge 升级，从工作量证明（PoW）彻底转向权益证明（PoS）机制，类似从烧煤蒸汽机升级到电动汽车：

-   **升级两步走**：2020 年 12 月先启用心标链（PoS），2022 年 9 月主网与信标链合并
    

-   **PoS 核心优势**：能耗降低 99.95%、攻击成本极高（需控制 67% 质押 ETH）、区块确认更快
    

-   **验证者规则**：质押 32 ETH 即可参与，随机提议 / 验证区块，赚 ETH 奖励 + 交易费，作恶会被销毁质押金（Slashing）
    

### 2.2 EIP-1559：让交易费用更可预测

取代传统拍卖机制，让 Gas 费像天气预报一样可控：

-   **双重费用结构**：
    

-   基础费用（Base Fee）：算法自动计算，随拥堵调整（涨跌不超 12.5%），直接销毁（助力 ETH 通缩）
    

-   优先费用（Tip）：给验证者的小费，加速交易处理
    

-   **核心创新**：基础费用销毁，消除矿工操纵费用的动机
    

### 2.3 EIP-4844（Cancun 升级）：Layer 2 的 “省钱神器”

2024 年 3 月激活，专为 Layer 2 降本设计：

-   **解决痛点**：之前 Layer 2 需将交易数据永久存主网（calldata），成本高昂
    

-   **解决方案**：引入 Blob-Carrying Transactions，数据仅存 18 天（4096 个 epoch）后自动删除，仅留验证哈希
    

-   **实际效果**：L2 交易费降 70%-90%，主流 L2 费用低至几美分
    

### 2.4 Proto-Danksharding 和 Danksharding：分片技术的演进

-   **Proto-Danksharding（EIP-4844）**：Danksharding 的过渡版，名字来自两位研究者（protolambda+Dan Kradfeist），核心是 “数据分片”（而非拆分区块链）
    

-   **Danksharding 未来愿景**：Blob 数量从 1 个扩到 64 个，支持数百个 Rollup，TPS 超 10 万，L2 成本再降 90%+
    

-   **时间表**：Proto 已完成（2024.3），全面分片预计 2025-2026 年
    

### 2.5 Layer 2 技术概览

以太坊主网（L1）每秒仅处理 15 笔交易，Layer 2 像 “快捷通道”，链下批量处理 + 主网存证：

-   **核心类型**：
    

1.  Rollup（卷叠）：数百笔交易打包成 1 笔 L1 交易，分两种：
    

-   乐观卷叠（Optimism/Arbitrum）：默认交易合法，争议时再验证
    

-   ZK 卷叠（zkSync/Polygon zkEVM）：用零知识证明验证，无延迟
    

2.  侧链（Polygon PoS/Gnosis Chain）：独立区块链，通过桥接连主网，不依赖主网安全
    

### 2.6 ZK-Rollup 技术详解

工作原理类似 “老师批作业”：不逐题查，只看 “全对证明”：

-   **核心逻辑**：链下批量处理交易→生成 “正确性证明”→主网仅验证证明
    

-   **关键特点**：
    

-   即时到账：L2 转 L1 无延迟
    

-   数据压缩：用索引代替地址，省存储空间
    

-   安全继承：完全依赖以太坊主网安全性
    

## 三、DeFi 协议深度解析

### 3.1 Aave V3：创新的去中心化借贷协议

无中介的 “自动银行”，所有规则由智能合约执行：

-   **三大角色**：
    

-   出借人（Lenders）：存资产到共享池，赚浮动利息
    

-   借款人（Borrowers）：锁抵押品借钱，无需卖资产（必须超额抵押）
    

-   清算人（Liquidators）：借款人违约时 “接盘” 抵押品，赚奖励
    

-   **核心风控**：
    

-   健康因子：(抵押品价值 × 抵押率)/ 借款金额，低于阈值会被清算
    

-   清算阈值：每种资产预设（如 ETH 80%），决定最大借款额度
    

-   **创新功能**：
    

-   E-mode（高效模式）：关联资产（USDC/DAI、ETH/stETH）可 97% 抵押借款
    

-   预言机三重保护：Chainlink + 内部备用 + 简单算价，异常时冻结交易
    

-   **核心合约模块**：借贷操作、闪电贷、E-mode、利率模型
    

### 3.2 Compound：经典的算法利率模型

靠算法自动调利率的借贷协议：

-   **利率模型（Jump Rate Model）**：
    

-   核心参数：基础利率（最低利率）、乘数（利率增长速度）、跳跃乘数（高利用率时加速）、拐点（通常 80%，触发跳跃乘数）
    

-   计算依据：池内现金量、未还借款、储备金比例
    

-   **核心合约**：
    

-   CTokenInterfaces：定义存款凭证（cToken）规则
    

-   CErc20：兼容 ERC20 的 cToken 合约
    

-   InterestRateModel：利率计算接口
    

-   **与 Aave 的区别**：利率模型更复杂、清算折扣固定、支持资产更少
    

### 3.3 Uniswap：革命性的自动做市商

无订单簿的 “24 小时自动售货机”：

-   **核心原理（AMM）**：
    

-   流动性池：合约存两种代币（如 ETH/USDC）
    

-   恒定乘积公式（x×y=k）：代币比例决定价格，交易后 k 不变
    

-   **V3 核心创新**：
    

-   集中流动性：LP 可指定价格区间提供流动性（资金效率更高）
    

-   多费率：0.01%（稳定币）、0.05%（低波动）、0.3%（高波动）
    

-   NFT 头寸：每个 LP 份额是 NFT，可单独交易
    

-   **交易流程（USDC 换 ETH）**：
    

用户转 USDC→合约按 x×y=k 算 ETH 数量→转 ETH 给用户→更新池内代币比例

-   **LP 机制**：存等量价值的两种代币→得 LP Token（收益凭证）→赚交易费，但要承担 “无常损失”（价格波动导致的价值缩水）
    

### 3.4 ERC-4626：收益聚合器的标准接口

给 “存钱罐” 统一 “投币口”，让不同收益产品互操作：

-   **解决痛点**：之前收益产品接口不统一，集成麻烦、易出错
    

-   **核心接口**：
    

-   基础信息：asset ()（底层资产）、name ()/symbol ()（名称 / 符号）
    

-   资产换算：convertToShares（资产转份额）、convertToAssets（份额转资产）
    

-   操作方法：deposit（存资产得份额）、withdraw（提资产兑份额）
    

-   **Aave 的实现（Aave Earn Vaults）**：
    

-   架构：ERC-4626 接口层→收益策略层（投 Aave V3）→费用管理层
    

-   流程：用户存资产→Vault 铸份额→转资产到 Aave→赚 aToken 利息→份额价值随利息增长
    

-   优势：操作简化、Gas 费更低、可与其他 DeFi 协议无缝集成
    

## 四、类比总结

### 4.1 以太坊就像一个全球共享的神奇账本

-   所有人都有账本副本，没人能偷偷改
    

-   写在上面的规则会自动执行（比如 “每月给孙女转 500 块”）
    

-   不只是记钱，还能记各种复杂约定
    

### 4.2 Layer 2 就像在主账本上贴便利贴

-   主账本（以太坊）每页只能写 15 行，不够用
    

-   先把交易写在便利贴（Layer 2）上，再在主账本记 “便利贴是真的”
    

-   乐观卷叠：默认便利贴没写错，有人质疑再核对
    

-   ZK 卷叠：便利贴自带 “保真印章”，不用核对
    

### 4.3 DeFi 借贷就像社区互助银行

-   存钱进去：像把钱放社区公共罐子里，别人借了要给你利息
    

-   借钱出来：要把自家值钱的东西（抵押品）放罐子里，借的钱不能超过东西价值
    

-   没人管账：所有规矩都写在 “魔法纸条” 上（智能合约），自动执行
    

-   有人赖账：其他人可以把他的抵押品拿走，还能多拿点奖励
    

### 4.4 去中心化交易所就像自动售货机

-   售货机里有两种零食（比如糖果和饼干）
    

-   你放进去 5 颗糖果，机器自动给你对应数量的饼干（比例定价格）
    

-   谁都能往机器里补零食（提供流动性），卖出去的零食能分利润
    

-   补的人要注意：如果一种零食涨价太多，可能亏了（无常损失）
    

### 4.5 ERC-4626 就像标准化的存钱罐接口

-   以前的存钱罐：有的要投硬币，有的要放纸币，接口不一样
    

-   现在的存钱罐：所有投币口都一样，一张纸币能放进所有罐子
    

-   存钱、取钱、看余额都一样方便，Aave 的 “赚钱罐” 就是按这个标准做的
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->

# Web3与Rust智能合约：技术基础与商业化盈利指南

## 一、Web3基础快速入门

### 1.1 区块链核心定义与核心特性

-   **定义**：去中心化的分布式账本技术，通过时间顺序相连的「区块」记录交易数据，每个区块包含交易信息与前一区块哈希指针，形成不可篡改的链式结构。
    
-   **核心特性**：
    
    -   不可篡改：区块哈希串联形成校验链，修改单区块需重构后续所有区块，成本极高；
        
    -   公开透明+匿名：交易数据全网可见，但通过随机钱包地址标识，无实名关联（除非主动泄露地址）；
        
    -   分布式共识：无需中心机构，节点共同验证交易合法性；
        
    -   可追溯：所有交易按时间戳串联，全程可查。
        

### 1.2 核心数据结构

-   **哈希指针（Hash Pointer）**：兼具定位区块与验证数据完整性的功能，区块链本质是「用哈希指针串联的链表」，记住最终区块哈希即可确保全链数据未被篡改。
    
-   **默克尔树（Merkle Tree）**：区块交易的高效验证结构，底层为交易数据块，上层为哈希指针，通过根哈希（Merkle Root）快速验证交易是否存在（成员证明）或不存在（非成员证明），支持轻节点高效同步。
    

### 1.3 去中心化核心原理

-   **网络架构**：全球分布式节点存储完整账本，无单一控制方，节点通过「挖矿」维护网络运行；
    
-   **激励机制**：矿工通过验证交易、打包区块获得代币奖励（如比特币）和交易手续费（Gas Fee）；
    
-   **安全保障**：51%攻击门槛（需控制超半数节点算力才能篡改数据），分布式存储避免单点故障。
    

### 1.4 账户体系与交易机制

-   **账户类型**：
    
    -   比特币：UTXO模型（未花费交易输出），无传统账户余额，通过交易输入输出追溯资产归属；
        
    -   以太坊：基于账户模型，分外部账户（用户控制，有私钥）和智能合约账户（代码控制，含余额、代码、存储）。
        
-   **交易流程**：用户发起交易→全网广播→节点验证（签名、余额合法性）→打包成块→链接上链→奖励发放。
    
-   **安全机制**：私钥签名验证身份，非对称加密保障交易安全，交易一旦上链无法撤销。
    

### 1.5 共识机制核心类型

-   **工作量证明（PoW）**：比特币采用，矿工通过算力求解哈希谜题（找到满足目标值的Nonce）争夺记账权，出块时间约10分钟，安全性高但能耗大；
    
-   **权益证明（PoS）**：以太坊升级后采用，按代币持有量分配记账权，无需挖矿，能耗低，通过质押代币保障节点诚实；
    
-   **GHOST协议**：以太坊优化分叉问题的机制，将7代内的分叉区块（叔父块）纳入奖励，减少算力浪费。
    

### 1.6 区块链分类与应用场景

| 类型 | 节点准入 | 数据可见性 | 核心场景 |
| --- | --- | --- | --- |
| 公链 | 自由加入 | 全网公开 | 加密货币、DeFi、NFT |
| 联盟链 | 联盟成员邀请 | 仅联盟内可见 | 供应链金融、跨境支付 |
| 私链 | 严格审批 | 内部成员可见 | 企业审计、内部数据管理 |

### 1.7 Web3与Web2、Web3.0核心差异

| 维度 | Web2（传统互联网） | Web3.0（语义网） | Web3（去中心化互联网） |
| --- | --- | --- | --- |
| 控制权 | 平台垄断（如腾讯、阿里） | 部分开放（标准化数据） | 用户自治（区块链存储） |
| 数据归属 | 平台所有 | 混合存储 | 用户所有（私钥掌控） |
| 核心技术 | JavaScript、中心服务器 | RDF/OWL、知识图谱 | 智能合约、区块链、IPFS |
| 商业模式 | 广告驱动、佣金抽成 | 数据服务 | 代币激励、协议手续费 |
| 典型应用 | 微信、抖音 | 语义搜索、知识图谱应用 | Uniswap、MetaMask、NFT平台 |

### 1.8 关键概念澄清

-   软分叉vs硬分叉：软分叉（兼容旧节点，如区块大小缩小），硬分叉（不兼容旧节点，如区块大小扩大，可能导致链分裂）；
    
-   智能合约：运行在区块链上的代码，满足条件自动执行（如拍卖、转账），核心特性是原子性（执行失败则回滚）；
    
-   挖矿难度调整：比特币每2016个区块（约2周）调整一次，通过目标值（Target）动态平衡出块时间，避免出块过快或过慢。
    

## 二、Rust合约：用途与盈利场景

### 2.1 Rust在区块链开发中的技术优势

-   **内存安全**：所有权机制和借用规则杜绝空指针、数据竞争，编译时检测漏洞，适合资金密集型的智能合约场景；
    
-   **高性能**：零成本抽象，执行效率接近C/C++，支持并行处理，适配高吞吐量公链（如Solana）；
    
-   **跨链兼容**：可编译为WebAssembly（WASM），支持多链部署（Solana、Polkadot、Near等）；
    
-   **安全特性**：严格的类型检查和编译时验证，减少智能合约常见漏洞（如重入攻击、溢出漏洞）。
    

### 2.2 核心生态应用场景

（1）Solana生态

-   智能合约（Programs）默认使用Rust编写，依赖Solana官方Rust SDK，通过Anchor框架简化开发；
    
-   适配Sealevel并行执行引擎，Rust的内存安全特性保障多合约并行执行无数据竞争，TPS达6.5万笔/秒；
    
-   典型应用：DeFi协议（如Raydium）、NFT市场（如Magic Eden），均基于Rust合约实现高性能交易。
    

（2）Polkadot生态

-   核心框架Substrate用Rust开发，支持自定义平行链（Parachain），通过ink!框架编写WASM智能合约；
    
-   跨链互操作性：Rust合约可通过Polkadot桥接不同链，实现资产与数据跨链流通；
    
-   优势：模块化设计，开发者可复用Rust编写的Pallet（运行时模块），快速搭建区块链。
    

（3）其他生态

-   Near Protocol：智能合约支持Rust编译为WASM，低Gas费且执行高效；
    
-   Avalanche：提供Rust SDK（avalanche-rs），支持开发子网和虚拟机；
    
-   跨链协议：基于Rust构建的CrossFusion协议，实现资产跨链确认时延≤3秒。
    

### 2.3 商业化盈利核心场景

（1）协议收入

-   交易手续费：开发DEX（如Solana上的Orca）、借贷协议，收取0.1%-0.3%交易手续费；
    
-   存储租金：为链上数据存储（如NFT元数据）收取租金，Solana生态中存储费用与数据大小挂钩；
    
-   优先交易费：为高频交易者提供快速打包服务，抽取额外手续费分成。
    

（2）Gas优化套利

-   合约优化服务：Rust合约比Solidity Gas成本低40%-80%，为DeFi项目优化合约，按节省的Gas比例收费；
    
-   套利工具开发：如Rusty-Sando机器人，通过Rust的高效执行特性，实现Uniswap V2/V3池三明治攻击，捕获MEV；
    
-   技术：采用JUMPDEST函数签名、并发EVM模拟，降低套利成本，提升成功率。
    

（3）MEV捕获

-   机器人开发：基于Rust编写高性能MEV机器人，监测链上套利机会（如价格差、清算），快速执行交易；
    
-   验证者服务：运营Rust开发的验证节点，收取MEV分成（如Solana的Jito生态）；
    
-   数据服务：为MEV搜索者提供实时链上数据推送，按订阅收费。
    

（4）复杂DeFi产品落地

-   衍生品协议：开发永续合约、合成资产（如AstherusEx），通过Rust实现复杂定价模型与风险控制；
    
-   跨链金融工具：构建跨链借贷、流动性聚合协议，收取跨链手续费与利差；
    
-   优势：Rust的类型安全特性避免金融逻辑漏洞，适合处理高杠杆、复杂计算场景。
    

（5）技术服务与就业

-   合约开发与审计：为项目方提供Rust智能合约开发、安全审计，单次服务费用10万-50万元；
    
-   定制化解决方案：为传统企业开发联盟链（如供应链溯源），收取项目开发费；
    
-   薪资优势：Rust区块链开发者平均年薪113万人民币，Solana生态资深工程师年薪超100万，比以太坊开发者高20%-30%。
    

（6）代币激励与增值

-   发行项目代币：开发Rust合约驱动的DeFi项目，通过流动性挖矿分发代币，后期代币增值获利；
    
-   质押收益：运行Rust编写的验证节点，质押代币获得年化5%-15%质押奖励；
    
-   LST（流动性质押代币）：发行质押衍生品，赚取质押奖励与交易利差。
    

### 2.4 风险与优化建议

-   技术风险：Rust学习曲线陡峭，需注重合约测试（如使用Anchor的测试框架），避免逻辑漏洞；
    
-   合规风险：匿名性可能涉及洗钱，需配合监管实现链上合规追踪；
    
-   市场策略：聚焦高吞吐量公链（Solana、Polkadot），深耕垂直场景（如高频交易、跨链DeFi），突出Rust性能优势。
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
