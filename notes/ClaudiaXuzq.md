---
timezone: UTC+8
---

# ClaudiaXu

**GitHub ID:** ClaudiaXuzq

**Telegram:** 

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-26
<!-- DAILY_CHECKIN_2026-01-26_START -->
# Web3 去中心化应用（DApp）全栈工作坊深度解析

-   **Author:** ETHPanda
    
-   **URL:** 视频链接未在源文本中提供
    

\--------------------------------------------------------------------------------

## 概览

本课程报告深度复盘了一场关于 Web3 DApp 开发的线上工作坊（Workshop）。其核心主题围绕着从 Web2 到 Web3 的范式迁移、现代 DApp 全栈开发的混合框架（Hybrid Stack）实践，以及对顶级 DeFi 协议 Aave 架构演进的深入剖析。课程旨在解决初学者和实习生在进入 Web3 开发领域时面临的关键问题：如何理解 Web3 的核心价值主张（所有权），掌握当前行业标准的开发工具链（Foundry 与 Hardhat 结合），并学习复杂系统中（如 Aave V4）的架构设计哲学与安全实践。报告给出的核心观点是，Web3 的革命本质在于“所有权”（Ownership），开发者应采用“洋长避短”的策略整合工具链以提升代码质量与开发效率，并通过学习 Aave 等成熟协议的演进，理解如何构建可扩展、安全且高效的去中心化金融系统。

\--------------------------------------------------------------------------------

## 主题内容深度解析

### Section 1：从 Web2 到 Web3 的范式革命：所有权的核心（起始时间戳未提供）

本节内容旨在建立对 Web3 核心价值的根本理解，其关键在于剖析 Web2 与 Web3 在资产所有权上的本质区别。讲师通过一个生动的例子开启讨论：假设你在《英雄联盟》这款游戏中拥有一个珍贵的皮肤，如果某天游戏开发商腾讯倒闭了，你的皮肤还会存在吗？答案显然是否定的。

这引出了 Web2 模式的核心问题：

-   **数据与资产的归属**：在 Web2 的世界里，用户看似“拥有”的数字资产（如游戏皮肤、社交媒体账号、发布的视频和粉丝），本质上只是中心化服务器数据库中的一行代码。所有的数据都储存在公司的服务器里，用户仅仅拥有使用权，而非真正的所有权。
    
-   **平台依赖性**：用户的资产完全依赖于平台的存续和规则。如果平台倒闭、封禁账号，用户的所有数字积累将瞬间化为乌有。例如，抖音封禁了你的账号，你创作的视频和积累的粉丝将一同消失。
    

与此相对，Web3 提出了一场以“所有权”（Ownership）为核心的革命。这场革命将用户从一个“租客”（Tenant）转变为一个真正的“房东”（Landlord）。

为了阐释这一转变是如何实现的，讲师引入了两个关键比喻：

1.  **小卖部 vs. 自动贩卖机**：
    
    -   传统的 App 就像一个小卖部，用户购买商品需要看老板的脸色。老板今天不高兴，可以随时关门跑路，用户便无法获得服务。这象征着 Web2 服务的中心化与不可靠性。
        
    -   DApp 则像广场上的自动贩卖机。它没有老板，是去中心化的。任何人只要投入硬币（支付 Gas 费），它就会自动吐出可乐（执行相应的智能合约操作）。没有人能拔掉它的电源，因为它运行在不可篡改的区块链上。这体现了“代码即法律”（Code is Law）的原则，信任从对人的依赖转移到了对机器（代码）的依赖。
        
2.  **一站一号 vs. 万能钥匙**：
    
    -   Web2 的身份验证模式是“一站一号”，用户需要在不同的平台注册不同的账号，记忆上百个密码。
        
    -   Web3 则采用“一把万能钥匙”的模式，这把钥匙就是用户的加密钱包（Wallet）。通过连接钱包，用户即可登录任何支持的 DApp。当用户断开钱包连接时，可以带走自己的所有数据和资产。讲师以去中心化写作平台 Paragraph (前 Mirror) 为例，即使平台倒闭，用户发布的文章因为存储在区块链上，依然永存且不可篡改。
        

通过这些对比，本节清晰地构建了 Web3 的核心价值论述：它通过技术手段将数字资产的真正所有权归还给用户，摆脱了对中心化平台的依赖，建立了一个基于代码和数学的去信任（Trustless）环境。

### Section 2：DApp 的技术解构：“三驾马车”（起始时间戳未提供）

在建立了 Web3 的核心理念后，本节从技术层面解构了一个 DApp 得以运行的基础设施，讲师将其比喻为“三驾马车”，这三者缺一不可，共同支撑起去中心化应用的运转。

1.  **智能合约（Smart Contract）：铁面无私的裁判**
    
    -   **角色与功能**：智能合约是 DApp 的核心，扮演着“裁判”的角色，负责执行所有的业务逻辑。它的特点是“铁面无私”，一旦部署到区块链上，其代码逻辑便不可更改，并将按照预设的规则自动执行。
        
    -   **不可撤销性（Irrevocability）**：为了强调其死板和确定性，讲师举了一个例子：如果你部署一个合约，代码规定“如果明天下雨，就转 100 块钱给 Nana”。一旦部署完成，即使你第二天后悔了，只要天气预报的结果触发了“下雨”这个条件（`rain === true`），这 100 块钱就会被自动划走，任何人都无法阻止。这种机制消除了交易中的“赖账”可能性，实现了去信任。在 Web2 中，交易可能需要一个可信的中间人来保管资金；而在 Web3，代码本身就是那个中间人。
        
    -   **透明性（Transparency）**：与传统金融系统不同，区块链上的所有操作都是公开透明的。在银行里，你无法查询到行长的账户余额。但在区块链上，你可以通过区块浏览器查询到任何一笔交易，甚至可以查到以太坊创始人 Vitalik Buterin 昨天购买了什么 NFT。
        
2.  **区块链（Blockchain）：不可篡改的账本**
    
    -   **角色与功能**：区块链是 DApp 的底层基础，它是一个分布式的、不可篡改的公共账本。它的核心任务是记录“谁拥有什么”（Who owns what）。
        
    -   **数据永存**：所有经过验证的交易和状态变更都会被记录在区块中，并链式地连接起来，形成一个无法被轻易篡改的数据历史。这为智能合约提供的资产所有权提供了坚实的技术保障。
        
3.  **代币（Token）：驱动世界的燃料**
    
    -   **角色与功能**：代币是整个去中心化经济系统的“燃料”（Fuel）。没有它，整个机器就无法运转起来。代币在生态系统中有多种作用：
        
        -   **Gas Fee（门票）**：用户与智能合约交互（例如执行一笔交易）时，需要支付 Gas 费。这笔费用是给矿工或验证者的酬劳，用于补偿他们为维护网络安全和处理交易所付出的计算资源。Gas 费机制同时也能防止恶意用户通过发送大量垃圾交易来攻击或拥堵网络。
            
        -   **治理权（Governance）**：持有项目的治理代币（Governance Token）不仅仅是为了投机或“炒币”。更重要的是，代币持有者可以参与项目的社区治理，通过投票来共同决定项目的未来发展方向、参数修改等重要事宜。这使得项目的利益相关者能够共同管理和塑造生态。
            

这“三驾马车”共同构成了一个完整的去中心化应用体系：区块链提供了不可篡改的底层状态记录，智能合约定义了业务逻辑和规则，而代币则提供了经济激励和治理机制，确保整个系统能够持续、安全地运行。

### Section 3：Web3 的“黑暗森林法则”与挑战（起始时间戳未提供）

在介绍了 Web3 的美好愿景和技术构成之后，讲师话锋一转，开始泼冷水，强调了当前 Web3 世界面临的严峻挑战和风险，并将其比作一个“黑暗森林”。这部分内容旨在提醒开发者和用户，Web3 仍然处于早期蛮荒时代，安全意识必须放在首位。

当前 DApp 和整个生态系统存在以下几个主要问题：

-   **高昂的成本（Expensive）**：在网络拥堵时，尤其是在以太坊主网上，一笔简单的转账交易手续费（Gas Fee）可能会高达几十美金，这对于普通用户和小额交易来说是难以承受的。
    
-   **操作的不可逆性（Irreversible）**：区块链的特性决定了所有操作一旦确认便无法撤销。如果你不慎将资产转入了错误的地址，或者丢失了私钥，那么这些资产将永久丢失。这里没有“找回密码”的功能，也没有客服会来帮助你。用户必须对自己资产的安全负全部责任。
    
-   **普遍存在的安全风险（Security Risks）**：Web3 世界充满了各种安全威胁，包括但不限于：
    
    -   **黑客攻击**：智能合约的代码漏洞可能被黑客利用，导致资金被盗。
        
    -   **代码 Bug**：即使不是恶意攻击，代码中未被发现的 Bug 也可能导致协议功能异常或资产损失。
        
    -   **私钥管理不当**：用户自身的安全疏忽，如私钥泄露，是资产被盗的最常见原因之一。
        

讲师强调，无论是作为开发者还是用户，在 Web3 世界中，“安全意识是第一位的”。

为了让听众更好地理解当前 Web3 的发展阶段，讲师做了一个历史类比：

-   **Web3 ≈ 1995 年的互联网**：现在的 DApp 普遍存在“很慢、很贵、很难用”的问题，这与 1995 年的早期互联网非常相似。那时，人们需要通过电话线拨号上网，网速慢且价格昂贵，互联网上的内容也乏善可陈。
    
-   **建设通往未来的铁轨**：尽管现状充满挑战，但我们都知道后来互联网发生了什么翻天覆地的变化。讲师鼓励大家，现在所做的工作，正是在这个蛮荒时代，建设一条通往未来的路，一条通往未来的铁轨。
    

最后，讲师对实习生和学生们发出了号召：欢迎来到 Web3 的世界。在这里，大家不仅仅是在写代码，更是在重新定义信任与协作的过程。作为建设者（Builder），大家可以拿起键盘，开始自己的建设之旅。

### Section 4：现代 DApp 全栈开发：混合框架（Hybrid Stack）详解（起始时间戳未提供）

本节深入探讨了现代 DApp 开发的技术栈选择，重点介绍并推荐了一种结合 Foundry 和 Hardhat 的混合框架（Hybrid Stack），旨在帮助开发者编写出能与顶级项目对齐的高质量代码。

讲师首先指出了 Web3 开发工具迭代速度极快。三年前，Truffle 和 web3.js 是主流，而现在它们已逐渐淡出视野。当前行业标准被 Foundry 和 Hardhat 所占据。

-   **Foundry**:
    
    -   **特点**: 用 Rust 语言编写，编译速度极快，比基于 JavaScript 的工具（如 Hardhat）快将近 20 倍。
        
    -   **优势**: 支持 Fuzzing（模糊测试），非常适合编写和测试核心的智能合约逻辑。
        
    -   **背书**: 受到以太坊基金会的推荐和支持。
        
-   **Hardhat**:
    
    -   **特点**: 基于 JavaScript/TypeScript，拥有非常强大和丰富的插件生态系统。
        
    -   **优势**: 适合编写部署脚本、任务管理和与前端的集成测试，解决了传统部署脚本一旦报错就不知道部署进度的痛点。
        

面对这两种强大的工具，开发者常常陷入“二选一”的困境。讲师明确提出，我们不必做选择题，而是应该采用“洋长避短”的混合策略。

**混合框架（Hybrid Stack）的核心思想**：

-   **计算密集型任务交给 Foundry**：例如，运行上千个单元测试、进行模糊测试等对性能要求高的任务，利用 Foundry 基于 Rust 的速度优势来完成。
    
-   **交互密集型任务交给 Hardhat**：例如，管理复杂的部署流程、与前端进行集成测试、任务自动化等，利用 Hardhat 丰富的 JavaScript 生态和插件来完成。
    

**如何让两个工具在同一个项目中和谐共存？** 许多人会疑惑，两个不同的工具链如何在一个项目里协同工作，会不会像“两个人睡一张床”一样打架？讲师解释了其实现原理，关键在于配置和插件。

1.  **统一合约路径**：
    
    -   通过配置文件，将 Foundry 的默认合约路径（通常是 `src/`）和 Hardhat 的默认合约路径（通常是 `contracts/`）指向同一个物理路径。这样，两个工具都能找到并操作同一套智能合约代码。
        
2.  **统一依赖管理**：
    
    -   Foundry 通过 `git submodule` 管理依赖（放在 `lib/` 目录），而 Hardhat 使用 `npm`（放在 `node_modules/` 目录）。
        
    -   通过一个名为 `hardhat-foundry` 的插件，可以建立路径映射（remapping）。这个映射让 Solidity 代码中的 `import` 语句，无论其依赖是来自 `npm` 包还是 `git` 包，都能被两个工具的编译器正确解析。
        
    -   最终效果是：开发者在编写代码时感受不到差异，但底层的编译和测试可以分别利用两套不同的引擎，发挥各自的优势。
        

这种混合架构使得开发者能够在一个项目中同时享受到 Foundry 的极致性能和 Hardhat 的强大生态，是当前全栈 DApp 开发的最佳实践之一。

### Section 5：智能合约开发最佳实践与安全范式（起始时间戳未提供）

本节聚焦于智能合约代码层面的具体实践和安全原则，通过几个关键点的讲解，展示了如何编写出更高效、更安全、更易于集成的合约。

1.  **自定义错误（Custom Errors）**：
    
    -   **问题**：在旧的 Solidity 版本中，开发者通常使用 `require(condition, "error message")` 或 `revert("error message")` 来处理错误。这种方式的问题在于，错误信息字符串需要被存储在链上，并且每次交易回滚时，都需要消耗额外的 Gas 来返回这个字符串。
        
    -   **解决方案**：Solidity 引入了 `Custom Error`。它允许开发者定义具名的错误，如 `error InsufficientBalance()`。在链上，这个自定义错误只是一个四字节的哈希值，而不是一个长字符串。
        
    -   **优势**：使用 `Custom Error` 极其节省 Gas。在被大量调用的应用中，这能省下巨额的 Gas 费用，是进行 Gas 优化的重要手段。
        
2.  **事件与索引（Events &** `indexed` **Keyword）**：
    
    -   **背景**：区块链本身对于前端应用来说是一个“黑盒”。前端想要知道链上发生了什么（例如，一个用户是否完成了某个操作），只能通过监听合约触发的事件（Events）。
        
    -   `indexed` **关键字的作用**：在定义 `event` 时，可以对最多三个参数使用 `indexed` 关键字，如 `event Signed(address indexed user, uint256 amount)`。
        
    -   **优势**：当一个参数被索引后，前端可以通过这个参数快速地过滤和查询相关的事件日志。例如，可以快速找出某个特定用户（`user`）的所有 `Signed` 事件。如果没有使用 `indexed`，前端则必须遍历所有的事件日志来查找，效率极低。
        
3.  **Checks-Effects-Interactions 模式**：
    
    -   **定义**：这是一个防止重入攻击（Re-entrancy Attack）的黄金法则，它规定了函数内部代码执行的顺序。
        
        -   **Checks（检查）**：首先，进行所有的条件检查，如权限验证、输入值校验等。
            
        -   **Effects（影响）**：其次，修改合约的状态变量，例如更新用户的余额、记录操作完成等。
            
        -   **Interactions（交互）**：最后，再进行外部调用，例如向其他地址转账或调用其他合约的函数。
            
    -   **为何重要**：讲师解释了如果不遵守此模式的风险。假设一个函数先转账（Interaction）再修改用户余额（Effect），黑客可以在收到钱的瞬间，通过其合约的回调函数（fallback function）再次调用这个转账函数。由于此时合约内的余额状态还未被更新，检查会再次通过，导致黑客可以反复提款，直到掏空合约的资金池。因此，永远要记住“先修改状态，再进行外部交互”。
        

### Section 6：高级测试技术：模糊测试与集成测试（起始时间戳未提供）

本节深入探讨了两种互补的高级测试方法，解释了为何在一个项目中同时需要 Foundry 的模糊测试和 Hardhat 的集成测试，以确保合约的健壮性和端到端数据流的正确性。

1.  **Foundry 的模糊测试（Fuzzing）：暴力美学**
    
    -   **传统单元测试的局限性**：普通的单元测试通常是基于已知的输入和预期的输出来进行验证（“已知”为前提）。然而，黑客的攻击手法往往是意想不到的、不按套路出牌的。
        
    -   **模糊测试的工作原理**：Fuzzing 是一种自动化的测试技术。开发者在编写测试用例时，不指定具体的输入值，而是只定义输入的类型。例如，`function testWithdraw(address user, uint256 amount)`。
        
    -   **Foundry 的实现**：在运行时，Foundry 会自动生成成千上万个随机的、甚至是极端的输入值（包括零地址、合约地址、特殊数值等），并将它们传入测试函数。
        
    -   **优势**：只要有任何一次随机输入导致了交易 `revert` 或合约状态异常，Foundry 就会立即报错，并明确指出是哪个致命的参数组合导致了问题。这种方法可以帮助开发者发现许多人脑难以想到的边界情况和潜在 bug，极大提升了合约的安全性，非常“省事”。
        
2.  **Hardhat 的集成测试（Integration Testing）：模拟真实世界**
    
    -   **测试的目标**：既然 Foundry 的测试如此强大，为什么还需要用 Hardhat 来写测试？讲师解释道，Hardhat 的测试通常用 TypeScript/JavaScript 编写，并使用 `ethers.js` 或 `viem` 这类库。这实际上是在模拟前端应用的真实行为。
        
    -   **端到端数据流验证**：集成测试的核心目的在于验证：当前端应用将数据打包好，并通过 RPC 发送给节点时，智能合约能否正确地响应？
        
    -   **意义**：这种测试验证的是整个“端到端”（End-to-End）的数据流。它确保了合约不仅自身逻辑正确，还能够被前端以预期的格式和方式正确地调用。这弥补了纯粹在 Solidity 环境中进行单元测试或模糊测试的不足，确保了前后端的顺利集成。
        

通过结合这两种测试方法，开发者可以从两个维度保障项目质量：Foundry 的 Fuzzing 确保了合约核心逻辑在各种极端输入下的健壮性，而 Hardhat 的集成测试则确保了合约在与外部世界（尤其是前端）交互时的正确性。

### Section 7：前端技术栈与常见“坑”点（起始时间戳未提供）

本节内容转向 DApp 的前端开发，介绍了一套推荐的技术栈，并重点剖析了两个在开发过程中极其常见且棘手的问题：服务端与客户端渲染不匹配（Hydration Mismatch）和大数处理（BigInt Handling）。

**推荐的前端技术栈**：

-   **Next.js**: 提供了最佳的服务端渲染（Server-Side Rendering, SSR）体验，并且对搜索引擎优化（SEO）友好。
    
-   **Wagmi**: 一个强大的 React Hooks 集合，极大地简化了与区块链的交互。以前需要手写几百行代码才能完成的连接钱包、签名等逻辑，现在用 Wagmi 的一个 Hook（如 `useConnect`）就能搞定。
    
-   **TanStack Query (React Query)**: 区块链的数据读取速度很慢。这个库能帮助前端做数据缓存和自动刷新。例如，当用户切换窗口再切回来时，页面数据会自动更新，提供了非常丝滑的用户体验。
    

**前端开发中的两大“天坑”**：

1.  **服务端/客户端状态不匹配（Hydration Mismatch）**
    
    -   **现象**：用户刷新页面时，右上角的钱包连接状态先显示“未连接”，然后闪烁一下，突然变成用户的地址（如 `0x...`），同时控制台报错。
        
    -   **原因**：这个问题源于 Next.js 的 SSR 机制。
        
        1.  **服务端渲染时**：服务器在生成 HTML 页面时，并不知道用户浏览器里是否安装了 MetaMask，也不知道钱包是否已连接。因此，它只能生成一个默认的“未连接”状态的 HTML。
            
        2.  **客户端接管时**：当这个 HTML 发送到浏览器后，React 会在客户端开始“接管”（Hydrate）。此时，客户端的 JavaScript 代码（例如 Wagmi）会检测到本地钱包其实是已连接状态。
            
        3.  **冲突与报错**：于是，React 试图强行将 DOM 从“未连接”状态修改为“已连接”状态。这个客户端渲染结果与服务端初始发来的 HTML 不一致，导致了“Hydration Mismatch”错误。
            
    -   **解决方案**：将用户的连接状态存储在 Cookie 中。因为 Cookie 会随着 HTTP 请求一起发送到服务器，这样服务器在渲染 HTML 时，就可以通过读取 Cookie 得知用户已经连接过钱包，从而直接生成一个“已连接”状态的 HTML。这样，服务器和客户端看到的初始状态就是一模一样的，完美消除了闪烁和报错。
        
2.  **大数精度丢失（BigInt Precision Loss）**
    
    -   **背景**：以太坊的智能合约中经常使用 `uint256` 类型来表示金额，其最大值是 `2^256 - 1`。然而，JavaScript 原生的 `Number` 类型是双精度浮点数，其能够安全表示的最大整数仅为 `2^53 - 1`。
        
    -   **问题**：如果直接将从合约返回的 `uint256` 余额（一个非常大的数）赋值给 JavaScript 的 `Number` 类型，会发生严重的精度丢失，导致金额计算错误。
        
    -   **现代解决方案**：现代 JavaScript 引入了 `BigInt` 类型（例如 `100n`）来处理大整数。
        
    -   **新的陷阱**：虽然 `BigInt` 解决了精度问题，但它带来了新的问题：`JSON.stringify()` 方法默认不支持 `BigInt` 类型，如果直接序列化含有 `BigInt` 的对象，会直接抛出错误。
        
    -   **正确做法**：在将数据（尤其是从服务端渲染传递到客户端）序列化之前，必须显式地将 `BigInt` 类型调用 `.toString()` 方法，将其转换为字符串。这是一个非常容易被忽视的坑。
        

### Section 8：Aave 协议深度解析：从 V3 机制到 V4 模块化架构（起始时间戳未提供）

本节内容进行了一次深入的案例研究，以顶级 DeFi 借贷协议 Aave 为例，剖析其从 V3 到 V4 的架构演进。讲师强调，这不仅是一次简单的版本升级，而是一次从单体应用（Monolithic Application）向类似微服务（Microservices-like）架构的范式转移。通过学习 Aave 如何管理数十亿美金资产的复杂度和效率，开发者可以获得宝贵的系统设计经验。

**Aave V3 的核心机制**： Aave V3 的设计更多地体现了在存储和金融数学层面的极致优化。

-   **位图打包（Bitmap Packing）**：在 Solidity 中，存储（Storage）是非常昂贵的。如果一个资产的多个配置参数（如 LTV、清算阈值、是否激活等）分散在不同的变量中，每次读取都需要多次 SLOAD 操作，消耗大量 Gas。Aave V3 使用了位图打包技术，将 30 多个配置参数压缩存储在一个 `uint256` 变量中。例如，0-15 位存 LTV，16-31 位存清算阈值，第 56 位存激活状态等。这样，只需一次 SLOAD 操作，再通过位运算（Bitwise Operations），就能获取所有配置，极大优化了 Gas 效率。
    
-   **惰性计算（Lazy Calculation）**：很多人误以为存入 Aave 的资金，其利息是每秒钟在链上更新的。实际上，区块链无法承受如此高频的写操作。Aave 引入了“流动性指数”（Liquidity Index）的概念。用户的实际余额并不直接存储，而是存储一个“缩放后的余额”（Scaled Balance）。用户的真实余额 = `scaledBalance * currentLiquidityIndex`。这个指数只在有用户与协议发生交互（存、取、借、还）时才进行更新。这种“惰性”机制将计算量从“每秒更新”降低到“按需更新”，是借贷协议数学模型的核心。
    
-   **动态利率曲线**：Aave 使用分段的利率曲线来调控资金池的流动性。当资金利用率低于一个拐点（如 80%）时，利率缓慢上升，鼓励借贷。一旦超过这个拐点，利率会急剧飙升。这种设计的目的是为了防止流动性枯竭（即池子被借空，导致存款人无法取款），通过高利率迫使借款人还款，同时吸引存款人存钱，从而将利用率压回到健康水平。
    
-   **清算机制与健康因子**：Aave 通过“健康因子”（Health Factor）来衡量一笔借款的风险。一旦健康因子小于 1，该仓位就面临被清算的风险。协议本身不主动清算，而是依赖外部的清算人。这些清算人像“黑暗森林中的猎人”一样时刻监控链上数据，一旦发现可清算的仓位，他们会帮助协议偿还债务，同时以折扣价获得用户的抵押品，并赚取清算奖金（5%-10%）。这种基于经济激励的机制保证了协议不会产生坏账。
    

**从 V3 到 V4 的范式转移**： 尽管 V3 已经非常高效，但它存在一个致命问题：**流动性碎片化**。Aave V3 在以太坊主网、Optimism、Polygon 等不同链上部署了独立的资金池。这些池子里的同一种资产（如 USDC）互不相通，就像在 A 银行存的钱无法在 B 银行取出一样。

**Aave V4 的核心架构：Hub-and-Spoke** V4 提出了一个全新的“统一流动性层”方案，采用了“中心辐射型”（Hub-and-Spoke）架构。

-   **Liquidity Hub（流动性中心）**：这是 V4 的心脏。它是一个极其简单且安全的合约，只做两件事：管钱和记账。它不关心具体的业务逻辑，只关心全局的总资产是多少。
    
-   **Spokes（辐射模块）**：这些是围绕 Hub 的、负责具体业务逻辑的模块。例如，一个 Spoke 负责标准的借贷逻辑，另一个 RWA Spoke 负责现实世界资产（需要 KYC）的逻辑。不同的业务模块可以共享 Hub 中的资金。
    
-   **优势**：这种设计实现了“关注点分离”（Separation of Concerns）。Hub 的极简设计保证了核心资产的安全性，而 Spoke 的模块化则支持了无限的业务扩展和创新，同时风险也被隔离在各个 Spoke 内部。
    

**V4 的新特性**：

-   **风险溢价（Risk Premium）**：在 V4 中，不同风险的抵押品将有不同的借款利率。如果你抵押的是高风险的山寨币，那么你的借款利息会比抵押 ETH 的人要高。这实现了更精准的风险定价。
    
-   **全面拥抱 ERC-4626 标准**：Aave V3 的 aToken（存款凭证）虽然好用，但并非标准化的。V4 全面采用 ERC-4626（代币化金库标准），使得 Aave 的存款凭证能够与其他 DeFi 协议更好地组合和集成，提升了可组合性。
    

通过对 Aave 架构演进的分析，本节展示了一个顶级协议是如何通过架构重构来解决实际问题（流动性碎片化），并为未来的扩展性和安全性打下坚实基础的。

### Section 9：命令行实战：Foundry 与 Hardhat 工作流（起始时间戳未提供）

在理论讲解之后，课程进入了两个动手实践环节，旨在让学员熟悉在命令行环境下与区块链交互的基本流程。讲师认为，虽然图形化界面很直观，但真正的开发者大量工作都是在命令行中完成的，并鼓励学员将命令行操作想象成一个文字版的 RPG 游戏，每个命令都是一句“咒语”。

**实践一：Foundry 三件套（Anvil, Forge, Cast）**

1.  **安装与环境准备**：
    
    -   通过 `foundryup` 命令安装 Foundry 工具链（Toolchain），它包含了编译器、测试器等一系列工具。
        
2.  **Foundry 三件套介绍**：
    
    -   **Anvil（铁砧）**：本地测试节点。它在内存中模拟一个完整的以太坊网络。启动 Anvil，一个以太坊世界就诞生了；关闭它，世界就毁灭了（数据清空）。启动后，它会默认生成 10 个测试账户，每个账户里有 10000 个 ETH。
        
    -   **Forge（锻造）**：编译器和测试器。负责将 Solidity（`.sol`）代码编译成机器能读懂的字节码（Bytecode），并执行测试。
        
    -   **Cast（施法）**：命令行客户端。功能类似 MetaMask 钱包，但通过命令行来发送交易、调用合约、查询数据。
        
    -   **心智模型**：Anvil 是脚下的土地，Forge 是手上的工具，Cast 是操作工具的人，共同在这片土地上建造新的世界。
        
3.  **实战步骤**：
    
    1.  **启动本地网络**：打开一个终端窗口，输入 `anvil` 并运行。这个窗口必须保持开启。
        
    2.  **初始化项目**：打开第二个终端窗口，使用 `forge init my-project` 创建一个新项目。
        
    3.  **部署合约**：使用 `forge create` 命令部署项目中的 `Counter.sol` 合约。命令中需要指定 RPC URL（指向本地 Anvil）、部署者的私钥（从 Anvil 输出中复制）和 `--broadcast` 标志（确保交易被真实广播到本地网络）。部署成功后会返回合约地址。
        
    4.  **读取状态（Call）**：使用 `cast call <contract_address> "number()"` 查询计数器的当前值。`call` 操作是免费的，因为它只读取数据，不改变链上状态。注意返回的是十六进制，需要加上 `--decimal` 标志转换为十进制。
        
    5.  **修改状态（Send）**：使用 `cast send <contract_address> "setNumber(uint256)" 666` 来调用 `setNumber` 函数，将计数值改为 666。`send` 操作需要付费（消耗 Gas），因为它会修改区块链状态。执行此命令时，可以在 Anvil 窗口看到交易被打包的过程。
        
    6.  **再次验证**：再次使用 `cast call` 查询，确认计数值已变为 666。
        

通过这套流程，学员完成了从写代码、部署、状态变更到验证的完整闭环，掌握了区块链开发最核心的交互模式。

**实践二：Hardhat 工作流**

讲师将 Foundry 比作“单兵作战”，速度快，适合核心逻辑开发；而 Hardhat 则像一支“正规军”，基于 JavaScript/TypeScript 生态，更擅长自动化和工程化。

1.  **Hardhat 三大件**：
    
    -   **Hardhat Network**：本地测试服务器，支持 `console.log` 来调试合约。
        
    -   **Scripts**：自动化脚本。开发者用 JavaScript/TypeScript 编写脚本来指挥“机器人”完成部署、验证等一系列任务，而不是手动执行单条命令。
        
    -   **Console**：交互式控制台。一个 JS 环境，可以实时与区块链进行对话，读写数据。
        
2.  **实战步骤**：
    
    1.  **初始化项目**：使用 `npx hardhat` 并选择 `Create a JavaScript project`。
        
    2.  **启动本地网络**：在一个终端窗口运行 `npx hardhat node`。
        
    3.  **编写部署脚本**：在 `scripts` 目录下，编辑部署脚本。脚本使用 `ethers.js` 库来获取合约工厂（`getContractFactory`）、部署合约（`deploy`），并等待部署完成（`waitForDeployment`）。
        
    4.  **运行部署脚本**：在另一个终端窗口，运行 `npx hardhat run scripts/deploy.js --network localhost`，将合约部署到本地网络。成功后会打印出合约地址。
        
    5.  **进入交互式控制台**：运行 `npx hardhat console --network localhost` 进入控制台模式。
        
    6.  **在控制台交互**：在控制台内，可以使用 JavaScript 代码与已部署的合约进行交互，例如附加到合约实例、调用 `read` 和 `write` 方法等。讲师强调，学会了在 Console 中交互，就基本学会了如何在 DApp 前端与合约交互，因为逻辑是完全一样的。
        

通过这两个实践环节，课程展示了两种主流工具链的基本用法，并对比了它们的哲学差异，建议学员先用 Foundry 理解 EVM 原理，再用 Hardhat 进行工程化落地。

\--------------------------------------------------------------------------------

## 框架 & 心智模型

### 心智模型一：所有权范式转移——从“租客”到“房东”

这个心智模型旨在解决一个根本性问题：**Web3 究竟带来了什么与 Web2 本质不同的价值？为什么我们需要它？** 视频通过构建一个从“租赁关系”到“所有权关系”的认知框架，清晰地回答了这个问题。

**模型的建立过程**：

1.  **以 Web2 的痛点为起点**：模型始于一个 relatable 的例子——游戏皮肤。讲师引导观众思考，在腾讯服务器里的皮肤，其所有权并不属于用户。这立刻建立了一个核心认知：在 Web2 模式下，用户的数据和数字资产是被平台“租借”给用户的，用户是“租客”。平台的规则、存续直接决定了用户资产的命运。
    
2.  **引入 Web3 的核心概念——Ownership**：紧接着，视频将 Web3 的核心革命总结为三个字：“所有权”。这是一个强有力的声明，直接将 Web3 与 Web2 的“租赁”模式对立起来。用户从“租客”升级为“房东”，对自己名下的资产拥有绝对的控制权。
    
3.  **通过类比具体化抽象概念**：为了让“所有权”这个抽象概念变得具体可感，模型引入了两个关键类比：
    
    -   **小卖部 vs. 自动贩卖机**：这个类比将信任模型从“信任人（平台方）”转移到“信任机器（代码）”。小卖部依赖老板的个人意愿，存在单点故障风险；而自动贩卖机按程序办事，公开透明，无人能干预。这解释了 Web3 如何通过“代码即法律”来实现去信任化的所有权保障。
        
    -   **一站一号 vs. 万能钥匙（钱包）**：这个类比解释了身份和数据所有权的实现方式。Web2 的身份被割裂在各个平台，数据随之被锁定；Web3 的钱包则是一个统一的、可移植的数字身份，用户的数据和资产附着于这个身份，可以随身携带，自由地在不同应用间迁移。
        

**此框架如何帮助理解 Web3**：

这个“租客 vs. 房东”的框架，超越了纯粹的技术解释，从经济和社会关系的角度揭示了 Web3 的颠覆性。它帮助我们理解：

-   **NFT 的真正价值**：NFT 不仅仅是一张图片，它是将原本存在于中心化服务器（如游戏皮肤）中的“租赁资产”转化为用户可真正拥有的“产权资产”的技术载体。
    
-   **DAO 的组织逻辑**：DAO（去中心化自治组织）之所以可行，是因为代币不仅是“燃料”，更是“股权凭证”（治理权）。成员作为“房东”，可以共同决定社区的未来，而不是被动接受平台方的管理。
    
-   **Web3 开发的底层哲学**：开发者在构建 DApp 时，必须时刻将用户的所有权放在首位。合约的不可篡改性、透明性和去中心化特性，都是为了服务于这个最终目标。它解释了为什么 Web3 开发如此注重安全和确定性，因为一旦出错，影响的是用户真正的私有财产。
    

### 心智模型二：混合开发栈——“洋长避短”的工程化思维

这个心智模型解决的是一个非常实际的工程问题：**在快速迭代的 Web3 工具生态中，如何选择并组合工具以达到最高的开发效率和代码质量？** 视频通过提出 Foundry 和 Hardhat 的混合使用方案，建立了一个“取长补短、因地制宜”的工程化心智模型。

**模型的建立过程**：

1.  **呈现“二选一”的困境**：模型首先介绍了当前最主流的两个工具链——Foundry 和 Hardhat，并清晰地列出了它们各自的优缺点。Foundry 快、适合核心逻辑测试；Hardhat 生态好、适合部署和前端集成。这自然地引出了开发者面临的选择难题。
    
2.  **打破二元对立思维**：讲师明确指出“我们没必要做选择题”，直接挑战了非此即彼的思维定式。他提出了“混合栈”（Hybrid Stack）的概念，其核心思想是“洋长避短”。
    
3.  **任务分解与工具匹配**：模型将 DApp 的开发流程分解为不同类型的任务，并为每种任务匹配最适合的工具：
    
    -   **计算密集型任务**（如上千个单元测试、模糊测试）→ 匹配 **Foundry**，利用其基于 Rust 的高性能。
        
    -   **交互密集型任务**（如部署脚本、前端集成测试、自动化任务）→ 匹配 **Hardhat**，利用其丰富的 JS/TS 插件生态。
        
4.  **技术上解决“共存”问题**：为了打消“两个工具如何在一个项目里工作”的疑虑，模型深入到底层机制，解释了实现共存的关键技术点：
    
    -   **路径统一**：通过配置文件，让两个工具操作同一套合约源码。
        
    -   **依赖映射**：通过 `hardhat-foundry` 插件，让两个编译器都能正确解析对方的依赖（`git submodule` vs `npm`）。这使得开发者在编码时体验统一，而底层执行时则各取所长。
        

**此框架如何帮助理解以太坊开发**：

这个混合栈的心智模型，体现了成熟的工程思维，对 Web3 开发者有重要的指导意义：

-   **工具非信仰，而是手段**：它教育开发者不要陷入对某个工具的“宗教式”崇拜，而应将其视为解决问题的手段。根据任务的性质选择最合适的工具，是专业工程师的标志。
    
-   **关注点分离的实践**：将“核心逻辑的健壮性测试”和“项目工程化的管理与集成”这两个关注点分离开，并用不同的专业工具去应对，这本身就是一种优秀的软件工程实践。
    
-   **理解工具的边界**：通过对比，开发者能更深刻地理解每种工具的设计哲学和适用场景。Foundry 追求极致的合约开发与测试体验，而 Hardhat 更侧重于作为一个连接前后端、打通整个开发流程的“粘合剂”。
    
-   **推动行业最佳实践**：这种混合模式正逐渐成为行业内高质量项目的标配。掌握它，意味着开发者的技能栈能够直接与一线 Web3 项目对齐，写出更专业、更可靠的代码。它将开发者的思维从“我该用哪个工具”提升到“我该如何组合这些工具来最高效地解决问题”。
<!-- DAILY_CHECKIN_2026-01-26_END -->

# 2026-01-25
<!-- DAILY_CHECKIN_2026-01-25_START -->

# Web3 实习计划（冬季）：残酷共学 & 休闲黑客松案例拆解

-   **Author:** ETHPanda (主讲人：Tina, L Ling)
    
-   **URL:** \[YouTube 视频链接\]
    

\--------------------------------------------------------------------------------

## 概览 (Overview)

本课程报告深度拆解了由良心道 (LXDAO) 发起的两种核心社区活动模式：“残酷共学 (Cruel Co-learning)”与“休闲黑客松 (Casual Hackathon)”。视频旨在为社区组织者和参与者提供一套完整、可复现的操作指南，详细阐述了这两种模式从概念理念到具体执行的全流程。残酷共学被定义为一个开源、去中心化、无许可的教育新模式，其核心是通过带有“残酷”打卡机制的社群共学，帮助参与者在固定周期内达成可量化的技能提升目标。休闲黑客松则是一种创新性的开源活动，它通过“轻量运营、低成本、去商业化、重创意、重体验”的原则，旨在降低传统黑客松的参与门槛和心理压力，营造一个人人皆可参与、人人皆有收获的创造性氛围。视频通过详尽的阶段划分、流程拆解和团队分工介绍，为如何成功策划、执行并复盘这两类 Web3 社区活动提供了宝贵的框架和实践经验。

\--------------------------------------------------------------------------------

## Section 1：“残酷共学”概念与核心机制

“残酷共学 (Cruel Co-learning)”是由良心道 (LXDAO) 发起的一种创新的教育模式。它被设计为一个开源、去中心化且无需许可的学习框架，旨在通过社群的力量，帮助参与者在设定的周期内实现个人技能的显著提升。

核心理念

残酷共学的核心思想是将学习过程从“一个人学”转变为“一群人推动”。它通过以下几个关键要素实现这一目标：

-   **社群共选目标：** 学习的主题和目标由社群成员共同选择，确保了内容的 relevancy (相关性) 和参与者的内在驱动力。
    
-   **可量化目标：** 学习成果被设定为可量化的指标，使得进度可追踪，成果可衡量。这为参与者提供了清晰的努力方向和成就感。
    
-   **短效技能提高：** 活动聚焦于在较短的周期内（通常为两到三周，或长至一个月）达成特定的技能增长，这使得学习过程更为紧凑和高效。
    
-   **共学共创闭环：** 通过共同学习和共同创造的过程，形成一个完整的学习闭环，让知识不仅被动吸收，更能通过实践和分享得到内化。
    

“残酷”机制的内涵

这里的“残酷”主要体现在其严格的打卡机制上。这并非为了施加不必要的压力，而是作为一种强有力的承诺机制 (commitment mechanism) 来对抗拖延和惰性。

-   **严格的出勤要求：** 组织者会设定明确的打卡规则。例如，在当前的实践中，每位参与者每周仅有两次请假机会。
    
-   **失败的定义：** 如果参与者连续三天未能完成打卡，则该次共学经历将被视为失败。这种明确的后果设定，极大地增强了参与者坚持下去的动力。
    

这种机制的设计，旨在筛选出真正有决心、愿意投入时间的学习者，并为他们营造一个高度专注和彼此激励的学习环境。

如何发起一场残酷共学

发起一场残酷共学是 permissionless (无需许可的)，任何人都可以通过良心道的平台进行申请。

-   **申请渠道：** 有意向的组织者可以通过良心道的 Dashboard (仪表盘) 或论坛 (Forum) 提交申请。
    
-   **官方支持：** 一旦申请通过，良心道的社区成员会为活动提供奖励支持和资源上的帮助，以激励组织者和参与者。
    

总而言之，残酷共学是一种将 Web3 的去中心化和社区共治理念应用于教育领域的实践。它通过结构化的流程和强有力的激励机制，有效地解决了个人学习中常见的动力不足和难以坚持的问题，为 Web3 生态的知识普及和人才培养提供了一个可规模化的解决方案。

\--------------------------------------------------------------------------------

## Section 2：“残酷共学”全流程拆解：从策划到复盘

组织一场成功的残酷共学需要经历三个清晰的阶段：前期策划、活动执行，以及最后的收尾与复盘。每一个阶段都包含若干关键步骤，确保活动能够顺利进行并达到预期效果。

第一阶段：前期策划 (Pre-planning)

在活动开始之前，周密的策划是成功的基石。

-   **1\. 明确目的与动机 (Clarify Purpose & Motivation)**
    
    -   **个人发起：** 对于个人发起者，动机通常是学习一项新知识或培养一个新技能。例如，过往成功的案例包括英语残酷共学和 AI 主题共学。这些活动旨在聚集有相同学习目标的同伴，共同克服学习过程中的障碍。
        
    -   **组织发起：** 对于良心道或 ETHPanda 这样的组织方，发起共学的目的需要与组织的使命和价值观相符，旨在为社区成员提供价值。
        
    -   **合作方发起：** 其他组织（如项目方）可能会作为赞助方，通过共学活动来帮助他们建立和活跃自己的开发者社区或用户社区。一个具体的例子是近期结束的通用 AI 共学，它是由 ZKLink、阿里云与良心道合作举办的。
        
-   **2\. 确定前置信息与规则设计 (Define Prerequisite Information & Rule Design)**
    
    -   **量化目标：** 必须设定清晰、可衡量的学习目标。
        
    -   **明确节点：** 整个共学周期内的每一个关键时间节点都需要被明确定义。
        
    -   **聚焦主题：** 主题需要高度聚焦且具有可执行性，避免过于宽泛。
        
    -   **设计规则体系：** 制定详细的规则，包括报名截止时间、具体的打卡机制、以及奖励与惩罚的设定。这些规则是维持活动秩序和参与者动力的核心。
        
-   **3\. 准备资源与团队分工 (Prepare Resources & Team Roles)**
    
    -   **团队构建：** 根据活动需求组建团队。以 Web3 世界实习计划为例，团队中既有负责搭建新平台的开发同学，也有作为运营角色陪伴大家学习的助教。
        
    -   **学习资料整理：** 必须为参与者准备系统化的学习资料。
        
    -   **设计学习框架：** 构建一个合理的学习框架至关重要。例如，实习计划被分为四周，每周都有不同的关键词：
        
        -   第一周：行业了解
            
        -   第二周：实践前期准备
            
        -   第三周：上手实践
            
        -   第四周：职业规划
            
    -   **寻求社区支持：** 组织者既可以自己准备所有前期资料，也可以在良心道社区内发起需求，寻求社区成员的帮助来共同筹备内容。
        

第二阶段：活动执行 (Event Execution)

活动开始后，核心工作转移到执行和运营上。

-   **1\. 招募与宣发 (Recruitment & Promotion)**
    
    -   **渠道选择：** 招募渠道可以多样化，包括官方推特账号、Telegram 社区、微信群、良心道公众号等。
        
    -   **精准触达：** 宣发内容需要准备充分，包括活动的大致介绍、周期、路线图等，目的是精准地触达目标用户群体，并突出活动的亮点。
        
    -   **合作推广：** 可以与其他组织进行合作宣发。例如，与 ZKLink 和阿里云合作的活动，合作方的官方社交媒体也会进行转发，扩大活动影响力。
        
-   **2\. 共学进行时：仪式感与日常运营 (During Co-learning: Ceremony & Daily Operations)**
    
    -   **开营仪式 (Opening Ceremony)：** 活动开始时可以举办一个开营仪式。形式可以灵活，既可以是像实习计划那样内容较多、较为正式的线上会议，也可以是简单的线上宣布。其核心目的是向所有参与者介绍活动的完整时间线和学习指引。
        
    -   **日常运营与支持 (Daily Operations & Support)：** 作为组织者，需要持续把握共学的节奏，明确每天的学习任务。同时，要积极引导社群氛围，鼓励大家多多交流、分享学习笔记。
        
    -   **关键节点运营 (Key Milestone Operations)：** 根据活动设计，可能会包含一些关键的分享会或 Workshop，旨在帮助大家更好地达成学习目标。这些活动并非强制性的，完全依据具体共学的设计来安排。
        

第三阶段：收尾和复盘 (Wrap-up & Review)

活动结束后，通过复盘将经验沉淀下来，为未来的活动提供借鉴。

-   **1\. 结营与成果展示 (Closing & Showcase)**
    
    -   **数据收集：** 组织者需要收集本次活动的关键数据，如参与人数、打卡率、完成情况等。
        
    -   **成果呈现：** 将收集到的数据和成果进行整理和展示，让所有参与者和外界都能了解活动的整体情况。这类似于社交软件上的个人年度报告，为活动画上一个圆满的句号。
        
-   **2\. 内部收尾与复盘 (Internal Wrap-up & Recap)**
    
    -   **激励结算与发放：** 对在活动中表现优异的参与者进行奖励发放，形式可以是 NFT、内推机会或其他任何形式的激励。
        
    -   **收集反馈：** 收集参与者的反馈，了解他们的体验和建议。
        
    -   **内部复盘会议：** 团队内部进行复盘，可以参考黑客松的复盘结构。流程通常是：先看数据，再分析关键的执行动作，讨论哪些做得好，哪些有待改进，最终形成一份复盘报告。
        
    -   **经验沉淀：** 复盘的成果将用于下一次活动的迭代优化。如果不再组织，也可以将改进意见反馈给良心道，为“残酷共学”这一公共产品的完善做出贡献。
        

核心要点总结

-   **主题聚焦：** 明确共学主题。
    
-   **规则明确：** 清晰的打卡机制和规则是活动运行的保障。
    
-   **轻量化运营：** 主要依靠社群的学习氛围和组织方的引导，无需投入过多的精细化规划。
    
-   **沉淀复盘：** 通过复盘实现持续迭代和改进。
    

\--------------------------------------------------------------------------------

## Section 3：“休闲黑客松”核心理念与特点

“休闲黑客松 (Casual Hackathon)”是良心道发起的另一种创新型开源活动。它的核心是通过一种全新的方式来组织黑客松，旨在解决传统黑客松带来的一些痛点，让更多人愿意并能够参与到创造的过程中来。

核心理念：降低压力，回归创造本质

“休闲黑客松”的命名本身就体现了其核心理念。传统黑客松常常与高压、排名、奖金紧密相连，这使得许多潜在的参与者望而却步，因为他们在开始之前就已经背负了沉重的心理负担。很多人要么不敢参加，要么只选择那些最“安全”、最容易获奖的题目，从而限制了真正的创造力。

休闲黑客松则致力于提供一种完全不同的体验，它更关心：

-   **你是否愿意动手：** 鼓励参与者，无论其技术水平如何，都勇敢地迈出第一步。
    
-   **你是否愿意发挥创造力：** 提供一个允许自由探索和试错的环境。
    
-   **你是否在过程中真正创造了属于自己的东西：** 强调过程的价值和个人作品的独特性，无论是对于开发者还是运营人员。
    

四大核心特点

1.  **主题化与前沿性 (Themed & Cutting-edge)**
    
    -   每一届休闲黑客松都有一个明确的主题，通常围绕当下前沿的技术或热门话题展开。例如，往届的主题包括 ERC-4337、Agent、ZK (零知识证明) 以及 AI。暑期实习计划中的 `Meme First DApp` 主题，则是由学生组织者共同构思并落地的，充分体现了社区驱动的特点。
        
2.  **低参与成本与灵活性 (Low Participation Cost & Flexibility)**
    
    -   **周期短：** 整个黑客松的周期通常为一周，而核心的 `Hack Day`（编码日）安排在周末，一般为一天。
        
    -   **降低门槛：** 这样的设计极大地降低了参与成本。参与者（尤其是上班族）无需请假，也无需花费差旅费飞往线下场地。只要有时间，就可以在线上参与。
        
3.  **去高压的“休闲”氛围 (Low-pressure "Casual" Atmosphere)**
    
    -   活动不鼓励参与者“废寝忘食”地通宵工作。提供的一周时间是为了让大家可以先好好构思，尝试将想法落地，而不是在极度紧张的环境下进行极限冲刺。参与者可以以一种更轻松、更具探索性的心态来打磨自己的作品。
        
4.  **“人人参与，人人获奖”的包容性原则 ("Everyone Participates, Everyone Wins")**
    
    -   **没有失败：** 在休闲黑客松的框架里，没有“失败”这一说。每一个提交并进行 Demo 的项目都会被看见，并得到反馈。
        
    -   **评委的角色转变：** 评委在这里的角色不是“筛选者”，而是“建议者”。他们会从不同的维度给予每个项目建议和肯定，帮助团队在未来更好地优化自己的作品。
        
    -   **社区作为终点：** 黑客松不仅仅是一场比赛，更可以被看作是一个短期的、密集型的“共创社区”。项目的完成不是终点，过程中建立的链接——与队友、技术导师、其他参与者的交流——反而更加重要。许多未来的工作机会或合作关系都可能从这样的场合开始。
        

总而言（用一句话概括），休闲黑客松希望以一种更轻松的方式，让更多人参与进来，发挥自己的创造力，进行头脑风暴并动手实践，并最终欢迎他们留在社区，持续做出贡献。

\--------------------------------------------------------------------------------

## Section 4：“休闲黑客松”组织框架与核心原则

休闲黑客松的成功运作依赖于一套清晰的核心原则和组织框架，这套框架旨在确保活动能够以轻量、高效且符合其核心理念的方式进行。

五大核心原则

这五个原则是休闲黑客松区别于传统黑客松的基石，贯穿于活动策划和执行的始终。

1.  **轻量运营 (Lightweight Operations)**
    
    -   这是一个高度模板化和流程化的运营模式。通常遵循“提前一周宣传筹备，一周黑客松时间，周末定为 Demo Day”的节奏。这种模式使得活动的发起和管理成本大大降低，易于复制和推广。
        
2.  **线上为主 (Online First)**
    
    -   活动主要在线上进行，这打破了地域限制，让全球各地的开发者和爱好者都能方便地参与进来，最大化了活动的可及性。
        
3.  **休闲参与 (Casual Participation)**
    
    -   明确不强制高压竞争。整个活动氛围的营造都围绕“休闲”二字，鼓励探索和享受过程，而非结果导向的激烈比拼。
        
4.  **去商业化 (De-commercialized)**
    
    -   这是与传统黑客松最显著的区别之一。传统模式中，出资方（赞助商）的目标是获取品牌曝光，组织者则负责吸引流量、完成数据上的 KPI。这导致经验丰富的老手可能会快速套用模板来赢取奖金，而那些真正想认真打磨创意但技术尚不熟练的参与者反而容易被淘汰。这种模式会严重压缩创造空间。
        
    -   休闲黑客松通过去商业化，将重心放回到技术探索和创意本身，为真正有价值的想法提供了孵化的土壤。
        
5.  **人人获奖 (Everyone Wins)**
    
    -   为了彻底贯彻“没有失败”的理念，每个完整参与并提交作品的团队都会获得一个为其项目独立定制的 Badge (徽章) 奖项。这是一种精神激励，肯定了每一份努力和创造，确保了所有参与者都能带着成就感离开。
        

如何发起一场休闲黑客松

与残酷共学类似，发起一场休闲黑客松的流程也是开放和标准化的，主要通过良心道的平台进行。

-   **发起入口：** 可以在良心道的 Dashboard 中找到相关的策划模板和任务背景介绍。这里详细阐述了创始人 Bman 发起休闲黑客松的初衷，帮助新组织者理解其核心价值。
    
-   **历史存档：** 往期的所有黑客松（至今已举办七期）的资料和数据都存档在 GitHub 上，为新的组织者提供了丰富的参考案例。未来的活动筹备也将基于这个平台进行。
    
-   **核心任务拆解：**
    
    -   **主题构思：** 首先需要想一个大家感兴趣的主题，如 AI、Web3 或其他前沿技术，这是吸引参与者的第一步。
        
    -   **流程策划：** 运营团队需要将从想法到落地的整个流程完整地规划和执行出来。
        
    -   **氛围营造：** 创造一个友好、开源、休闲的环境，激发参与者的热情。
        
    -   **技能要求：** 组织者需要具备项目管理、社区运营、社媒运营（用于宣发）、沟通协调、资源调动和执行落地等多方面的能力。
        
-   **交付物清单 (Deliverables)：**
    
    -   **核心文档：** 时间安排、主题介绍、参与规则、评审标准、奖金分配方案（如有）。
        
    -   **宣传材料：** 海报、推文、活动公告、社区公告等全套材料。
        
    -   **协作工具：** 建立参赛者交流群，并使用 Notion 或 Google Sheet 等工具进行数据复盘。
        
    -   **总结报告：** 活动结束后，必须输出一份包含可量化数据的总结报告（如报名人数、推文阅读量、最终提交项目数、Demo 项目数、参与者反馈等），为后续活动优化提供依据。
        

标准时间周期

一个完整的休闲黑客松周期通常为三周，分布如下：

-   **第一周：** 对内筹备与对外宣传。
    
-   **第二周：** 黑客松活动周（包括 Workshop、AMA、Team Building 等）。
    
-   **第三周：** 对内总结复盘，并对外发布活动 Recap。
    

\--------------------------------------------------------------------------------

## Section 5：“休闲黑客松”全流程拆解：从筹备到复盘

本节将以 `Meme First DApp (MFDP)` 这一届暑期实习计划的黑客松为例，详细拆解休闲黑客松从筹备到复盘的每一个具体环节和关键节点。这次活动反响非常出色，最终有 19 个项目参与了 Demo。

1\. 活动节点与时间线 (Event Milestones & Timeline)

一个成功的黑客松需要一个清晰且固定的时间线，所有筹备工作都围绕这个时间线展开。

-   **运营筹备组建成 (Organizing Team Assembly):** 例如，在周五前完成团队组建。
    
-   **正式宣发 (Official Promotion Kick-off):** 在下周一开始，标志着活动正式对公众开放报名。
    
-   **开幕式 (Open Day):** 通常在宣发后几天举行，是一个线上的开幕会议。
    
-   **中期活动 (Mid-session Activities):** 在 Open Day 和 Demo Day 之间，穿插安排 Workshop、AMA 和 Team-building (团队组建) 环节。这些活动由运营组自行筹备。
    
-   **项目演示日 (Demo Day):** 整个活动的高潮，时间点必须提前固定（例如，定在某周五）。
    
-   **奖项发布 (Award Announcement):** 在 Demo Day 后的几天内公布所有奖项。
    
-   **活动总结发布 (Recap Release):** 在奖项发布后，将完整的活动总结 (Recap) 发布到社交媒体（如公众号、Twitter）和社群中，进行二次传播。整个活动至此正式结束。
    

2\. 活动目的与倒推逻辑 (Event Objectives & Reverse Engineering)

所有活动的设计都应服务于最终目标。

-   **以终为始：** 核心目标是 Demo Day 的成功。假设我们希望最终有 10 个项目进行 Demo。
    
-   **倒推参与人数：** 一个项目组可能是 1 人，也可能是 3-5 人。为了产出 10 个 Demo，我们可能需要至少 30-50 位稳定参与的开发者。
    
-   **考虑流失率：** 考虑到总会有人因各种原因（时间冲突、压力大等）在中途退出或在最后时刻放弃 Demo，我们需要一个更高的初始报名人数。因此，为了最终有 50 人深度参与，我们可能需要吸引 100 人以上的报名者。
    
-   **节点服务目标：** 这意味着从正式宣发到 Open Day、AMA、Workshop 的每一个环节，其核心目的之一都是“捞人”——吸引更多潜在的参与者报名，并持续维持他们的参与热情，直到 Demo Day。
    

3\. 各节点内容策划与执行 (Content Planning & Execution for Each Milestone)

-   **正式宣发 (Official Promotion):**
    
    -   **内容要素：** 必须包含活动的所有关键信息：活动标题、日程安排、主题介绍、嘉宾阵容（如有）、报名链接、参赛者交流群二维码和宣传海报。
        
    -   **文案结构：** 清晰地回答几个核心问题：这是什么样的一场黑客松？谁适合参加？我们能提供什么？为什么要举办？以及主办方和支持方是谁。
        
-   **开幕式 (Open Day):**
    
    -   **目的：** 全面介绍活动细则，是参与者进入状态的关键一步。
        
    -   **内容：** 详细讲解赛道设置、评审维度、评委背景、参赛规则、技术栈边界、奖项设置、如何组队、如何与助教 (Mentor) 建立联系等。
        
    -   **关键交付物：** 需要准备 Deck (PPT) 和宣发推文。
        
-   **AMA (Ask Me Anything):**
    
    -   **形式：** 一场轻技术主题的讨论，通常在 Twitter Space 上以无 PPT 的问答形式进行。
        
    -   **内容：** 聊与本次黑客松技术相关的主题，但不深入探讨具体的技术实现细节，目的是激发兴趣和思想碰撞。
        
-   **Workshop:**
    
    -   **形式：** 与 AMA 不同，Workshop 是一个重实践的技术分享。通常由技术嘉宾以演示的形式进行，可能包含技术实操教学。
        
    -   **目的：** 为参赛者提供必要的技术知识和工具，降低开发门槛。例如，可能会有一个关于如何使用某个 GitHub 仓库或特定技术框架的指南。
        
-   **项目演示日 (Demo Day):**
    
    -   **核心环节：** 集中展示所有参赛团队的成果。
        
    -   **运营职责：**
        
        -   **时间把控：** 设计每个团队的 Demo 时长和评分方向。
            
        -   **名单确认：** 必须在 Demo Day 前一到两天，反复与各团队确认是否参加，并最终确定当天的出场顺序。
            
        -   **现场协调：** 实时把控路演顺序，与评委同步评分系统和流程。
            
        -   **反馈收集：** 设计并分发“黑客松体验问卷”，收集覆盖整个活动周期的参与者反馈。
            

4\. 参赛者管理 (Participant Management)

-   **信息中心 (Info Hub):**
    
    -   在正式宣发时，就必须搭建好一个统一的信息页面（例如，一个 GitHub Repo），包含报名链接、项目提交指南、活动日程、会议链接和学习资料。
        
-   **定向邀请 (Targeted Invitation):**
    
    -   除了公开报名，还应主动邀请一些优秀开发者，如：
        
        -   在前期共学（如实习计划）中表现突出的学员。
            
        -   坚持打卡且学习笔记质量高的同学。
            
        -   通过这种方式引入“种子选手”，可以提高项目的整体质量。
            
-   **持续跟进 (Continuous Follow-up):**
    
    -   运营同学需要持续确认每个团队的项目是否已按时提交。
        
    -   Demo Day 结束后，要立即确认所有获奖团队成员的钱包地址等信息，以便发放激励。
        

5\. 收尾与复盘 (Wrap-up & Recap)

-   **对外总结 (Public Recap):**
    
    -   发布一篇正式的活动总结，内容应包含关键数据（参与者总数、提交成果数、现场 Demo 数）、完整的获奖名单、所有活动的回放链接、以及联合组织方鸣谢。
        
-   **内部复盘会议 (Internal Review Meeting):**
    
    -   组织全体运营筹备组成员召开复盘会，讨论在活动流程、任务交接、问题处理等方面的经验和教训，为未来的活动迭代积累宝贵的知识财富。
        

\--------------------------------------------------------------------------------

## Section 6：“休闲黑客松”运营团队职能分工

由于本次 Web3 实习计划的参与者众多，为了让更多人有机会深度参与实践，活动设计了一个可容纳约 30 人的大型主办方团队。这种规模的团队需要更精细的职能划分和协作流程，以确保活动的顺利进行。

核心角色与职责

1.  **小族长 (Team Lead / Overall Coordinator) - 统筹负责人**
    
    -   **职责：** 担任整个黑客松的“项目经理”，是总负责人。需要清晰地了解后续每一个职能和每一个活动的进度，主动推动各项任务的完成，并把握整体流程。
        
    -   **工作内容：** 例如，如果 Open Day 定在 1 月 28 日，小族长需要提前跟进 Open Day 负责人，确认嘉宾、PPT、主持人等各项准备工作是否到位，并及时催促进度。其角色类似于传统组织中的“总监”，对最终结果负总责。
        
2.  **协调者 (Coordinator) - 板块负责人**
    
    -   **职责：** 作为小族长与具体执行小组之间的桥梁，负责某一个具体板块或活动的端到端跟进。可以理解为“部门负责人”或“单项活动负责人”。
        
    -   **工作内容：** 负责如 BD (商务拓展)、内容、设计等垂直板块，或 Open Day、Demo Day 等单项活动的全部流程。他们需要及时向小族长同步自己所负责板块的进度，同时在人手不足时扮演“一块砖”的角色，哪里需要就顶上去。
        
3.  **活动策划和运营组 (Event Planning & Ops Team) - 单个活动执行小组**
    
    -   **职责：** 这是具体执行的核心力量。按照 Open Day, Workshop, AMA, Demo Day 等关键节点，分为若干个小分队（每组 3-5 人）。
        
    -   **工作内容：** 每个小组全权负责其对应活动的策划与执行。他们需要明确该活动的目标，设计关键流程，并完成一份通用的 `checklist`（清单）上的所有任务。任务较重、较核心的节点（如 Demo Day）会分配更多的人力。
        
4.  **BD 组 (Business Development Team) - 对外沟通桥梁**
    
    -   **职责：** 负责所有内外部的沟通联络工作。
        
    -   **工作内容：**
        
        -   **嘉宾对接：** 邀请符合活动主题的嘉宾，并全程跟进。这部分 BD 人员需要深度理解活动策划的逻辑，才能找到最合适的嘉宾。
            
        -   **合作方与赞助方对接：** 对接媒体合作方，确保宣传资源到位；对接赞助方，理解其需求（例如，希望看到运用其技术框架的 Demo），并将这些需求同步给策划组和内容组。
            
5.  **内容组 (Content Team) - 文字内容生产与审核**
    
    -   **职责：** 负责所有对外宣传内容的撰写和审核。
        
    -   **工作内容：** 撰写黑客松招募文章、活动结束后的 Recap 文章、各环节的宣发推文等。同时，建立内部审核流程（初审、二审），确保所有对外发布的内容准确无误。
        
6.  **设计组 (Design Team) - 视觉支持**
    
    -   **职责：** 负责整个活动所有视觉物料的设计，如海报。
        
    -   **工作流程：** 接收来自各组（如策划组、BD 组）的需求，明确 `Deadline`（截止日期）和设计要素（如嘉宾信息），然后结合本次黑客松的整体视觉风格进行设计，并最终将成品存档到 Notion 工作库中。
        
7.  **GitHub 技术组 (GitHub Tech Team) - 技术平台维护**
    
    -   **职责：** 负责黑客松官方 GitHub 页面的搭建和维护。
        
    -   **工作内容：** 更新页面内容、处理报名和项目提交的技术逻辑、导出参赛者信息等，为活动的线上化运作提供技术支持。
        
8.  **媒体支持组 (Media Support Team) - 现场与后期支持**
    
    -   **职责：** 确保线上活动顺利进行及后续资料的整理。
        
    -   **工作内容：**
        
        -   **主持人 (Host/MC)：** 负责串场、与嘉宾互动、把控活动流程和调动现场氛围。
            
        -   **剪辑组 (Editing Team)：** 负责活动录播视频的剪辑（去除敏感信息）、上传，并制作可用于二次传播的精华片段或切片。整理好的回放链接需同步给 GitHub 技术组进行存档。
            

协作要点与工作流

在一个 30 人的大型团队中，信息的高效流转至关重要。

-   **主动沟通：** 成员必须主动寻找需要对接的人。例如，需要海报时，应主动找到设计组的负责人提需求；完成海报后，也应主动告知需要使用该海报的人。
    
-   **信息中心化：** 所有工作产出（如海报、文案、策划稿）都必须存放在公共的协作空间（如 Notion）中，并放置在对应的活动页面下。这确保了信息对所有协作者都是透明和可追溯的，避免了信息只存在于个人聊天记录中的孤岛效应。
    

\--------------------------------------------------------------------------------

## 框架 & 心智模型 (Frameworks & Mental Models)

从本次分享中，我们可以提炼出两个核心的、可应用于 Web3 社区建设的思考框架和心智模型。

框架一：“残酷共学”——社区驱动的技能习得飞轮

这个模型旨在解决个人学习中普遍存在的动力缺失、缺乏监督和高流失率的问题。它通过精巧的机制设计，构建了一个自我驱动、持续运转的学习生态系统。

-   **它试图解决什么问题？** 个人在自学过程中常常会感到孤独，容易因遇到困难而放弃。传统的线上课程虽然提供了内容，但缺乏有效的激励和约束机制来保证学习的完成度。“残酷共学”模型直面这一挑战，试图通过社区的力量，将学习从一种个人苦修转变为一场集体运动。
    
-   **视频中是如何构建这个认知结构的？**
    
    1.  **起点：共识驱动的目标 (Consensus-Driven Goal)** 与自上而下分发内容的传统教育不同，该模型的第一步是“社群共选”。参与者共同决定学习一个具体且可量化的目标。这从源头上保证了参与者的内在动机，因为学习内容是他们自己选择的，是他们真正关心的。
        
    2.  **核心引擎：“残酷”的承诺机制 (The "Cruel" Commitment Mechanism)** 模型的核心驱动力来自于其“残酷”的打卡机制。这本质上是一种公开的社会契约。通过设定明确的、带有轻微负面后果（如“本轮学习失败”）的规则，它利用了心理学上的损失厌恶和同伴压力原理。当参与者公开承诺并置身于一个所有人都遵守规则的环境中时，坚持下去的意愿会大大增强。
        
    3.  **执行框架：轻量化与可操作性 (Lightweight & Actionable Framework)** 为了降低参与门槛，整个学习路径被拆解成清晰、可执行的每周/每日任务。组织者提供的是一个“脚手架”（Scaffolding），而不是一个复杂的课程体系。这种轻量化的设计让参与者能轻松上手，并能持续获得完成小任务带来的正反馈。
        
    4.  **加速器：同侪激励与知识共享 (Peer Motivation & Knowledge Sharing)** 当一群人朝着同一个目标前进时，社区本身就成了一个强大的加速器。通过鼓励分享笔记、公开讨论问题，模型创造了一个知识流动的场域。看到他人的进步会激励自己，而帮助他人解决问题则能巩固自身所学，形成一个正向的循环。
        
    5.  **闭环：共创与复盘 (Co-Creation & Review)** 学习周期以一个共同的产出或成果展示作为结束。这不仅是对学习效果的检验，更是一种仪式感的营造，为参与者的努力提供了价值肯定。随后的复盘环节则将本次活动的经验沉淀下来，为下一次“飞轮”的转动提供优化的动力。
        
-   **这个框架如何帮助理解 Web3 的核心问题？** “残酷共学”是 Web3 核心理念——去中心化、社区所有权和无需许可——在教育领域的完美体现。它展示了如何在没有中心化权威（如大学或培训机构）的情况下，构建一个高效、自组织的学习社区。它依赖的不是传统的层级管理，而是基于代码（规则）和共识的社会协议。这个模型证明了，通过设计精良的激励机制和社区规范，一个去中心化的网络能够有效地完成复杂协作，解决现实世界的问题，这对于理解 DAO 的运作模式和 Web3 应用的底层逻辑具有重要的启发意义。
    

框架二：“休闲黑客松”——营造正和游戏的创新孵化器

这个模型旨在改造传统黑客松高压、零和博弈的模式，通过降低门槛和重塑激励机制，创造一个鼓励实验、包容失败、激发底层创新的环境。

-   **它试图解决什么问题？** 传统黑客松虽然能产出成果，但也存在诸多弊病：它对新手不友好，高强度的竞争环境扼杀了许多新奇但尚不成熟的想法，商业化的导向使得参与者更倾向于“做评委想看的项目”而非“做自己想做的项目”。这导致创新被局限在一个狭窄的范围内。“休闲黑客松”试图打破这些束缚，建立一个真正为了创造和乐趣而存在的空间。
    
-   **视频中是如何构建这个认知结构的？**
    
    1.  **基础：心理安全感的构建 (Building Psychological Safety)** 模型的第一步是通过“休闲”和“线上为主”的定位，从根本上降低参与的心理和生理成本。取消通宵、强调周末参与、淡化奖金，这些举措都在向参与者传递一个明确的信号：这是一个安全的、可以自由探索的场域，你不需要为了参与而牺牲健康或承担过高的机会成本。
        
    2.  **重塑激励：从外在奖励到内在动机 (Shifting from Extrinsic Rewards to Intrinsic Motivation)** 通过“去商业化”和“人人获奖”的设计，模型巧妙地将参与者的动机从追求外在的、稀缺的奖励（高额奖金、第一名的荣誉）引导向内在的、丰富的奖励（学习新技术的满足感、创造属于自己作品的成就感、结识志同道合伙伴的喜悦）。定制化的 Badge (徽章) 是一个点睛之笔，它肯定了“过程”而非“结果”，让每一份努力都得到了独一无二的认可。
        
    3.  **核心原则：“正和游戏”的设计 (Designing a Positive-Sum Game)** “没有失败”和“评委是建议者”这两个设定，将黑客松从一个“你赢我输”的零和游戏，转变为一个“所有参与者共同成长”的正和游戏。在这个框架下，参与者之间的关系不再是纯粹的竞争，而是潜在的合作。别人的优秀项目不再是威胁，而是可以学习和借鉴的灵感来源。
        
    4.  **可复制性：轻量化运营模板 (Replicable Lightweight Operation Template)** 整个活动的组织流程被高度模板化和标准化。从宣发、开幕式到 Demo Day，每一个环节都有清晰的指南和 checklist。这使得该模型具备了极强的可复制性，任何社区都可以低成本地发起一场属于自己的“休闲黑客松”，从而让这种创新的模式得以规模化扩散。
        
    5.  **最终目标：社区网络的构建 (The Ultimate Goal of Community Network Building)** 模型明确指出，项目完成不是终点，建立的“链接”才是。它将黑客松定位为一个“短期共创社区”，其最终价值沉淀在人与人之间形成的网络中。这使得活动的影响力得以超越活动本身，成为社区生态持续发展的催化剂。
        
-   **这个框架如何帮助理解 Web3 的核心问题？** “休闲黑客松”是关于如何构建一个健康的、有活力的 Web3 社区生态的实践指南。它展示了如何通过设计“协议”（活动规则），来引导参与者进行正向的、协作性的行为。这与 Web3 中通过智能合约和代币经济学来设计去中心化应用的逻辑如出一辙。该模型强调了“公共物品” (Public Goods) 的重要性——即通过举办这类非营利性的活动来为整个生态系统提供价值。它告诉我们，一个繁荣的 Web3 生态，需要的不仅仅是几个头部的、商业上成功的项目，更需要一个庞大的、充满活力的、允许任何人参与和贡献的草根创新层。
<!-- DAILY_CHECKIN_2026-01-25_END -->

# 2026-01-24
<!-- DAILY_CHECKIN_2026-01-24_START -->


# Web3 公共物品资金分配机制深度解析

-   **Author:** ETHPanda
    
-   **URL:** 视频源自 YouTube 频道 ETHPanda，但原始链接未在源文本中提供。
    

* * *

## 概览 (Overview)

本课程报告深入探讨了 Web3 生态系统中“公共物品”（Public Goods）的核心概念、其面临的资金困境以及现有的多种创新性资金分配机制。报告首先从经济学定义出发，界定了 Web3 世界中的公共物品（如开源代码、开发框架和协议），并强调了它们作为生态系统基础设施的重要性。随后，报告分析了这些公共物品因其非排他性和非竞争性而普遍面临的“公地悲剧”与“搭便车”问题，指出纯粹的市场机制无法为其有效定价。为了解决这一市场失灵，Web3 社区探索了多种资金分配方案。报告详细剖析了三种主流机制：传统的“委员会制”（Committee-Based）、强调社群共识的“二次方募资”（Quadratic Funding, QF），以及奖励已实现价值的“回溯性公共物品募资”（Retroactive Public Goods Funding, RPGF）。报告不仅阐述了这些机制的原理、优缺点和典型应用（如 Gitcoin 和 Optimism），还讨论了它们在实践中遇到的挑战，如女巫攻击和治理攻击。最后，为了让学员切身体会 DAO 治理的复杂性，报告设计了一个名为“良心杀”的分配博弈游戏，模拟在信息不对称和潜在利益冲突的环境下，一个团体如何决策一笔资金的分配，从而将理论知识与实践体验紧密结合。

* * *

## 正文内容解析

### Section 1: Web3 公共物品的定义与重要性

### 什么是公共物品？

在经济学中，公共物品（Public Goods）被定义为具有两个核心特性的物品：

-   **非排他性 (Non-excludability):** 无法有效阻止任何人使用该物品。即使某些人不为其付费，也难以将他们排除在使用范围之外。
    
-   **非竞争性 (Non-rivalry):** 一个人对该物品的使用不会减少或影响其他人对该物品的使用。
    

一个经典的现实世界例子是高速公路（在未设收费站的情况下）。任何人都可以使用它，且一个人的使用通常不会妨碍另一个人。与此相对的是私人物品（Private Goods），例如个人钱包或账户，它们具有明确的所有权，使用权是排他性的。

### Web3 世界中的公共物品

在 Web3 生态系统中，公共物品的概念得到了广泛的应用和体现。它们构成了整个生态发展的基础设施。典型的例子包括：

-   **编程语言与开发框架:** 如 `Solidity` 语言和 `Hardhat` 等开发框架，它们是开发者构建去中心化应用的基础，任何人都可以免费使用。
    
-   **开源代码与协议:** 像 Uniswap 这样的去中心化金融（DeFi）协议，其核心代码是开源的。这种开放性是 Web3 安全和信任的基石。用户和开发者可以自由地审查、使用甚至分叉（fork）这些代码。
    
-   **技术文档与 API:** 开发者文档、API（应用程序编程接口）等资源，为开发者提供了使用和集成各种协议的指南，极大地降低了开发门槛。
    
-   **开发者工具与技术栈:** 各种帮助开发者提高效率的工具和服务，它们共同构成了 Web3 的技术开发底层。
    

### 公共物品对 Web3 的核心价值

Web3 公共物品的重要性不言而喻，它们共同构建了整个生态的底层基础设施，并在多个层面保障了生态的健康发展：

1.  **促进无需许可的创新 (Permissionless Innovation):** 由于核心代码和工具是开源和免费的，任何开发者都可以自由地使用它们进行构建和创新，无需征得任何人的许可。这极大地激发了生态的活力。
    
2.  **保障安全与透明:** 以 Uniswap 为例，如果其智能合约代码不开源，用户将无法验证其安全性，也无法知晓是否存在后门或漏洞。代码开源使得社区可以共同审计和监督，从而建立了用户信任，这是去中心化系统的核心。
    
3.  **加速开发者入门与生态发展:** 完善的文档、易用的开发工具和标准化的协议，使得新开发者能够更快地上手，从而推动整个生态系统的快速扩张和迭代。
    

可以说，没有这些基础性的公共物品，Web3 世界将难以建立起如今的规模和复杂性，其安全、透明和去中心化的特性也将无从谈起。

* * *

### Section 2: 公共物品的资金困境：公地悲剧与市场失灵

尽管 Web3 公共物品至关重要，但它们普遍面临一个严峻的挑战：资金来源问题。这主要源于其内在特性所导致的两种经典经济学困境。

### 公地悲剧 (Tragedy of the Commons) 与搭便车问题 (Free-rider Problem)

-   **核心困境:** 当一个资源是公共且免费的时候，每个人都有动机去使用它，但很少有人有动机去维护和贡献它。开发者使用 `Solidity` 或 `Hardhat` 时，并不需要为这些工具的创造者和维护者付费。他们可以随意使用、复制（fork）和依赖这些开源项目。
    
-   **导致的结果:** 这种现象被称为“搭便车”。如果每个人都可以免费享用成果，那么大家都会倾向于等待“别人”来捐赠或维护。这就引出了一个核心问题：“谁来为这些开源建设者浇水？”（Who will water these plants?）
    

### 高使用量不等于高收入

许多核心的 Web3 公共物品项目，例如 `Hardhat`，在 GitHub 上拥有数千甚至上万的星标（stars）和分叉（forks），这代表了极高的使用量和社区认可度。然而，这种巨大的使用量并不能直接转化为可持续的收入。维护和升级这些项目需要投入大量的时间和资源，但项目本身却缺乏有效的盈利模式。

### 市场的失灵 (Market Failure)

上述困境最终指向一个结论：**纯粹的市场分配规则无法为公共物品进行有效定价**。在传统市场中，价格由供需关系决定，但对于免费使用的公共物品，需求虽然旺盛，却无法通过价格机制转化为对供给方的激励。这是一种典型的市场失灵。

这些公共物品为整个 Web3 生态系统创造了巨大的价值，包括底层安全、协议健壮性和开发者效率的提升，可以说是为生态“添砖加瓦”。然而，价值的创造者却无法从他们创造的价值中获得足够的回报。

为了解决这个问题，并确保生态系统的长期健康发展，社区必须探索新的、非市场的机制来捕获这些外溢的价值，并将其重新分配给公共物品的建设者。这不仅是为了激励现有的贡献者，更是为了吸引更多的人才持续地为生态做出贡献，让有价值的事情能够持续下去。

* * *

### Section 3: 资金分配机制 I：委员会制 (Committee-Based System)

委员会制是一种相对传统和直观的公共物品资金分配方式，其运作模式类似于现实世界中的政府机构。

### 机制原理

-   **核心结构:** 设立一个专门的委员会，由一组被选定或指定的成员组成。这个委员会有权决定一个金库（Treasury）中的资金应如何分配。
    
-   **资金来源:** 金库的资金通常来源于协议收入、基金会拨款或社区捐赠，类似于政府的税收。
    
-   **决策过程:** 委员会成员审查收到的项目提案，并投票决定哪些项目应该获得资助，以及资助的具体金额。例如，他们会决策是否应该拨款支持某个软件的开发，或者资助某项社区基础设施的建设。
    

### 优点

1.  **简单快速:** 决策流程相对简单直接，不涉及复杂的技术或算法。
    
2.  **高效率:** 由于决策权集中在少数人手中，委员会可以迅速对提案做出反应和决策，避免了大规模社区投票可能带来的拖延和低效。
    

### 缺点

1.  **权力高度集中:** 金库的控制权掌握在少数委员会成员手中。这可能导致寻租行为，或者决策过程被少数人的利益所左右。
    
2.  **偏好固化与偏见 (Preference Fossilization and Bias):** 委员会成员的个人背景、专业知识和人际网络会影响他们的决策。这可能导致资金倾向于某些特定领域或与委员会成员关系密切的项目，而忽视了其他有价值但不够知名的领域。他们的个人偏好可能会固化，阻碍创新。
    
3.  **有限的知识范围:** 没有任何一个委员会能够覆盖所有专业领域。当面对一个高度复杂或跨领域的提案时，成员可能因缺乏相关专业知识而无法做出准确的判断。这限制了决策的多样性和质量。
    

委员会制虽然在某些场景下因其高效而适用，但其中心化的本质与 Web3 所倡导的去中心化精神存在内在冲突。因此，社区一直在积极探索更具去中心化和包容性的资金分配模型。

* * *

### Section 4: 资金分配机制 II：二次方募资 (Quadratic Funding, QF)

二次方募资（Quadratic Funding, QF）是一种更民主化、更能反映社区集体偏好的资金分配机制。它通过一个巧妙的数学公式来放大群体共识的力量。

### 核心理念与数学直觉

-   **基本公式:** 一个项目的总配捐金额与其收到的“所有捐赠额的平方根之和的平方”成正比。
    
-   **简单理解:** 其核心思想可以概括为：**“100 个人为同一个项目各投 1 票（或 1 美元）的价值，远大于 1 个人投 100 票（或 100 美元）的价值。”**
    
-   **目标:** 这种机制旨在衡量一个项目的支持广度，而不仅仅是支持深度（即资金量）。它奖励那些能够获得大量小额捐款的项目，认为这更能代表广泛的社区需求和共识。
    

### 典型应用：Gitcoin

`Gitcoin` 是以太坊生态系统中最著名的采用二次方募资机制的平台。自 2022 年以来，Gitcoin 已经通过多轮的 QF 捐赠活动，资助了数以百计乃至上千个公共物品项目，涵盖了从核心协议（如 `Solidity`、`Hardhat`）到各类新兴的初创项目。在一段时间内，Gitcoin 甚至被誉为“以太坊的军火库”（Arsenal of Ethereum），因为它孵化了大量创新且有意义的项目，为生态的繁荣发展提供了关键的早期支持。

### 优点

1.  **调动群体智慧 (Collective Intelligence):** QF 鼓励更多社区成员参与到资金分配过程中。每个人的小额捐赠都能对最终结果产生影响，这激发了大家去关注和评估提案的质量。
    
2.  **放大社区共识:** 配捐资金的多少由贡献者的数量决定，而非资金总量。这有效地放大了社区的集体意愿，使得决策权不再被少数委员会或“鲸鱼”（持有大量代币的大户）所垄断。
    
3.  **降低大户垄断效应:** 在传统的“一币一票”（如 PoS）治理模式下，少数巨鲸可以联合起来主导社区金库的决策，例如 a16z 在 Uniswap 治理中就因持有大量代币而拥有巨大影响力。QF 机制通过其数学设计，显著削弱了单一巨额资金的影响力，让更多普通用户的声音被听到。
    

### 缺点与挑战

-   **女巫攻击 (Sybil Attack):** 这是 QF 机制面临的最主要威胁。攻击者可以创建大量虚假账户（或钱包地址），并用这些账户给自己支持的项目进行小额捐赠，从而骗取大量的配捐资金。由于在区块链上验证一个地址背后是否是真实、独立的个体非常困难，通过 IP 地址等传统方式进行验证也容易被规避。
    
-   **应对措施与新问题:** 为了对抗女巫攻击，`Gitcoin` 推出了 `Gitcoin Passport`。这是一个身份聚合协议，通过连接用户的多个社交账户（如 Twitter, GitHub, Google）和链上活动记录来计算一个“人性”得分，从而为用户设置参与门槛。然而，这种方式也带来了新的问题：它提高了普通用户的参与门槛，使得捐赠流程变得复杂，可能会降低部分用户的参与积极性。
    

尽管面临挑战，二次方募资作为一种开创性的去中心化资金分配探索，仍然在不断演进，并对 Web3 公共物品的生态产生了深远影响。

* * *

### Section 5: 资金分配机制 III：回溯性公共物品募资 (RPGF)

回溯性公共物品募资（Retroactive Public Goods Funding, RPGF）是另一种极具影响力的资金分配哲学和机制，其核心理念是“先创造价值，后获得奖励”。

### 核心理念：为已实现的结果付费

-   **与传统 VC 投资的区别:** 传统的风险投资（VC）模式是“前瞻性”的，即 VC 投资一个项目，是基于对其未来潜力的预期。这种模式常常会给创始人带来压力，比如签订严苛的“对赌协议”（gambling agreements），可能导致产品为了满足短期回报指标而偏离初心。
    
-   **RPGF 的模式:** 与之相反，RPGF 是“回溯性”的。它奖励那些**已经**为生态系统创造了可验证价值和影响力的项目。资金分配的依据不是未来的承诺，而是过去和现在的实际贡献。这种模式可以概括为“为结果付费”（Pay for Results）。
    

### 评估标准

RPGF 的评估标准聚焦于项目的实际影响力，例如：

-   **用户规模:** 该产品或服务了多少用户？
    
-   **公共性:** 它为多大范围的社区带来了好处？
    
-   **生态贡献:** 它是否让更多人因使用它而获利或提高了效率？
    

### 典型应用：Optimism

以太坊的 Layer 2 解决方案 `Optimism` 是 RPGF 机制最主要的倡导者和实践者。

-   **实践规模:** Optimism 已经举办了多轮（截至课程时已进行到第八轮）RPGF，在 2023 年就发放了超过 1 亿美元的资金，用于资助以太坊生态中的各类公共物品项目。
    
-   **受助项目:** 许多知名的项目和团队，包括开源框架、基础设施项目乃至 `ETHPanda`（课程组织方的前身良心道）自身，都曾获得过 Optimism 的 RPGF 资助。
    
-   **运作流程:** Optimism 的 RPGF 通常结合了数据驱动和人为判断。首先，通过一套数学指标或数据模型，初步计算出各个项目基于其影响力应获得的资助额度。然后，再引入一个委员会（或徽章持有者）进行投票，对数据模型的结果进行人为的调整和最终确认，决定最终的资金分配方案。
    

通过这种方式，RPGF 为公共物品的建设者们提供了一条清晰的路径：只要专注于创造有价值的东西并产生积极影响，就有机会在未来获得生态系统的奖励和认可。这极大地激励了高质量、长期主义的建设行为。

* * *

### Section 6: RPGF 的演进与挑战：以 Optimism 为例

Optimism 的回溯性公共物品募资（RPGF）并非一蹴而就，它经历了一个不断迭代和优化的过程，尤其是在早期阶段遇到了显著的挑战。

### 早期阶段的“野蛮生长”（以 RPGF 第三期为例）

在 2023 年左右的早期阶段，Optimism 的 RPGF 轮次呈现出一种“野蛮”或说高度开放的状态，这带来了几个核心问题：

1.  **项目类别混杂，评估标准不一:** 在同一轮申请中，包含了开发者工具、治理工具、社区教育等截然不同类别的项目。这给评审员带来了巨大的困难，因为评判一个开发者工具和一个教育组织的指标完全不同，难以横向比较并公平地分配资金。
    
2.  **缺乏明确的数据指标:** 当时对申请项目没有明确的数据要求。评审员（当时 OP 的评审委员会有 200 多人）在面对 600 多个提案时，很大程度上只能依赖个人的专业背景和主观判断来打分和分配资金，这导致整个过程非常混乱和主观。
    
3.  **评审工作量巨大:** 要求 200 多名评审员去有效评估 600 多个来自不同领域的提案，并决定 3000 万美元的分配，这在实践中几乎是不可能完成的任务。
    
4.  **易受治理攻击:** 这种混乱的局面也为治理攻击创造了机会。一个典型的案例是 `BanklessDAO`，它当时分拆成了 12 个不同的“协会”（guilds）去同时申请 RPGF 资金，最终成功“薅”走了价值数百万美元的 OP 代币。这暴露了当时资助模型在规则设计上的漏洞。
    

### 后续的改进与精细化

吸取了早期的教训，Optimism 对 RPGF 机制进行了重要的转向和改进：

1.  **增加轮次频率，明确范围:** 后续的 RPGF 不再将所有项目放在一个大池子里，而是采用了更频繁、主题更聚焦的方式。例如，一轮专门资助“开发者工具”，下一轮专门资助“治理工具”，再下一轮可能专注于“社区教育”。
    
2.  **引入清晰的评判指标:** 针对不同主题的轮次，设立了更清晰、更具可比性的评判指标。例如，对于开发者工具，可能会考察其在 GitHub 上的星标数（stars）、分叉数（forks）、贡献者数量等一系列可量化的数据。
    
3.  **实现更精细化的资助:** 通过这种方式，资金分配变得更加数据驱动和精细化。明确的规则让申请者和评审者都有了清晰的预期，减少了主观性和混乱，也提高了资金分配的有效性。
    

Optimism RPGF 的演进过程表明，一个成功的去中心化资金分配机制需要不断地从实践中学习和迭代，在开放参与和规则明确性之间找到平衡，以应对复杂的现实挑战和潜在的攻击。

* * *

### Section 7: 实践环节：分配博弈游戏“良心杀”

为了让学员从理论学习走向实践体验，课程设计了一个名为“分配博弈游戏”（Allocation & Game Theory Game）的互动环节，并给它起了一个更形象的名字——“良心杀”，类比于流行的社交游戏“狼人杀”。

### 游戏目标

该游戏的核心目标是让参与者沉浸式地体验去中心化自治组织（DAO）的治理过程，亲身感受在信息不对称和潜在利益冲突的环境下，进行集体决策的复杂性和挑战性。

### 游戏设定

-   **场景:** 约 50 名学员组成一个小组，他们拥有投票权，需要共同决定如何将一笔 **10 万美元** 的资金分配给五个待选的公共物品项目。
    
-   **角色分配:**
    
    -   **好人 (Good Guys):** 占大多数。他们的目标是基于自己的专业知识和理性判断，进行充分的讨论和研究，将资金分配给最合适、最有价值的项目，以实现集体利益最大化。
        
    -   **坏人 / 机制攻击者 (Bad Guys / Mechanism Attackers):** 占少数（例如，在所有游戏组中，约有 30% 的组会设置坏人角色）。每个坏人会被秘密地与其中一个项目绑定。他们的目标是**不择手段地引导舆论，创造虚假共识，最终使自己绑定的项目获得最多的资金**。
        

### 游戏流程

1.  **角色分配:** 助教将通过私信的方式告知学员其角色（好人或坏人）。坏人会知道自己的队友是谁，但好人对场上局势一无所知。
    
2.  **选择提案:** 每个小组从三个预设的提案场景中选择一个作为本轮游戏的背景。
    
3.  **讨论与辩论:** 参与者需要在指定的论坛（良心道论坛）上，围绕所选提案中的五个项目展开讨论。每个人都需要分析项目价值，发表自己的观点，并试图说服他人。
    
4.  **投票决策:** 在讨论期结束后（例如周日），进行最终投票。每个小组需要达成一个具体的资金分配方案，包括确定哪些项目获得资助，以及每个项目获得多少金额（总额不超过 10 万美元）。
    
5.  **复盘与分享:** 游戏结束后，将举办分享会，公布每个小组的投票结果，并揭示坏人的身份。通过复盘，分析游戏过程中的策略、博弈和决策逻辑。
    

### 关键规则

-   **身份隐藏:** 坏人必须隐藏自己的身份和真实意图。
    
-   **理性讨论:** 鼓励所有参与者基于项目本身的价值和提案背景进行理性的分析和辩论。
    
-   **共识决策:** 最终的分配方案需要通过小组投票达成共识。
    
-   **助教中立:** 助教负责引导流程，但**不参与**任何决策，他们扮演的是上帝视角的观察者。
    

### 三个预设提案场景

1.  **Devcon 社区活动资助:** 假设要在以太坊年度峰会 Devcon 上举办社区活动，有五个活动提案待选（新人欢迎会、Buidl 工作坊、职业发展研讨会、治理模拟游戏、项目展示日），需要决定如何分配 10 万美元预算。
    
2.  **Web3 教育项目资助:** 筛选了五个真实存在的、支持 Web3 教育的生态项目（如 ETHPanda、Ethereum Singapore 等）。参与者需要**自行对这些项目进行调研**，然后决定资金分配。
    
3.  **DAO 治理工具资助:** 选择了五个在 DAO 中广泛使用的治理工具（如 Snapshot、Aragon、Tally 等）。参与者同样需要**自行调研**这些工具的功能和发展情况，并决定如何资助它们以促进其进一步发展。
    

这个游戏的设计迫使参与者思考，当面对不确定的信息和潜在的恶意行为者时，如何进行有效的尽职调查、如何构建信任、如何识别并对抗操纵，最终做出对集体最有利的决策。这正是真实 DAO 治理的核心挑战。

* * *

## 框架 & 心智模型 (Frameworks & Mental Models)

### 心智模型一：公共物品作为 Web3 的无价基石 (Public Goods as the Unpriced Foundation of Web3)

该心智模型旨在解决一个根本性问题：**我们为什么要去资助那些看起来“免费”且不直接产生收入的开源软件、开发工具或研究文档？**

视频通过以下步骤构建了这个认知框架：

1.  **从基础定义出发，建立共同语言:** 课程首先引入了经济学中对公共物品的经典定义——非排他性（Non-excludability）和非竞争性（Non-rivalry）。这为理解其后续行为模式奠定了理论基础。它告诉我们，这类物品的“免费”特性并非一种商业选择，而是一种内在属性。
    
2.  **将抽象概念与 Web3 实践具体连接:** 随后，课程立即将这个抽象定义与 Web3 从业者日常接触的具体事物联系起来，如 `Solidity` 语言、`Hardhat` 框架、开源的 DeFi 协议等。这使得“公共物品”不再是一个遥远的经济学名词，而是构成 Web3 世界的砖块和水泥。
    
3.  **运用反事实思考（Counterfactual Thinking）来凸显价值:** 课程提出了一个极具启发性的思想实验：“想象一下，如果 Uniswap 的代码不开源会怎样？” 这个问题迫使听众去思考开源带来的隐性但巨大的价值：
    
    -   **安全性:** 如果代码不开源，用户将无法信任协议，担心其中存在后门或漏洞。
        
    -   **可组合性 (Composability):** 其他项目将无法在其基础上进行集成和构建，整个 DeFi 乐高将不复存在。
        
    -   **无需许可的创新 (Permissionless Innovation):** 开发者无法自由地学习、分叉和改进它，生态系统的演进速度将大大减慢。 这个反事实的思考过程，清晰地揭示了公共物品的价值不在于其直接标价，而在于它们为整个生态系统提供的正外部性（Positive Externalities）——即信任、安全和创新能力。
        
4.  **将视角从“成本”转变为“基础设施投资”:** 最终，这个心智模型将我们对公共物品的认知从“免费的东西”提升到了“关键基础设施”的高度。就像现实世界中的清洁空气、国防和法律体系一样，它们是社会和经济活动能够顺畅运行的先决条件。因此，为其提供资金不再是一种“捐赠”或“慈善”，而是一种对生态系统自身可持续发展的、理性的、必要的投资。
    

这个框架帮助我们理解，忽视对公共物品的投入，就如同忽视了对地基的维护，最终将危及整个 Web3 大厦的稳定与未来。

* * *

### 心智模型二：去中心化资金分配机制的光谱 (The Spectrum of Decentralized Funding Mechanisms)

该心智模型旨在回答一个核心的治理问题：**一个去中心化的社区，如何在没有中央权威的情况下，公平且有效地分配其共享资源？**

视频并非给出一个单一的“最佳答案”，而是通过展示一个机制演进的光谱，揭示了这是一个充满权衡（Trade-offs）的设计空间。

1.  **起点：中心化的类比与缺陷 (委员会制):**
    
    -   课程从最容易理解的“委员会制”开始。这为整个讨论提供了一个基准。它类似于传统世界的董事会或政府拨款委员会。
        
    -   **优点:** 效率高、决策快。
        
    -   **核心缺陷:** 中心化、易产生偏见、知识范围有限。这暴露了将传统中心化模型直接照搬到去中心化世界的局限性。
        
2.  **第一步演进：从精英决策到群体偏好 (二次方募资 - QF):**
    
    -   QF 的出现是对委员会制中心化缺陷的直接回应。其核心转变是将决策的权重从“少数精英的深度意见”转移到“多数成员的广度支持”。
        
    -   **解决的问题:** 削弱了“鲸鱼”（大资本方）对决策的垄断，让更多普通用户的声音能被听到。
        
    -   **引入的新问题:** “女巫攻击”（Sybil Attack），即身份的脆弱性。这表明，去中心化身份验证是实现真正民主化治理的关键瓶颈。
        
3.  **第二步演进：从资助承诺到奖励影响 (回溯性募资 - RPGF):**
    
    -   RPGF 提出了一个全新的视角，它不再试图预测未来，而是奖励过去。这是一种从“资助潜在价值”到“购买已实现价值”的根本转变。
        
    -   **解决的问题:** 降低了资助风险。与其投资于一个仅仅有好点子的项目，不如奖励一个已经证明其产品对生态系统有积极影响的项目。它创造了一个“影响力市场”（A market for impact）。
        
    -   **面临的挑战:** 如何客观、公平地衡量“影响力”？这引出了对数据、指标和评审机制的持续迭代和优化（如 Optimism 的实践所示）。
        
4.  **未来的探索：从人力决策到人机协作 (Deep Funding - AI):**
    
    -   课程最后提及了利用 AI 模型的“Deep Funding”，这预示了光谱的下一个演进方向。
        
    -   **解决的问题:** 人类认知能力的局限性。当面对成百上千个复杂提案时，任何个人或委员会都难以进行全面、无偏见的评估。
        
    -   **解决方案:** 将 AI 作为一种辅助决策工具，用于处理和分析海量数据，提出初步的分配方案，而人类评审团则专注于最终的价值判断和监督。
        

这个光谱模型帮助我们理解，Web3 的资金分配机制探索是一个在**效率、去中心化程度、抗攻击性**和**可扩展性**之间不断寻找最佳平衡点的动态过程。不存在一劳永逸的完美方案，只有不断适应和进化的解决方案。

* * *

### 心智模型三：治理即对抗博弈 (Governance as an Adversarial Game)

这个心智模型揭示了一个残酷但重要的事实：**去中心化治理不仅是一个技术或经济问题，更是一个复杂的社会和心理博弈过程。**

课程通过“良心杀”游戏，将这个抽象模型具象化，让参与者亲身体验。

1.  **打破“理想主义”假设:** 许多人对 DAO 的初步认知是理想化的，认为所有参与者都会为了集体利益而真诚协作。此模型和游戏则强制参与者直面现实：系统中必然存在自利、信息不透明甚至恶意的行为者。
    
2.  **构建博弈论的核心要素:** “良心杀”游戏的设计精巧地再现了治理博弈的关键要素：
    
    -   **信息不对称 (Information Asymmetry):** “坏人”知道彼此的身份，可以暗中协调；而“好人”则处于信息劣势，互相猜疑。这解释了为何小规模的、有组织的攻击者往往能战胜大规模的、无组织的善意参与者。
        
    -   **协调困境 (Coordination Failure):** 对于“好人”来说，达成共识并采取一致行动的成本极高。而“坏人”由于目标单一（让自己绑定的项目获胜），协调成本则低得多。
        
    -   **搭便车与治理冷漠 (Free-riding and Governance Apathy):** 课程中提到“平均分配”资金的策略，这看似公平，实则是一种“治理冷漠”。它回避了深入调研和激烈辩论的辛苦工作。这种行为在博弈中并非中立，它实际上为“坏人”的浑水摸鱼提供了便利，因为它放弃了甄别优劣的机会。
        
3.  **从“规则设计”到“机制设计”的思维转变:** 这个模型告诉我们，一个稳健的治理系统，其设计目标不应是“假设人人都是好人”，而应是“**即使存在坏人，系统也能抵抗攻击并正常运行**”。这要求设计者像安全工程师一样思考，预设最坏情况，考虑各种潜在的攻击向量（如共谋、贿赂、舆论操纵），并从机制层面（规则、激励、惩罚）去构建防御。
    
4.  **软技能的重要性:** 课程中的讨论也点出了一个关键点：在 DAO 治理中，说服能力、演讲技巧、销售能力等“软技能”至关重要。一个论据充分、表达清晰的“好人”可以团结多数，一个善于蛊惑人心的“坏人”则可能误导集体。治理的最终结果，往往是逻辑、数据和叙事能力综合博弈的产物。
    

通过这个对抗博弈的心智模型，参与者能够更深刻地理解，设计和参与去中心化治理需要一种审慎、理性和时刻保持警惕的“玩家”心态，而非仅仅是乌托邦式的“社区成员”心态。
<!-- DAILY_CHECKIN_2026-01-24_END -->

# 2026-01-23
<!-- DAILY_CHECKIN_2026-01-23_START -->



# Web3 实习计划（冬季）：Uniswap 工作原理解析

-   **Title**: Uniswap 工作原理解析
    
-   **Author**: JF 老师 / ETHPanda
    
-   **URL**: \[源视频链接未提供\]
    

\--------------------------------------------------------------------------------

## 概览 (Overview)

本课程报告深入解析了去中心化交易所（DEX）巨头 Uniswap 的核心工作原理，旨在为对 DeFi 领域感兴趣的开发者和学习者提供一份详尽、可反复学习的技术讲义。报告以 Uniswap V2 为起点，系统性地阐述了恒定乘积做市商（CPMM）模型的基础，即 `x * y = k` 公式的数学原理与实际应用。通过具体的交易和套利案例，报告详细拆解了价格发现、流动性深度、价格影响（Price Impact）与滑点（Slippage）之间的区别，并对流动性提供者（LP）面临的关键挑战——无常损失（Impermanent Loss）——进行了深入的量化分析。随后，报告介绍了 V2 中精巧的链上预言机设计，即时间加权平均价格（TWAP）机制。课程的核心内容聚焦于 Uniswap V3 的革命性创新——集中流动性（Concentrated Liquidity）。报告清晰地阐述了 V3 如何解决 V2 资本效率低下的问题，并深入探讨了其背后复杂的数学模型（`L` 与 `√P`）、价格离散化机制（Ticks），以及为实现高效计算而设计的精巧数据结构与费用分配算法。最终，报告旨在帮助读者构建一个从 V2 的简单被动模型到 V3 的高效主动模型的完整认知框架，理解 Uniswap 协议演进背后的设计哲学与技术权衡。

\--------------------------------------------------------------------------------

## 主题拆解

### Section 1：Uniswap V2 核心机制：恒定乘积做市商 (00:00:00)

Uniswap V2 是理解自动化做市商（Automated Market Maker, AMM）的基石。其核心机制被称为**恒定乘积做市商 (Constant Product Market Maker, CPMM)**。这个模型摒弃了传统金融中的订单簿模式，转而使用一个简单的数学公式来确定资产价格和促成交易。

**1.1 核心公式：x \* y = k**

所有基于 CPMM 的交易都围绕着 `x * y = k` 这个公式展开。

-   **x**: 池中资产 A 的数量。
    
-   **y**: 池中资产 B 的数量。
    
-   **k**: 一个恒定的乘积（Constant Product）。在不考虑增加或移除流动性的情况下，`k` 值在交易过程中保持不变。
    

这条公式在坐标系中绘制出来是一条双曲线。池子里的任何交易都相当于在这条曲线上移动。

**1.2 价格发现机制**

在 Uniswap V2 中，资产的瞬时价格（Price, P）并非外部输入，而是由池中两种资产的比例决定的。

-   **价格公式**: `P = y / x`
    

这意味着，资产 y 相对于资产 x 的价格，就是 y 的储备量除以 x 的储备量。

**【案例演算 1：计算 k 值与初始价格】**

假设一个流动性池中包含以太坊（ETH）和 USDC 两种资产：

-   **x (ETH)** = 2 个
    
-   **y (USDC)** = 6000 个
    

根据上述公式，我们可以计算出：

-   **k 值**: `k = x * y = 2 * 6000 = 12000`
    
-   **初始价格 (P)**: `P = y / x = 6000 / 2 = 3000 USDC/ETH`
    

此时，ETH 的价格是 3000 USDC。

**1.3 套利与价格调整**

AMM 的价格依赖外部套利者（Arbitrageurs）来与市场保持一致。当 AMM 池内价格与其他交易所（如 Binance）出现价差时，套利机会便产生。

**【案例演算 2：套利场景分析】**

延续上例，池内 ETH 价格为 3000 USDC。假设此时 Binance 上的 ETH 价格上涨到了 3200 USDC。套利者会执行以下操作：在 Uniswap 池中以低于 3200 的价格买入 ETH，然后在 Binance 上以 3200 的价格卖出，赚取差价。

这个套利行为会改变 Uniswap 池内的资产储备，从而使其价格向 3200 靠拢。我们需要计算的是，要将池内价格推高到 3200，需要进行怎样的交易。

-   **目标**:
    
    1.  交易后的新价格 `P' = y' / x' = 3200`
        
    2.  交易后依然满足恒定乘积 `x' * y' = k = 12000`
        
-   **求解步骤**:
    
    1.  我们有两个方程和两个未知数 (`x'`, `y'`)。
        
    2.  从 `y' / x' = 3200` 可得 `y' = 3200 * x'`。
        
    3.  将 `y'` 代入 `x' * y' = 12000`，得到 `x' * (3200 * x') = 12000`，即 `3200 * (x')^2 = 12000`。
        
    4.  解得 `(x')^2 = 12000 / 3200 = 3.75`，因此 `x' ≈ 1.9365`。
        
    5.  再计算 `y' = 12000 / 1.9365 ≈ 6196.77`。
        
-   **结果分析**:
    
    -   **交易前**: `x = 2` ETH, `y = 6000` USDC
        
    -   **交易后**: `x' = 1.9365` ETH, `y' = 6196.77` USDC
        
    -   **交易过程**: 套利者向池中放入了 `delta_y = y' - y = 6196.77 - 6000 = 196.77` USDC，并从中取走了 `delta_x = x - x' = 2 - 1.9365 = 0.0635` ETH。
        

套利者用 196.77 USDC 换到了 0.0635 ETH，其平均成交价为 `196.77 / 0.0635 ≈ 3098` USDC/ETH。这个价格介于初始价格 3000 和目标价格 3200 之间。套利者随后可以将这 0.0635 ETH 在 Binance 以 3200 的价格卖出，完成套利。

**1.4 通用交易公式与手续费**

对于任意一笔交易，即用 `delta_x` 数量的资产 X 换取 `delta_y` 数量的资产 Y，其关系必须满足： `(x + delta_x) * (y - delta_y) = k`

通过展开和简化（消去 `x*y = k`），可以推导出 `delta_x` 和 `delta_y` 的通用计算公式。

**手续费机制**: 实际交易中，交易者需要向流动性提供者（LP）支付手续费。在 Uniswap V2 中，这笔费用（通常为 0.3%）是在交易输入端扣除的。公式会进行如下修正：

`(x + delta_x * (1 - fee)) * (y - delta_y) = k`

这意味着，用户提供的 `delta_x` 并非全部用于兑换 `delta_y`，其中一小部分（`delta_x * fee`）会作为手续费留在池中，实质上增加了 `k` 值，从而奖励了 LP。

**1.5 闪电兑换 (Flash Swaps)**

Uniswap V2 的 `swap` 函数实现了一个独特的机制，这构成了闪电兑换（或闪电贷）的基础。其执行顺序如下：

1.  **乐观转出**: 合约首先将用户请求的输出代币（`delta_y`）发送给调用者。
    
2.  **回调函数**: 然后，合约会调用用户指定的一个回调函数（callback function）。
    
3.  **用户操作**: 在回调函数中，用户可以利用刚刚收到的代币进行任意操作（例如，在其他协议中进行清算或套利）。
    
4.  **偿还输入**: 在回调函数执行结束前，用户必须将应付的输入代币（`delta_x`）转回给 Uniswap 池。
    
5.  **最终检查**: 回调结束后，Uniswap 合约会检查池中资产，验证 `x * y >= k` 的不变量是否仍然成立。如果不成立，整笔交易将回滚（revert）。
    

这个“先付后款”的模式极为强大，因为它允许用户在**不持有任何初始资本**的情况下，在一笔原子交易（atomic transaction）内完成复杂的套利和清算操作，极大地提高了资本利用效率。

\--------------------------------------------------------------------------------

### Section 2：Uniswap V2 深度解析：流动性、价格影响与无常损失 (XX:XX:XX)

**2.1 流动性深度与价格曲线**

流动性提供者（LP）通过向池中同时存入两种资产来提供流动性。此举会影响 `k` 值。

-   **增加流动性**: LP 必须按当前池内资产的比例存入两种资产，这会使得 `k` 值变大，价格曲线向外平移。此操作**不应改变当前价格**。
    
-   **移除流动性**: LP 按比例取走两种资产，`k` 值变小，价格曲线向内收缩，同样**不改变当前价格**。
    

`k` 值的大小直接代表了**流动性深度 (Pool Depth)**。在可视化的图表上，不同的 `k` 值对应着一系列平行的双曲线。从原点画出的一条直线（代表一个固定的价格）会与这些曲线相交，所有交点的斜率相同，意味着价格相同。

流动性深度的影响：

-   **深池 (k 值大)**: 推动价格变动相同的幅度需要更大规模的交易。对于交易者来说，可以兑换更多的代币，价格也更稳定。
    
-   **浅池 (k 值小)**: 即使是小额交易也可能导致剧烈的价格变动。
    

**2.2 价格影响 (Price Impact) vs. 滑点 (Slippage)**

这两个概念经常被混淆，但它们有本质区别。

-   **价格影响 (Price Impact)**:
    
    -   这是一个**可预测、确定性**的结果。
        
    -   它源于 `x * y = k` 曲线的内在特性。任何交易都会消耗池中一种资产的储备，增加另一种，从而沿着曲线移动到一个新的价格点。
        
    -   交易规模越大，相对于池子深度而言，价格移动的幅度就越大，平均成交价就越差。这部分价差就是价格影响。**池子越深，价格影响越小**。
        
-   **滑点 (Slippage)**:
    
    -   这是一个**不可预测、非确定性**的风险。
        
    -   它发生在用户提交交易到交易被矿工打包上链之间的这段时间里。
        
    -   原因可能包括：MEV 攻击（如三明治攻击）或有其他人的交易在你之前成交，改变了池子的状态。
        
    -   例如，你预期以 3100 的价格成交，但由于有人抢跑，你最终的成交价变成了 3110。这 10 美元的价差就是滑点。
        

为了控制滑点风险，所有 DEX 都允许用户设置一个**最大滑点容忍度 (Max Slippage Tolerance)**。如果最终成交价超出了这个容忍范围，交易就会失败回滚。

**2.3 无常损失 (Impermanent Loss, IL)**

这是流动性提供者（LP）面临的一个核心风险，也是 AMM 设计中一个难以规避的特性。

**【案例演算 3：无常损失的计算】**

我们再次使用 ETH 价格从 3000 USDC 变为 3200 USDC 的例子，但这次从 LP 的视角来分析。

-   **初始状态 (作为 LP)**:
    
    -   向池中存入 2 ETH 和 6000 USDC。
        
    -   初始总价值 = `(2 * 3000) + 6000 = 12000` USDC。
        
-   **价格变化后 (作为 LP)**:
    
    -   经过套利交易，池内资产变为 `1.9365` ETH 和 `6196.77` USDC。
        
    -   此时总价值 = `(1.9365 * 3200) + 6196.77 ≈ 12393.57` USDC。
        
    -   LP 看起来赚了 `12393.57 - 12000 = 393.57` USDC（未计算手续费收入）。
        
-   **对比：如果不做 LP，只是持有资产 (HODL)**:
    
    -   初始持有 2 ETH 和 6000 USDC。
        
    -   价格变化后，资产价值为 = `(2 * 3200) + 6000 = 6400 + 6000 = 12400` USDC。
        
-   **无常损失计算**:
    
    -   `IL = HODL 价值 - LP 价值 = 12400 - 12393.57 = 6.43` USDC。
        
    -   这意味着，尽管 LP 的资产以美元计价是增值的，但相对于简单持有原始资产，他反而“少赚了”。这种机会成本的损失就是无常损失。
        

**核心特性**:

-   **“无常”的来源**: 如果未来市场价格从 3200 回归到 3000，LP 池中的资产比例也会回到最初的 2 ETH 和 6000 USDC，此时 IL 消失。
    
-   **根本原因**: LP 实际上是被动地在价格上涨时卖出表现好的资产（ETH），在价格下跌时买入表现差的资产，这是一种逆向选择的结果。
    
-   **补偿**: AMM 通过手续费收入来补偿 LP 所承担的无常损失风险。
    

**无常损失公式**: 一个常用的计算 IL 的公式如下，其中 `price_ratio` 是价格变化的比例（例如，从 3000 到 3200，`price_ratio = 3200/3000`）。 `IL = (2 * sqrt(price_ratio) / (1 + price_ratio)) - 1`

\--------------------------------------------------------------------------------

### Section 3：Uniswap V2 的预言机功能：时间加权平均价格 (TWAP) (XX:XX:XX)

除了交易功能，Uniswap V2 还提供了一个强大的、抗操纵的链上价格预言机（On-chain Oracle）。它采用的是**时间加权平均价格 (Time-Weighted Average Price, TWAP)** 机制。

**3.1 机制原理**

直接使用 AMM 的瞬时价格 (`y/x`) 作为预言机是极不安全的，因为它容易在单笔交易中被闪电贷等方式操纵。TWAP 巧妙地解决了这个问题。

-   **累积价格存储**: Uniswap V2 合约并不直接记录价格，而是维护一个**累积价格 (Cumulative Price)** 变量。
    
-   **计算方式**: 每当池中发生交易时，合约会用**交易前的价格**乘以**自上次价格更新以来经过的时间**，并将这个乘积（代表一个“价格-时间”面积）累加到累积价格变量上。
    

`CumulativePrice_t = CumulativePrice_{t-1} + Price_{t-1} * (t - (t-1))`

**3.2 如何使用 TWAP**

要计算某个时间段 `[T0, T1]` 内的时间加权平均价格，需要进行两次读取：

1.  在时间点 `T0`，读取当时的累积价格值 `V0`。
    
2.  在时间点 `T1`，再次读取累积价格值 `V1`。
    

**TWAP 计算公式**: `TWAP_[T0, T1] = (V1 - V0) / (T1 - T0)`

这个结果 `(V1 - V0)` 代表了从 `T0` 到 `T1` 这段时间内价格曲线下方的总面积，再除以时间差 `(T1 - T0)`，就得到了这段时间的平均价格。

**3.3 优点与局限**

-   **优点**:
    
    -   **抗操纵性强**: 操纵 TWAP 需要在很长一段时间内持续影响价格，这使得攻击成本非常高昂。
        
    -   **Gas 高效**: 合约只需在每次交易时更新一个存储变量，计算逻辑简单。
        
-   **局限**:
    
    -   需要两次链上读取操作，不能在单笔交易中即时获取最新的平均价格。
        

\--------------------------------------------------------------------------------

### Section 4：Uniswap V3 的革命：集中流动性 (Concentrated Liquidity) (XX:XX:XX)

Uniswap V3 是对 V2 模型的一次彻底革新，其核心是**集中流动性 (Concentrated Liquidity)**，旨在解决 V2 资本效率低下的问题。

**4.1 V2 的资本效率问题**

在 V2 的 `x * y = k` 模型中，流动性被均匀地分布在从 0 到无穷大的整个价格曲线上。这意味着 LP 提供了资本去支持极端且几乎不可能发生的价格区间（例如，ETH 价格为 3 美元或 300 万美元）。大部分资本处于闲置状态，无法赚取手续费，导致资本效率极低。

**4.2 V3 的核心思想**

V3 允许流动性提供者（LP）将他们的资本**集中在特定的价格区间** `[Pa, Pb]` **内**。

-   **主动管理**: LP 可以根据自己对市场价格的预期，选择一个他们认为最有可能发生交易的窄幅区间来提供流动性。
    
-   **提高资本效率**: 在这个选定的区间内，LP 的资本可以实现比 V2 高出数百甚至数千倍的效率。同样数量的资本，在更窄的区间内可以提供更深的流动性。
    
-   **对交易者的好处**: 更深的流动性意味着更低的价格影响，交易者可以获得更好的成交价格。
    
-   **对 LP 的好处**: LP 的资本更集中于活跃交易区域，能够捕获更多的手续费。
    

**4.3 可视化理解**

我们可以从另一个视角来理解流动性：一个以价格为横轴、流动性深度为纵轴的图表。

-   **V2 的流动性**: 是一条从 0 到无穷远的水平直线，表示在任何价格点，流动性深度都是恒定的。
    
-   **V3 的流动性**: 是由多个不同 LP 提供的、在不同价格区间上的“矩形”流动性叠加而成。这会形成一个阶梯状的、不均匀的流动性分布图。在某些热门价格区间，流动性会非常深厚。
    

当交易发生，价格在这些区间内移动时，它实际上是在与由不同 LP 聚合起来的、深度不断变化的流动性进行交互。

\--------------------------------------------------------------------------------

### Section 5：Uniswap V3 的数学魔法：L 与 √P (XX:XX:XX)

为了实现集中流动性，V3 必须抛弃 V2 中简单的 `x*y=k` 状态变量，引入一套全新的数学框架。因为在 V3 中，当价格跨越不同 LP 设置的区间边界时，有效的流动性（相当于 `k` 值）是会发生变化的。

**5.1 新的状态变量**

V3 合约不再直接追踪池中的资产数量 `x` 和 `y`，而是追踪两个新的“虚拟”值：

-   **流动性 (Liquidity, L)**: `L = sqrt(k)`
    
-   **价格的平方根 (sqrt\_price, √P)**: `√P = sqrt(P) = sqrt(y/x)`
    

`L` 代表了在一个特定价格区间内的流动性总量。只要价格在该区间内变动，`L` 保持不变。

**5.2 新的交易计算公式**

基于 `L` 和 `√P`，交易量的计算变得异常简洁，并且不再直接依赖 `x` 和 `y`。

-   **计算** `delta_y`: `delta_y = L * delta(√P)`
    
-   **计算** `delta_x`: `delta_x = L * delta(1/√P)`
    

这里的 `delta` 指的是价格变动前后的差值。这些公式优雅地将流动性 `L` 和价格 `√P` 的变化分离开来，使得在流动性恒定的区间内计算交易量变得非常高效。

**【公式证明示例：验证** `delta_y` **公式】**

1.  从 `delta_y = L * delta(√P)` 出发，可得 `L = delta_y / delta(√P)`。
    
2.  `delta_y = y1 - y0`，`delta(√P) = √P1 - √P0`。
    
3.  所以 `L = (y1 - y0) / (√P1 - √P0)`。
    
4.  将 `√P` 用 `sqrt(y/x)` 替换，`L = (y1 - y0) / (sqrt(y1/x1) - sqrt(y0/x0))`。
    
5.  同时，我们知道 `L = sqrt(k) = sqrt(x*y)`。由于在区间内 `L` 恒定，所以 `sqrt(x1*y1) = sqrt(x0*y0) = L`。
    
6.  将 `L` 的不同表达式代入方程 `L * (√P1 - √P0) = y1 - y0` 中。
    
7.  `sqrt(x1*y1) * sqrt(y1/x1) - sqrt(x0*y0) * sqrt(y0/x0) = y1 - y0`
    
8.  `sqrt(y1^2) - sqrt(y0^2) = y1 - y0`
    
9.  `y1 - y0 = y1 - y0`。证明成立。
    

这个数学上的转换是 V3 实现其复杂功能的核心，它允许合约在不直接操作 `x` 和 `y` 的情况下，精确计算出跨越不同流动性区间的交易结果。

\--------------------------------------------------------------------------------

### Section 6：Uniswap V3 的实现细节：Ticks、Tick Spacing 与费用计算 (XX:XX:XX)

**6.1 Ticks：价格的离散化**

如果允许 LP 在任意价格点设置流动性区间，那么价格轴上将会有无数个边界点，这在计算上是不可行的（会消耗无尽的 Gas）。V3 通过**刻度 (Ticks)** 的概念来解决这个问题。

-   **Tick 定义**: Tick 是对价格空间的离散化划分。LP 只能在这些预设的 Tick 点上添加或移除流动性。
    
-   **Tick 公式**: Tick `i` 对应的价格 `p(i)` 由以下公式定义： `p(i) = 1.0001^i` 这意味着相邻两个 Tick 之间的价格差为 0.01% (1 a basis point)。
    

通过这种方式，连续的价格曲线被转换成了一系列离散的、可管理的价格点。

**6.2 Tick Spacing：控制粒度**

为了进一步优化并适应不同类型的资产，V3 引入了**Tick 间距 (Tick Spacing)**。并非每个 Tick 都可用，LP 只能在 `tickSpacing` 倍数的 Tick 上设置边界。

-   **与手续费挂钩**: V3 提供了几个固定的手续费等级（例如 0.01%, 0.05%, 0.3%, 1%）。每个费率等级对应一个不同的 `tickSpacing`。
    
    -   **稳定币对 (如 USDC/USDT)**: 波动小，适合低费率和最小的 `tickSpacing` (如 1 或 10)，允许非常精细的流动性配置。
        
    -   **主流币对 (如 ETH/USDC)**: 波动适中，使用中等费率和 `tickSpacing` (如 60)。
        
    -   **山寨币/长尾资产**: 波动大，需要高费率来补偿无常损失，同时使用最大的 `tickSpacing` (如 200)，流动性配置粒度较粗。
        

**6.3 数据结构：Tick Bitmap**

在进行交易时，合约需要快速找到下一个有流动性变化的 Tick。遍历所有 Tick 会非常耗费 Gas。为此，V3 使用了一个名为 **Tick Bitmap** 的高效数据结构。

-   **工作原理**: Bitmap 是一个由 0 和 1 组成的序列。每个比特位（bit）对应一个 Tick。如果某个比特位为 `1`，表示对应的 Tick 是一个流动性区间的边界；如果为 `0`，则表示该 Tick 未被使用。
    
-   **优势**: 通过位运算，合约可以极快地在巨大的 Tick 空间中定位到下一个活跃的 Tick，极大地降低了交易的 Gas 成本。
    

**6.4 复杂的费用计算**

在 V3 中，由于流动性是分段的，费用分配也变得异常复杂。当一笔交易发生时，产生的手续费需要根据各自的贡献比例，精确地分配给所有在该交易价格范围内提供了流动性的 LP。

V3 使用了一个精巧的全局和局部累加器系统来解决这个问题：

1.  **全局费用累加器 (**`feeGrowthGlobal`**)**: 池子合约维护一个全局变量，记录自池子创建以来，每单位流动性累计赚取的总手续费。
    
2.  **外部费用累加器 (**`feeGrowthOutside`**)**: 每个被激活的 Tick 会记录两个值，分别代表在它“外部”（即价格更高或更低的一侧）累计的每单位流动性手续费。
    
3.  **计算区间费用**: 当一个 LP 需要计算自己仓位的应计费用时，合约会读取其仓位上下边界 Tick 的 `feeGrowthOutside` 值和全局的 `feeGrowthGlobal` 值。通过一套根据当前价格相对于仓位区间的不同情况而变化的公式，可以精确计算出该特定区间内累计的每单位流动性手续费。
    
4.  **最终分配**: 将区间手续费乘以该 LP 在此区间内提供的流动性数量（`L`），即可得出其应得的总手续费。
    

这个机制虽然理解起来非常复杂和绕口，但它使得 V3 能够在链上以相对高效的方式完成精确到每个 LP 仓位的费用分配。

\--------------------------------------------------------------------------------

### Section 7：Uniswap 生态系统资源与开发者机遇 (XX:XX:XX)

Uniswap 基金会及生态系统为开发者和初创项目提供了丰富的支持资源，旨在鼓励基于其协议的创新。

-   **Uniswap V4 Fellowship**: 这是一个为期数周的线上孵化器项目，旨在教授开发者如何在即将到来的 V4 版本上构建应用（Hooks），项目免费并包含有奖金的黑客松环节。
    
-   **审计补贴 (Audit Subsidies)**: 基金会为基于 Uniswap 生态的项目提供智能合约审计费用补贴，最高可达全额免费，极大地降低了新项目的安全成本。
    
-   **黑客松 (Hackathons)**: Uniswap 是 ETHGlobal 等全球主流黑客松的主要赞助商，并为使用其协议的优秀项目提供丰厚的奖金。`HackMoney` 是一个专注于 DeFi 领域的专项黑客松。
    
-   **UniHack**: 一个持续开放的申请项目，任何在黑客松中构建的、基于 Uniswap 的项目都可以申请额外奖励，最高可达 7500 美元。
    
-   **追溯性资助 (Retroactive Grants)**: 对已经为 Uniswap 生态做出贡献的项目或个人进行奖励。
    
-   **开放式资助计划 (Open Grant Program)**: 开发者可以为自己的创新想法直接向基金会申请资金和技术支持。
    
-   **TL;DR - DeFi Research**: 与哥伦比亚大学等学术机构合办的研究项目，关注最前沿的 DeFi 理论和论文。
    
-   **DeFi Education Fund**: 由 Uniswap 赞助的非营利组织，专注于在美国等地区进行政策宣传和立法者教育，为 DeFi 的合规发展创造有利环境。
    

\--------------------------------------------------------------------------------

## 框架 & 心智模型 (Frameworks & Mental Models)

### 模型一：AMM 作为一种被动式、由套利驱动的价格平衡系统

这个心智模型旨在回答一个根本问题：一个没有中央订单簿的去中心化交易所，是如何发现并维持公允市场价格的？

Uniswap 的价格机制并非主动“设定”价格，而是一个被动且优雅的平衡系统，其运作依赖于外部经济激励。

-   **第一层：数学法则的基石 (**`x * y = k`**)**
    
    -   这是系统的“物理定律”。它本身不包含任何关于“正确”价格的信息，仅定义了两种资产储备量之间必须维持的数学关系。价格（`P = y / x`）是这个定律的直接衍生物，是曲线上某一点的斜率。
        
-   **第二层：外部世界的价格信号（“真理之源”）**
    
    -   视频中将 Binance 等中心化交易所作为价格发现的源头。这个外部市场的价格可以被视为“真实市场价格”。当 AMM 池内价格与此价格发生偏离时，系统的“势能”就产生了。
        
-   **第三层：执行者——逐利的套利者**
    
    -   套利者是连接内部数学世界和外部市场价格的桥梁。他们是系统的“校准器”。当 AMM 价格（例如 ETH=3000）低于外部市场价格（ETH=3200）时，套利者会执行一个负反馈循环：
        
        1.  **买入低价资产**: 在 AMM 中用 USDC 买入“便宜”的 ETH。
            
        2.  **改变内部状态**: 这个行为减少了池中的 ETH 储备（`x` 减少），增加了 USDC 储备（`y` 增加）。
            
        3.  **价格自动校准**: 根据 `P = y / x`，`y` 增加和 `x` 减少共同导致了池内价格 `P` 的上升。
            
        4.  **循环终止**: 套利行为会持续进行，直到池内价格被推高到与外部市场几乎相等（考虑到交易成本），套利空间消失为止。
            
-   **第四层：流动性深度的作用（系统的“惯性”）**
    
    -   `k` 值，即流动性深度，决定了改变价格需要多大的“力”（交易量）。一个 `k` 值很高的深池，就像一个质量很大的物体，需要巨大的交易量才能使其价格发生显著变化，因此表现出更强的价格稳定性。反之，浅池则容易被小额交易剧烈影响。
        

这个框架帮助我们将 AMM 理解为一个依赖外部激励进行自我修正的经济有机体。它不创造价格，而是通过数学规则和开放的参与机制，被动地、但有效地“吸收”和“反映”整个市场的价格。

### 模型二：资本效率的进化——从“惰性资本”到“主动资本”

这个心智模型描绘了 Uniswap 从 V2 到 V3 的核心演化路径，其主线是关于资本效率的哲学转变。

-   **阶段一：V2 的“惰性资本”或“均匀海洋”模型**
    
    -   **核心特征**: 简单、被动、“一劳永逸”。
        
    -   **心智模型**: 想象 V2 的流动性是一个覆盖全球的、深度均匀的海洋。无论你在地球的哪个角落（对应任何价格点），水的深度（流动性）都是一样的。
        
    -   **问题所在**: 这个模型虽然简单，但效率极低。绝大部分海洋区域（极端价格区间）从未有船只（交易）经过，但你的资本却必须覆盖这些无人问津的区域。这是一种典型的“广撒网”策略，大部分资本处于“沉睡”或“惰性”状态。
        
-   **阶段二：V3 的“主动资本”或“精准水坝”模型**
    
    -   **核心特征**: 复杂、主动、需要策略。
        
    -   **心智模型**: V3 不再要求你覆盖整个海洋。相反，它给了你工具，让你可以在最繁忙的航道（最可能发生交易的价格区间）上修建一系列深度极高的“水坝”或“运河”。
        
        -   **集中性**: 你的资本不再是均匀铺开的薄层，而是被集中起来，形成局部极深的流动性。
            
        -   **主动性**: 你必须成为一名“水利工程师”，预测哪些航道会最繁忙，并把你的“水坝”建在那里。如果价格超出了你的“水坝”范围，你的资本将再次变为“惰性”，停止赚取手续费，并面临显著的无常损失风险。
            
    -   **聚合效应**: 对交易者而言，他们看到的不是一个个孤立的“水坝”，而是由所有 LP 的“水坝”聚合起来的一条连续但深度不均的航道。当他们的交易“船只”驶过时，会经历不同深度的水域。
        
-   **演化背后的代价与工具**
    
    -   这个从“惰性”到“主动”的转变，必然要求更复杂的工具集来管理。V3 中那些看似高深的数学（`L` 和 `√P`）和数据结构（Ticks, Bitmap），正是为了实现和管理这种“精准水坝”模型而发明的必要工具。它们解决了如何定义“水坝”的位置（Ticks）、如何高效地在“水坝”之间导航（Bitmap），以及如何计算流经你“水坝”的水流所应带来的收益（费用计算）等问题。
        

这个框架帮助我们理解，Uniswap 的版本迭代并非简单的功能增加，而是一场关于资本部署哲学的深刻革命。它揭示了在去中心化金融中，效率与简单性、主动管理与被动收益之间的核心权衡。
<!-- DAILY_CHECKIN_2026-01-23_END -->

# 2026-01-22
<!-- DAILY_CHECKIN_2026-01-22_START -->





# Plan

-   阅读论文一篇
    
-   完成3项任务
<!-- DAILY_CHECKIN_2026-01-22_END -->

# 2026-01-21
<!-- DAILY_CHECKIN_2026-01-21_START -->






# Plan

-   一篇量化论文
    
-   **CS146S: The Modern Software Developer**
<!-- DAILY_CHECKIN_2026-01-21_END -->

# 2026-01-20
<!-- DAILY_CHECKIN_2026-01-20_START -->







《区块链技术与应用》笔记

# 12\. 比特币的匿名性

-   pseudonymity
    

## 如何提升比特币的匿名性

### 从network layer 入手：

-   多路径转发：洋葱路由TOR
    

> 多路径转发是一种通过多个中继节点转发数据、 使任何单一节点都无法知道通信全貌的网络技术；Tor 的洋葱路由是多路径转发的一种典型实现。

### application layer：

-   coin mixing - 把你的币和其他人的混起来，让人分不清
    

## zero-knowledge proof 零知识证明

> 证明者向验证者证明一个陈述是正确的，而无需透露该陈述是正确的外的任何信息

ex. 私钥产生签名，用公钥验证签名的正确性

-   零知识证明的数学基础
    

# 13\. 比特币引发的思考

-   levelDB结构储存（key, value), 进而存储整个区块链的内容
    
-   分布式共识
    
-   异步 - 通讯系统的延迟是没有上限的
    
-   分布式系统
    
    -   由多台独立计算机组成，这些计算机通过网络通信与协调，对外表现得像一个“整体系统”的系统。
        
-   货币金融学
    
-   比特币中用的哈希算法 - SHA-256
<!-- DAILY_CHECKIN_2026-01-20_END -->

# 2026-01-19
<!-- DAILY_CHECKIN_2026-01-19_START -->









# Plan

-   完成北大肖臻老师的课程
    
-   阅读2篇论文
    
-   完成4项学习任务打卡
    
-   计划rust学习
<!-- DAILY_CHECKIN_2026-01-19_END -->

# 2026-01-17
<!-- DAILY_CHECKIN_2026-01-17_START -->










# Plan

-   阅读2篇加密货币量化相关论文
    
-   完成4个实习计划打卡
<!-- DAILY_CHECKIN_2026-01-17_END -->

# 2026-01-16
<!-- DAILY_CHECKIN_2026-01-16_START -->











# 14\. 以太坊概述

-   区块链2.0
    
-   mining puzzle
    
-   memory hard - ASIC resistance
    
-   proof of work → proof of stake
    
-   支持smart contract
    
-   BitCoin - BTC - decentralized currency - satoshi
    
-   Ethereum - ETH - decentralized contract - wei
    
-   fiat currency
    

# 15\. 以太坊的账户

-   创始人Vitalik
    
-   比特币 - 基于交易模式的账本 - transaction baed ledger
    
-   以太坊 - account-based ledger
    
-   状态树
    
-   replay attack - 记录交易次数nonce
    
-   外部账户 - externally owned account
    
    -   balance
        
    -   nonce ( counter )
        
-   合约账户 - contract account
    
    -   合约账户不能主动发起一个交易
        
    -   code
        
    -   storage
<!-- DAILY_CHECKIN_2026-01-16_END -->

# 2026-01-15
<!-- DAILY_CHECKIN_2026-01-15_START -->












# Plan

-   Bitcoin, Ethereum Whitepaper（配合北大肖臻老师的课程）
    
-   观看前几天的课程回放
    
-   保证至少3小时的学习时间
    

# Notes

### 哈希

-   哈希函数 - cryptographic hash function
    
    -   collision resistance
        
        -   无法找到人为制造collision的方法
            
        -   没有办法篡改内容而不被检测出来
            
    -   hiding
        
        -   哈希函数的计算过程是单向的
            
        -   前提：输入的空间大，分布均匀
            
    -   以上两个性质带来了digital commitment, digital equivalent of a sealed envelope
        
    -   输入空间不够，则在输入后拼接一个随机数
        
    -   puzzle friendly
        
        -   挖矿的过程没有捷径，只能通过尝试不同的nonce才能找到符合要求的解 → proof of work
            
        -   nonce - 随机数
            
        -   H( block header ) ≤ target
            
    -   difficult to solve, but easy to verify
        
-   比特币中的哈希函数 - SHA-256
    
    -   secure hash algorithm
        

### 签名

-   开户：创立一个公钥-私钥对（public key, private key )
    
-   来自asymmetric encryption algorithm
    
    -   加密 - public key - 相当于账号
        
    -   解密 - private key - 相当于账户密码
        
    -   对称加密体系的弱点：密钥分发不便
        
-   encryption key
    
-   签名-私钥，验证签名 - 公钥
    
-   a good source of randomness
    
-   对message取哈希，对哈希签名哈希指针 hash pointers
    

### 区块链

-   区块链与普通链表的区别
    
    -   block chain is a linked list using hash pointers
        

-   实现tamper-evident log
    

### Merkle tree

-   用哈希指针代替了普通指针的binary tree
    
-   只要记住root hash, 就能检测链表中任何部位的修改
    
-   每一个区块都是transaction
    

-   block header - root hash
    
-   block body
    
-   Merkle proof
    
    -   全节点
        
    -   轻节点
        
    -   proof of membership / inclusion
        
        -   O(logN)
            
    -   proof of non-membership
        
        -   O(N)
            
        -   if sorted Merkle tree is applied - O(logN)
<!-- DAILY_CHECKIN_2026-01-15_END -->

# 2026-01-14
<!-- DAILY_CHECKIN_2026-01-14_START -->
















近期我正在参与南塘 DAO 的艺术共创营，并有机会直接参与到实际的开发工作中。这一经历让我意识到，相比单纯的概念学习，通过真实项目参与 Web3 的协作与建设，是目前对我来说最有效的成长路径。因此，我将接下来一段时间的学习重点，明确放在“认知夯实 + 实战开发同步推进”上。

在认知层面，我计划系统阅读比特币（Bitcoin）与以太坊（Ethereum）的白皮书，从最原始的设计问题出发，理解去中心化系统试图解决的核心矛盾，以及智能合约与链上计算为何会出现。我希望通过回到源头的方式，建立对 Web3 基础逻辑的整体理解，而不是停留在碎片化的应用层认知。

在实践层面，我将以南塘 DAO 的共创项目为主要载体，参与全栈开发工作，具体包括 Vue 前端 与 TypeScript 后端。我会将 TypeScript 后端作为当前技术能力建设的重点，逐步熟悉接口设计、业务逻辑组织以及与链上数据或合约交互的方式，使自己能够在 Web3 项目中承担真实、可落地的开发任务，而不仅是辅助性工作。

在学习与工作的结合方式上，我会尽量将每一次功能开发、问题排查和技术决策，整理为结构化的学习笔记与复盘记录。通过这种方式，把项目中的实践经验沉淀为可复用的认知资产，也为未来参与更多 Web3 协作项目或开源贡献打下基础。

总体来说，我希望以南塘 DAO 的艺术共创营为起点，通过参与真正“被人使用的“项目驱动的全栈开发实践，一边夯实 Web3 的底层认知，一边提升工程能力，逐步完成从学习者到建设者的转变。这也是我目前最认可、也最适合自己的 Web3 行动路径。
<!-- DAILY_CHECKIN_2026-01-14_END -->

# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->

















（今天主要看了一位量化交易者的传记，作为加密货币量化投资研究人员，也算是认真学习了一下相关知识😂）

# My life as a quant: reflections on Physics and Finance

> 期权是更常见的衍生品证券（derivative security）的一种特例，衍生品证券的价值衍生于（derived from）作为标的（underlying）证券的价值”

-   做市 - make markets
    
-   布莱克-斯科尔斯方程式”
    

# 一· 因缘际会

“如果你决定没有必要拿A，那么你在大学里就能学到很多东西”——Rabi

> 在1966年及随后的几年中，我怀揣着能够获得李政道那样成功的梦想。按照这个不切实际的标准，只有少数“神童”能够真正实现了他们的诺言。其中一个成为军事分析智囊团成员，在伊拉克入侵科威特之后的海湾战争期间，我在电视里认出了他。还有一个完成了物理学的博士学位课程，之后转入医学院，从事精神学方面的研究，最后成为一名知名的神经网络学专家。第三位在获得哥伦比亚大学物理系最佳本科生荣誉后，患上躁狂抑郁症。但他决定继续搞研究，不间断地在淡黄色笔记本上记录下他每天全神贯注投入工作的分钟数。每次停下来或休息时，他就按停表，将从上一次打断后的工作时间记录下来。每天结束后，他计算出工作时间总数。我自己也有些强迫症，因此很同情他的计算。我知道一个人一天之内能够集中精力、不被打扰的时间可谓少之又少。每想到此，我就立刻开始做自己的工作”

> 我从哥伦比亚大学的老师和学生的命运中得到一个教训：性格和机会与天赋同等重要。运气，再加上我母亲所说的“忍耐”，也就是坚韧不拔的毅力，最后起到至关重要的作用。”

> 像绝大多数物理学者一样，我是个还原论者：我相信可以把复杂的事物简化成它们的构成要素。生物学建立在化学的基础上；而化学只不过是分子和原子的物理运动而已；原子由电子和原子核构成；原子核又包含了质子和中子，而质子和中子似乎都是由夸克组成的。在这个公认的物质分层体系中，究竟什么才是最终的亚核粒子？它们的运动又遵循怎样的规律？这些问题就是粒子物理学研究的范畴。”

> 如果是对的，就能超越牛顿和爱因斯坦：你发现了十诫中的一条。你用神来之笔写下一组定律，它们神奇地描述并预测了“上帝”所创造的世界是如何运行的。这就是我向往的征程，其他任何选择都是我所不愿做出的让步。 ”

# 二· 求学7年

> 如果你不介意浪费最好的青春岁月，那么哥伦比亚大学研究生生活可谓是人间天堂。只要通过了最初的两道坎儿：通过博士资格考试和找到研究指导教授，似乎就没有人会关心在你身上发生了什么。作为一名研究生是一个不错的“闲差”。学校只给你为数不多但能维持生活的奖学金，并希望你不要给他们添麻烦。我在物理系度过了7年清教徒般的生活。我的一个朋友花了10年，最终我们都活着毕业了。”

> 多年后，当我搬到华尔街后，我特别喜欢从事数量金融的那种充实、忙碌的工作方式：总是有程序要写、有交易界面要设计、有计算等着去做。能够有点事忙着，而不是一定要超凡脱俗，这种感觉挺好。”

> 洛伦兹的理论最终沦为历史的注脚，他也从来没有爱因斯坦那种洞察力。弗里德伯格的课程重温了洛伦兹的奋斗史，也让我充分认识到，爱因斯坦理性的、凭借直觉的分析是如何消除或是规避了以前出现的混乱之处。从那时起，我就对理论上的重大突破是如何产生的非常感兴趣。物理学或金融学中的重大发现，绝不会像人们读教科书那样简单，即使这些重大发现出现几年后就会被写入教科书。”

> 我对开创者与门徒间的差距有了更深刻的体会。在传授的时候，所有东西都看上去很简单，但当你独自一人在可感知的、无序世界中挣扎过，你才能知道，制定或是辨别一套最终回过头来看才发现并不那么显而易见的规则有多么难。”

> 物理学家对于四种力非常熟悉：强作用力、电磁力、弱作用力以及引力。强作用力使质子和中子相互结合在一起，共同构成位于每个原子中心的原子核；电磁力使原子中的电子围绕原子核运动，同时发射光波；弱作用力则会产生β衰变，这是一种以释放原子的形式表现出来的原子核放射性衰变；引力是最古老也最为人们所熟知的作用力，是诸如苹果落地，地球与月球运动，行星、恒星和整个银河系星球运动的原因。”
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->


















# 《从零到一学习以太坊》

-   EVM - Ethereum Virtual Machine
    

**L1（Layer 1）** 是指：

> 区块链的基础层（Base Layer） 负责：共识、安全、数据最终确认（Finality）

**常见 L1 公链（你一定听过）**

**Ethereum**

**Bitcoin**

**Solana**

**L2（Layer 2）** 是指：

> 构建在 L1 之上的扩展层：把计算和交易“挪出去”，但**把安全性锚定在 L1 上**
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
