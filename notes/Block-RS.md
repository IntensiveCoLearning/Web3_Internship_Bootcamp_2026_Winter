---
timezone: UTC+8
---

# Block-RS

**GitHub ID:** Block-RS

**Telegram:** @kaven_hhj

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-16
<!-- DAILY_CHECKIN_2026-01-16_START -->
## **Day 4 学习计划**

今天是训练营打卡的第五天，也是第一周的最后一天，我打算对前几天的多学习内容做一个总结并在此基础上完成Simple NFT挑战，具体安排如下：

-   复习前几天所学知识，尤其是关于以太坊相关知识以及其主流Defi协议`Uniswap V2`以及`V3`。
    
-   完成Simple NFT挑战。
    

## **回顾与总结**

### **一、 以太坊底层运行机制**

### **1\. 以太坊底层机制与账户体系**

-   **运行原理**：以太坊被视为一台“世界计算机”。它通过 **EVM（以太坊虚拟机）** 执行智能合约，利用 **Gas 机制**（包含 EIP-1559 的销毁逻辑）平衡网络资源并防止攻击。
    
-   **账户分类**：
    
    -   **EOA（外部账户）**：由私钥控制，是所有交易的起点。
        
    -   **CA（合约账户）**：由代码驱动，存储字节码和状态数据。
        
-   **节点与网络**：
    
    -   **节点角色**：分为全节点（验证交易）、归档节点（保存所有历史快照）和轻节点（仅下载区块头）。
        
    -   **P2P 协议**：利用 **Discovery V5** 进行节点发现（UDP），**RLPx** 建立加密连接（TCP），并通 **Gossip** 流言协议广播消息。
        
    -   **合并后架构**：执行层（EL，跑代码）与共识层（CL，做决策）通过 **Engine API** 协作。
        

### **2\. 主流 DeFi 协议：Uniswap V2 与 V3**

-   **Uniswap V2 (恒定乘积)**：
    
    -   **机制**：基于 `x* y = k` 公式。流动性均匀分布在 \[0, ∞) 全区间，导致资本效率较低。
        
    -   **功能**：引入了 ERC-20/ERC-20 直接交易、闪电掉（Flash Swaps）以及 **TWAP（时间加权平均价）** 预言机以防御价格操纵。
        
-   **Uniswap V3 (集中流动性)**：
    
    -   **核心改进**：LP 可在自定义的价格区间 `[Pa, Pb]` 提供流动性，极大提升了资本效率。
        
    -   **Tick 机制**：将价格离散化为 **Ticks**（价格点），价格计算公式为 `p(i) = 1.0001^i`。**TickSpacing** 根据费率设定步长（如 0.05% 费率对应步长 10）。
        
    -   **凭证变化**：由于头寸唯一，LP 凭证从 V2 的 ERC-20 变为 **ERC-721 (NFT)**。
        

### **3\. 智能合约开发与安全**

-   **合约生命周期**：包含需求分析、设计、开发、测试、部署及维护。
    
-   **核心产物**：编译后生成的 **Bytecode**（链上运行）和 **ABI**（外部交互说明书）。
    
-   **安全实践**：
    
    -   使用最新版本的 Solidity 编译器以规避已知漏洞。
        
    -   合理使用 `require()` 进行条件检查，避免复杂循环以防 Gas 耗尽。
        
    -   通过 **多签钱包（Safe）** 和 **时间锁** 提升管理安全性。
        

### **4\. Web3 法律合规与前沿趋势 (中国视角)**

-   **法律红线**：明确了境内严禁 **ICO（非法集资）**、**交易所（非法金融活动）**、**虚拟币挖矿** 等行为。2025 年底监管信号明确：涉及虚拟货币的民事合同可能被视为无效，风险自担。
    
-   **求职避险**：建议从业者审查项目是否面向大陆展业（如屏蔽大陆 IP），警惕“帮信罪”风险。
    
-   **前沿创新**：探讨了 **AI + Web3** 的结合，如 **x402 协议**（AI 支付标准）和 **ERC-8004**（AI 链上身份/护照）。
    

## **Simple NFT挑战**

首先，我配置完环境（[Node (>= v20.18.3)](https://nodejs.org/en/download/)&&Yarn ([v1](https://classic.yarnpkg.com/en/docs/install/) or [v2+](https://yarnpkg.com/getting-started/install))&&Git）之后运行本地测试链：

```
yarn chain
```

![d11820b4618838f60c8a467eb1bda2af.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Block-RS/images/2026-01-16-1768546325268-d11820b4618838f60c8a467eb1bda2af.png)

然后我部署合约并启动nexyjs项目，运行前端

```
yarn deploy
yarn start
```

在浏览器进入[http://localhost:3000](http://localhost:3000)

![d307b11569f5d10a51850b10e1a1e12b.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Block-RS/images/2026-01-16-1768546342768-d307b11569f5d10a51850b10e1a1e12b.png)

## **Checkpoint 1: ⛽️ Gas & Wallets 👛**

使用另一个浏览器往我的主账户发送ETH：

![da514e202b3f638425778cb8853b253a.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Block-RS/images/2026-01-16-1768546459183-da514e202b3f638425778cb8853b253a.png)

## **Checkpoint 2: 🖨 Minting**

我在我的主浏览器里mint NFT，同时还用另一个浏览器mint NFT并发送给我的主钱包，现在我的主钱包拥有两个NFT。

![d36bbe3e98e6125595922adfc585c2e1.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Block-RS/images/2026-01-16-1768546486446-d36bbe3e98e6125595922adfc585c2e1.png)

## **Checkpoint 3: 💾 Deploy your contract! 🛰**

```
yarn deploy --network sepolia
```

![c8eaa9d136efc11f4f3e6cfd1326c30d.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Block-RS/images/2026-01-16-1768546510506-c8eaa9d136efc11f4f3e6cfd1326c30d.png)

```
yarn generate
```

根据private key生成钱包，并往这个地址转账

![fd40ff604ced20222dab02c7891fb649.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Block-RS/images/2026-01-16-1768546520249-fd40ff604ced20222dab02c7891fb649.png)

## **Checkpoint 4: 🚢 Ship your frontend! 🚁**

![4151f44d0d09e562a961811deed95e33.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Block-RS/images/2026-01-16-1768546369835-4151f44d0d09e562a961811deed95e33.png)

```
yarn test
```

![273f96d6f340a0a13073d4017f5ed813.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Block-RS/images/2026-01-16-1768546533641-273f96d6f340a0a13073d4017f5ed813.png)

## **Checkpoint 5: 📜 Contract Verification**

verify我们的NFT合约，让别人能够在sepolia.etherscan上看到合约源码：

```
yarn verify --network sepolia
```

![18cb250a8bbc46c49a7aa72ed9f70834.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Block-RS/images/2026-01-16-1768546604226-18cb250a8bbc46c49a7aa72ed9f70834.png)

## **Checkpoint 6: 💪 Flex!**

最后我们在sepolia网络上再次mintNFT，小号钱包mint完之后发送给我的主钱包

![4991241f45be5d63cd2623baf3cca697.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Block-RS/images/2026-01-16-1768546567095-4991241f45be5d63cd2623baf3cca697.png)
<!-- DAILY_CHECKIN_2026-01-16_END -->

# 2026-01-15
<!-- DAILY_CHECKIN_2026-01-15_START -->


## **Day 4 学习计划**

今天是训练营打卡的第四天，今天我的整体学习计划如下：

-   学习《021学习以太坊》中的第四章
    
-   观看[**Day 4: NFTs!!! ERC20 vs ERC721, IPFS, Metadata**](https://www.youtube.com/watch?v=NOdrEpnoCiM&list=PLJz1HruEnenAf80uOfDwBPqaliJkjKg69&index=4)
    
-   观看[**Day 5: Stuck Transactions, Gas Limits, Multisigs, L2s, Lending...**](https://www.youtube.com/watch?v=11QTT6BK5j0&list=PLJz1HruEnenAf80uOfDwBPqaliJkjKg69&index=5)
    

## **《021学习以太坊》第四章学习：智能合约理论基础总结**

**1\. 智能合约的本质：数字自动售货机**

-   **逻辑核心**：智能合约是一段部署在区块链上的代码。它遵循“If-Then”逻辑：一旦预设条件满足，合约就会自动执行，无需第三方信用背书。
    
-   **物理形态**：它是代码逻辑（Bytecode）与持久化状态数据（Storage）的结合体。
    
-   **特性**：具备**确定性**（相同输入必有相同输出）、**不可篡改性**（部署后代码逻辑锁定）和**公开可追溯性**（所有操作链上留痕）。
    

**2\. Solidity：智能合约的首席语言**

-   **地位**：Solidity 是为 EVM（以太坊虚拟机）量身定制的静态类型语言，也是目前 Web3 领域生态最成熟、应用最广的语言。
    
-   **资源操作**：它原生支持对账户余额、合约存储、Gas 消耗以及事件日志（Events）的高效处理。
    
-   **生态加持**：配合 OpenZeppelin 等标准化合约库，开发者可以像“搭积木”一样快速构建安全的 DeFi 或 NFT 应用。
    

**3\. 核心产物：字节码（Bytecode）与 ABI**

-   **字节码**：这是合约在链上真正运行的“机器语言”。部署时，EVM 会执行初始化代码（Init code）并将最终的运行时代码（Runtime code）存入合约账户。
    
-   **ABI (应用二进制接口)**：这是一个 JSON 格式的“说明书”。它告诉前端 DApp 或其他合约该如何调用这个合约的功能（比如函数名、参数类型是什么）。没有 ABI，外界很难直接与二进制字节码交互。
    

**4\. 合约的生命周期：从部署到“销毁”**

-   **部署**：通过一笔交易将字节码推向全网，一旦成功，合约便获得一个唯一的 0x 地址。
    
-   **交互**：外部账户（EOA）或其他合约向该地址发送消息，触发预设的代码路径。
    
-   **升级与逻辑变更**：由于代码不可直接修改，目前主流通过**代理模式（Proxy Pattern）**实现升级。即用户访问的是固定代理地址，但后台逻辑可以指向新的合约。
    
-   **自毁（Self-destruct）**：在坎昆升级后，自毁指令的功能被大幅削弱，已不再推荐作为常规的合约清理或逻辑更新手段。
    

**5\. 安全准则：合约即法律**

-   **默认安全**：从 0.8.0 版本开始，Solidity 自动处理整数溢出问题，规避了大量初级漏洞。
    
-   **审计意识**：由于链上资产价值巨大，智能合约必须经过静态分析工具（如 Slither）检测以及专业人工审计，以防范重入攻击等高级逻辑漏洞。
    

**💡 开发者视角的关键结论：**

-   合约是**被动执行**的，没有调用就没有动作。
    
-   **ABI** 是沟通代码与外界的桥梁。
    
-   追求**可预测性**是合约开发的最高优先级。
    

## **NFTs!!! ERC20 vs ERC721, IPFS, Metadata学习**

### **1\. NFT 的基础概念与购买体验**

中国视频解释了 NFT 作为“数字所有权”的本质。它具有链上溯源性，艺术家的创作记录是公开且不可篡改的，这使其与普通的“复制图片”有本质区别。主持人演示了如何在 OpenSea 这种二级市场查看自己的 ENS 域名，以及如何直接在艺术家的官方网站上“铸造”（Mint）一个新的 NFT。此外，视频还讨论了 NFT 的实用价值，例如作为进入特定聊天室的门票或参与治理投票的凭证。

### **2\. ERC-20 与 ERC-721 的底层差异**

-   **ERC-20（同质化代币）**：类似于货币，系统维护一个巨大的“余额表”。转账时只是对数值进行简单的加减。
    
-   **ERC-721（非同质化代币）**：类似于收集品，系统维护一个“所有权表”。每个代币都是唯一的索引，转账本质上是在更改特定 ID 的主人。
    

### **3\. NFT 的存储方案：IPFS vs. On-chain**

-   **链上存储（On-chain）**：如 Loot 等项目，其图像和元数据直接存在智能合约里。这种方式极度去中心化但成本高昂。
    
-   **IPFS 存储**：大多数 NFT 在链上仅存储一个哈希值，指向 IPFS（星际文件系统）。视频演示了“内容寻址”：如果图片发生任何改变，其哈希地址就会失效，从而保证了数据的不可篡改性。
    
-   **风险提示**：如果 NFT 指向的是中心化 Web 服务器，开发者可以随时更换图片，存在“跑路（Rug Pull）”风险。
    

### **4\. 安全、透明性与创作者经济**

-   **代码即法律**：强调了 Web3 的开源特质，用户可以通过 Etherscan 查看合约代码，验证发行总量等限制是否会被随意更改。
    
-   **去中介化**：NFT 让艺术家能直接连接粉丝，摆脱传统平台的抽成。视频还讨论了如何在合约中编写代码，使艺术家的二级市场交易中自动获得一定比例的版税收益。
    

## **Stuck Transactions, Gas Limits, Multisigs, L2s, Lending学习**

### **1\. 交易被卡住（Stuck Transactions）与 Nonce 的联系**

-   **Nonce 是关键**：每一笔交易都有一个按顺序增长的编号（Nonce）。如果 Nonce 为 5 的交易因为 Gas 给得太低而卡在内存池（Mempool）中，后面 Nonce 为 6、7 的交易无论给多少 Gas 都无法先执行。
    
-   **加速与取消**：视频演示了如何通过“Speed Up”来覆盖低 Gas 交易，本质是发送一笔 Nonce 相同但 Gas 更高的新交易，让矿工优先打包。取消交易也是同理，即发送一笔 Nonce 相同、金额为 0、指向自己的交易。
    
-   **钱包重置**：当 MetaMask 的显示状态与链上实际情况不同步时，演示了“重置账户（Reset Account）”操作。这不会导致资产丢失，只是清空本地的历史记录和 Nonce 状态，让钱包重新从链上抓取正确信息。
    

### **2\. Gas 机制深度拆解**

-   **Gas Limit vs. Max Fee**：Gas Limit 是你愿意为这笔交易支付的“最大工作量”（防止代码死循环）；Max Fee 是你为单位工作量支付的单价（拍卖竞价）。
    
-   **交易成本差异**：简单的 ETH 转账仅需 21,000 Gas，但调用复杂合约（如 Aave 借贷、Uniswap 交易）会涉及大量的存储操作（Storage Update），因此需要更高的 Gas Limit 和更多的手续费。
    
-   **EIP-1559**：解释了基础费用（Base Fee）和优先费用（Priority Fee/小费）的关系，建议设置 1.5-2.0 Gwei 的小费以确保交易能被快速响应。
    

### **3\. ERC-20 的“授权（Approve）”模式**

-   **两步走逻辑**：在交易 ERC-20 代币（如 DAI）时，必须先进行一次 `Approve` 交易。这是为了授权智能合约有权动用你账户里的特定数额代币。
    
-   **安全性**：授权意味着你信任该合约的代码逻辑。一旦完成授权，才会发起真正的业务交易（如 Swap）。
    

### **4\. Layer 2 (L2) 扩容与跨链桥**

-   **为什么需要 L2**：演示了将资金通过 Optimism Bridge 桥接到 L2 的过程。虽然桥接过程有几分钟的“真空期（资金在两边都看不到）”，但一旦进入 L2，交易费会大幅下降，且能享受秒级的确认速度。
    
-   **安全性保证**：L2 的安全性由 L1（以太坊主网）最终结算和保障，但在交互体验上更接近 Web2。
    

### **5\. 多签钱包 (Gnosis Safe) 与安全策略**

-   **分布式所有权**：演示了创建一个 2-of-4 的多签钱包。这意味着 4 个管理人中必须有 2 人签名，交易才能执行。
    
-   **防灾备灾**：这是保护大额资产的最佳方式。即使其中一个私钥/助记词泄露，资产依然安全。同时也解决了“单点故障”问题（如某人意外离世，其他成员仍可控制资金）。
    
-   **WalletConnect**：展示了如何通过 WalletConnect 将多签钱包连接到 Uniswap 等应用进行资产管理，实现团队级或高安全等级的 DeFi 操作。
<!-- DAILY_CHECKIN_2026-01-15_END -->

# 2026-01-14
<!-- DAILY_CHECKIN_2026-01-14_START -->



## **Day 3 学习计划**

今天是训练营打卡的第三天，经过前两天的学习我已经补充了很多关于以太坊自身以及在他上面运行的主流Defi：Uniswap V2的知识点，今天我的总体学习计划如下：

-   学习Web3 实习手册[「安全与合规」](https://web3intern.xyz/zh/security/)部分
    
-   学习《021学习以太坊》中的第三章
    
-   观看[**Day 3: ENS, DEX, Identity, Inventory, Sybil**](https://www.youtube.com/watch?v=wYSMNdIRoII&list=PLJz1HruEnenAf80uOfDwBPqaliJkjKg69&index=3)
    
-   继续学习以太坊主流Defi协议`Uniswap V3`，对比分析v3和v2之间的差异与改进
    

## **学习Web3 实习手册「安全与合规」有感**

这篇文档主要面向**中国境内**的Web3从业者和求职者，核心主题是：**在参与Web3活动时，如何识别并规避境内法律风险，特别是刑事风险。**全文以中国当前“**全面封堵金融属性，有限容忍技术创新**”的监管基调为基础，系统梳理了从项目开发到个人求职的各类合规雷区。以下是我对文档核心内容的简明总结：

### **1\. 核心理念：从“相信”到“验证”**

-   **思维转变**：Web3 的核心逻辑是 **“Don't trust, verify”**（不要信任，要验证）。安全不再仅仅是平台的责任，而是每个参与者的基本功。
    
-   **主要目标**：文档旨在帮助新人识别行业最常遇到的问题与风险，少走弯路。
    

### **2\. 个人安全基石：私钥与助记词**

-   **最高准则**：私钥/助记词是资产的唯一控制权。一旦丢失或泄露，任何客服或机构都无法帮你找回资产。
    
-   **存储禁忌**：永远不要截图保存、不要存在云盘或联网设备。推荐物理备份（如写在纸上、存入保险箱）。
    

### **3\. 防范诈骗与攻击**

-   **钓鱼攻击**：警惕 Telegram、Discord 里的私聊消息及伪造的官网链接。始终从官方渠道进入 DApp。
    
-   **虚假客服**：真正的 Web3 项目方不会主动向你索要助记词或转账要求。
    
-   **恶意签名**：在钱包弹窗点击“确认”前，务必核对目标地址和授权额度（Allowance），防止因签署恶意授权导致资产被瞬间搬空。
    

### **4\. 合规与法律意识**

-   **国家政策**：明确不同国家（如中国、美国、新加坡、迪拜）对加密货币及相关业务的政策差异。
    
-   **行业合规趋势**：Web3 正在从“野蛮生长”转向“合规化”，涉及稳定币立法、资产合规审计、反洗钱（AML）和了解你的客户（KYC）机制。
    
-   **合规操作建议**：建议从业者保持对政策法规的敏感性，避免参与未经法律许可的集资或金融违法行为。
    

## **《021学习以太坊》第三章学习**

以太坊账户体系是理解“世界计算机”交互逻辑的基础 。本章核心内容围绕账户分类、地址生成、合约部署及安全权限控制展开。

**1\. EOA 与 合约账户 (CA)**

-   **外部拥有账户 (EOA)**：由私钥控制（如你的小狐狸钱包）。它是所有链上交易的**唯一起点**，合约不能自发活动，必须由 EOA 签名触发。
    
-   **合约账户 (CA)**：由代码驱动。它没有私钥，内部存储了 EVM 字节码和状态数据。它像个“机器人”，只有被调用时才执行逻辑。
    
-   **地址由来**：以太坊地址以 **0x** 开头（代表十六进制），本质上是公钥经过 Keccak-256 哈希后截取的后 20 字节。
    

**2\. 助记词与私钥**

-   **核心关系**：助记词（12/24个单词）是“母钥”，通过它可派生出无数个私钥。**控制了助记词就等于控制了该钱包下所有资产。**
    
-   **安全准则**：保护好助记词是 Web3 生存的第一定律。建议物理离线备份（抄在纸上），绝不在任何联网设备或网页上输入，防止被钓鱼攻击。
    

**3\. 合约部署逻辑与地址计算**

-   **部署原理**：开发者将编译好的字节码发送到零地址或通过特定指令，EVM 随后在链上开辟存储空间。
    
-   **地址公式**：
    
    -   **CREATE**：`hash(sender, nonce)`。地址随交易次数变化，难以提前精确锁定。
        
    -   **CREATE2**：`hash(0xff, sender, salt, code)`。允许通过自定义“盐”预计算地址，实现“未部署先定址”，极大方便了跨链协作。
        

**4.多签与时间锁**

-   **多签 (Multisig)**：
    
    -   **好处**：需要 M-of-N 个人投票才能动用资金，有效防止单点泄露导致资产被盗。
        
    -   **坏处**：操作效率低，紧急时刻可能因为凑不齐人而延误时机。
        
-   **时间锁 (Timelock)**：
    
    -   **好处**：给敏感操作（如修改协议）设置冷静期，让用户有时间检查并应对潜在风险。
        
    -   **坏处**：在面临黑客攻击需要紧急修复时，强制的等待期可能成为致命伤。
        

* * *

**💡 核心要点：**

-   **起点唯一**：每一笔交易必须源于 EOA。
    
-   **存储差异**：EOA 存余额，CA 既存余额也存复杂状态。
    
-   **不可逆性**：私钥丢失不可找回，助记词是最高权限。
    

## **ENS, DEX, Identity, Inventory, Sybil学习**

这个视频主要介绍了链上身份、去中心化交易所，去中心化身份以及女巫攻击之间的联系，以下是我对该视频的核心内容总结：

### **1\. 链上身份与 ENS**

-   **从地址到名字**：视频演示了将复杂的十六进制地址（如 `0xae9...`）绑定到人类可读的域名（如 `sanfordstout.eth`）。这类似于 Web2 中的 DNS（将 IP 映射到域名）。
    
-   **注册流程**：为了防止他人通过抢跑（Front-running）窃取你正在注册的名字，ENS 采用了两步走策略：
    
    -   **第一步：Commit（提交）**。发送一个哈希值，证明你想注册这个名字，但不公开名字内容。
        
    -   **第二步：Reveal（揭晓）**。等待一分钟后，再次发送交易公开名字并正式注册。
        
-   \*\*反向解析：这非常关键，它允许 DApp 在你登录时，根据你的地址反向查找到你的 ENS 名字并显示出来，从而实现“身份随身走”。
    

### **2\. 去中心化交易所 (DEX) 与 Uniswap 实战**

-   **DEX vs. CEX**：
    
    -   **中心化交易所 (CEX)**：如币安、Coinbase，本质上是中心化的数据库账本。
        
    -   **去中心化交易所 (DEX)**：如 Uniswap，是运行在链上的智能合约。它没有管理员，通过流动性池让用户直接进行代币兑换。
        
-   **实战演示**：演示了将 ETH 兑换为稳定币 DAI 的过程。视频强调了 Web3 的互操作性——一旦你在 ENS 注册了名字，登录 Uniswap 时，右上角会直接显示你的 `sanfordstout.eth`，而不需要重新设置个人资料 。
    

### **3\. 稳定币机制**

-   **DAI 的运行逻辑**：DAI 是一种通过超额抵押 维持价格稳定的代币。
    
-   **核心原理**：用户将价值 100 美元的 ETH 锁进合约，借出价值 60 美元的 DAI。如果 ETH 价格暴跌，系统会自动执行\*\*清算 逻辑，卖出抵押品以保证每一个 DAI 背后都有足额资产支撑 。
    

### **4\. 身份、库存与女巫攻击 (Sybil Attack)**

-   **库存 (Inventory) 随身走**：通过 Zapper 等工具演示了，无论你访问哪个 Web3 网站，只要连接钱包，你的资产历史和余额（库存）都会自动呈现。这证明了资产归用户所有，而非平台所有。
    
-   **女巫攻击 (Sybil Attack)**：由于 Web3 开户不需要许可，一个人可以轻松创建成千上万个账户。这在投票、空投发放等场景中会产生严重问题。目前的解决方法通常是根据账户的“链上行为评分”（如是否用过钱包、是否投过票）来判断其“真实性”。
    

###

## **学习以太坊主流Defi协议**`Uniswap V3`**有感**

在前两天的学习中我已经系统且细致的掌握了`uniswap v2`的基本规则（如`AMA`和闪电贷机制等），今天我正式进阶到 `Uniswap V3`，

他相比较于v2版本对于流动性的控制粒度更细，对于资金的利用率更高，同时对操作者的金融知识水平要求也更高。

以下是我对 Uniswap V3 核心机制的深入分点总结：

### **1\. Uniswap V2 与 V3 的最主要区别及影响**

**最核心的区别是流动性提供方式：**

-   **V2（被动流动性）**：LP 在整个价格范围`[0, ∞)` 内均匀提供流动性。这种方式资本效率极低（大部分资金在远离市价处闲置），但优点是管理极其简单。
    
-   **V3（主动集中流动性）**：引入了**集中流动性**，LP 可以在自定义的价格区间`[Pa, Pb]` 内提供流动性。这极大提高了资本效率，但要求 LP 具备主动管理能力。
    

**这对 LP 和交易者分别意味着：**

-   **对 LP 的影响：**
    
    -   **V2 LP**：体验简单，“存入即忘”。但收益会被全区间摊薄，且始终承受无常损失。
        
    -   **V3 LP**：需要积极管理仓位。在区间内，手续费收益远超 V2；但若价格脱离区间，将停止赚取手续费并面临资产完全偏向一侧的风险（等同于完全暴露在无常损失中），管理复杂度指数级上升。
        
-   **对交易者的影响：**
    
    -   **V2 交易者**：任何价格点都有流动性，但主流交易对的滑点通常较高。
        
    -   **V3 交易者**：在市价附近的流动性极深，能享受远低于 V2 的滑点。但若交易规模巨大，连续击穿多个价格区间，可能会遇到深度骤减带来的剧烈滑点波动。
        

### **2\. 集中流动性的实现：Tick 与 TickSpacing**

集中流动性的定义：

LP 提供的资金不再撒向全区间，而是“锁定”在特定范围。只有当市价落在该区间内，这部分资金才会被激活参与交易并捕获手续费。

**Tick 和 TickSpacing 的实现逻辑：**

-   **Tick**：V3 将整个价格范围离散化为一个个细小的价格点，称为 `Tick`。每个 `Tick` 都有一个对应的索引 `i` 和价格 `p(i)`，价格与索引的关系是 `p(i) = 1.0001^i`。这使得价格计算可以在链上通过整数运算高效完成。
    
-   **流动性头寸**：一个 LP 的头寸由两个 `Tick` 边界定义：`lowerTick` 和 `upperTick`。流动性仅存在于这两个 `Tick` 之间。
    
-   **TickSpacing**：为了减少计算和存储开销，并不是每个 `Tick` 都可以设置边界。`TickSpacing` 是一个步长（例如，对于 0.3% 费率的池子，`tickSpacing` 是 60）。LP 只能选择那些索引能被 `tickSpacing` 整除的 `Tick` 作为边界。这相当于将可用的价格区间进行了“量化”。
    

### **3\. 滑点、三明治攻击与 V3 的改进**

**V3 是否减轻了三明治攻击：是，但未根除。**

-   **减轻原因**：由于流动性高度集中在当前价格附近，同等规模的交易在 V3 中引起的滑点（价格变动）远小于 V2。这显著提高了黑客进行三明治攻击的“获利门槛”——许多小额攻击的潜在利润已无法覆盖其 Gas 成本。
    
-   **未根除原因**：攻击的底层逻辑（利用公开内存池 Mempool 进行抢跑）并未改变。对于超级大单，依然会跨越多个 Tick 产生足够大的滑点，让攻击者有机可乘。
    

### **4\. Uniswap V3 的 TWAP 预言机**

**V3 对预言机的进化：**

-   **V2 的痛点**：需要外部脚本定时快照来计算 TWAP，Gas 成本高，且容易在单区块内被操控。
    
-   **V3 的升级**：直接在合约内维护了一个**观察值数组（Observations）**。
    
-   **核心优势**：
    
    NaN.  **更强的抗操纵性**：V3 记录的是累积的 `log(price)` 和 `liquidity`，计算出的是几何平均价，比 V2 的算术平均更能抵抗价格突刺攻击。
          
    NaN.  **更低的调用成本**：外部协议可以直接在一次调用中查询任意历史时间窗口的平均价，无需自己维护历史数据。
          
    NaN.  **安全性**：由于攻击者需要长时间改变池子状态才能显著影响 TWAP，这使得 V3 预言机成为了 DeFi 生态中极其可靠的信任底座。
<!-- DAILY_CHECKIN_2026-01-14_END -->

# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->




## **Day 2 学习计划**

今天是我在这个训练营打卡的第二天，我的总体学习计划如下：

-   学习《021学习以太坊》中的第二章
    
-   观看[**Day 2: Becoming a Power User - Wallets, Mnemonics, Keypairs**](https://www.youtube.com/watch?v=_GjPeRLCREA&list=PLJz1HruEnenAf80uOfDwBPqaliJkjKg69&index=2)
    
-   继续学习以太坊主流Defi协议`Uniswap V2`（从源码中深层理解协议）
    

## **《021学习以太坊》第二章学习**

本章的核心逻辑是：**“以太坊是如何通过不同的节点角色，利用 P2P 协议连接成网，并完成执行与共识协作的？”**

**1、 节点类型：数据的持有深度决定了角色**

以太坊节点并不是千篇一律的，根据存储数据的多少和承担的功能，分为以下三类：

1.  **全节点 (Full Node)**：
    
    -   **核心能力**：下载并校验每一个区块及每一笔交易，验证状态转换。
        
    -   **存储内容**：保存最新的状态数据，并修剪（Pruning）掉很久以前的历史状态。
        
    -   **作用**：是网络的安全基石，独立验证交易而不依赖第三方。
        
2.  **归档节点 (Archive Node)**：
    
    -   **核心能力**：在全节点的基础上，保留了自“创世区块”以来**所有历史时刻的状态快照**。
        
    -   **存储压力**：占用磁盘空间极大（通常需数 TB）。
        
    -   **作用**：主要用于区块浏览器（如 Etherscan）、分析平台或历史追溯，普通开发者很少自己运行。
        
3.  **轻节点 (Light Node)**：
    
    -   **核心能力**：只下载区块头，不存储完整的状态或交易数据。
        
    -   **验证逻辑**：依赖全节点提供的“默克尔证明（Merkle Proof）”来验证数据的真实性。
        
    -   **作用**：适合移动端或资源受限的设备。
        

**2、 通信协议：从“发现”到“传播”的 P2P 艺术**

以太坊网络是一个典型的 P2P（点对点）系统，消息的传递分为三个阶段：

-   **1\. 节点发现（UDP 协议）**：
    
    -   使用 **Discovery V5** 协议。新节点加入时，先向已知的“种子节点（Bootnodes）”发送 UDP 请求。
        
    -   目的是获取网络中其他活跃节点的 IP 和端口，构建自己的“邻居表”。
        
-   **2\. 建立连接（TCP 握手）**：
    
    -   一旦发现了合适的“邻居”，节点会通过 **RLPx** 协议发起 TCP 连接。
        
    -   这个过程包括身份验证和加密握手，确保双方通信的安全和私密性。
        
-   **3\. 消息广播（Gossip 流言协议）**：
    
    -   **原理**：像流言蜚语一样，节点收到新交易或新区块后，会随机转发给一部分邻居。
        
    -   **效率**：这种“一传十、十传百”的方式确保了消息能在几百毫秒内覆盖全球上万个节点。
        

**3、 后合并时代：执行层（EL）与共识层（CL）的关系**

这是本章最硬核的部分，解释了以太坊“合并（The Merge）”后，节点内部是如何拆分的：

-   **执行层 (Execution Layer)**：
    
    -   **职责**：负责“跑代码”。管理 EVM、处理智能合约逻辑、管理账户状态、计算 Gas 费。
        
    -   **客户端**：如 Geth, Nethermind。
        
-   **共识层 (Consensus Layer)**：
    
    -   **职责**：负责“做决策”。管理 PoS 质押、验证者选举、确定哪个区块是合法的、惩罚恶意行为。
        
    -   **客户端**：如 Prysm, Lighthouse。
        
-   **桥梁：引擎 API (Engine API)**：
    
    -   两者不再是合在一个程序里的，而是通过 **Engine API** 进行内部通信。执行层负责打包出块，共识层负责给这个块“盖章”认可。
        

**4、 关键概念：客户端多样性**

教材还强调了**客户端多样性（Client Diversity）**的重要性。如果大家都用同一种客户端（如 Geth），一旦该代码有 Bug，整个网络就会瘫痪。因此，官方鼓励运行不同的客户端组合。

## **Becoming a Power User - Wallets, Mnemonics, Keypairs学习**

这个视频主要演示了如何从零开始设置以太坊钱包，并深入讲解了背后的安全逻辑。

### **1\. 钱包设置与安全常识 (Wallets & Security)**

-   **MetaMask 设置**：演示了安装 MetaMask 浏览器扩展的全过程。强调务必从官方渠道（[metamask.io](http://metamask.io)）下载，以防被钓鱼网站诈骗。
    
-   **助记词（Mnemonic/Seed Phrase）**：
    
    -   **主钥匙**：助记词（通常为 12 个单词）是钱包的“主钥匙”，拥有它就拥有了钱包里所有的资产。
        
    -   **存储建议**：永远不要截图或保存在联网设备上。建议写在纸上存放在安全处，或使用密码管理器。视频中演示了将助记词备份后，通过重新导入来验证账户恢复的过程。
        
-   **密码与私钥的区别**：MetaMask 的登录密码仅用于本地加密信息，保护设备不被他人随意开启；而助记词和私钥则是链上资产的真正控制权。
    

### **2\. 密钥对与数学底层 (Keypairs & Math)**

-   **无须许可的开户**：在以太坊开户不需要任何机构批准，本质上只是生成一个巨大的随机数（私钥）。基于 ECDSA（椭圆曲线数字签名算法），私钥推导出公钥，再推导出地址。
    
-   **随机性的威力**：视频解释了为什么别人几乎不可能猜中你的助记词。即使全世界的电脑运行一万年，撞对一个活跃账户的概率也微乎其微。
    
-   **确定性生成**：一个助记词可以通过不同的“索引”生成无数个地址（Account 1, Account 2...），这些地址在同一助记词下永远是固定且唯一的。
    

### **3\. 实战操作：测试网与区块浏览器 (Testnets & EtherScan)**

-   **测试网 (Testnets)**：为了不花真钱学习，可以使用 Sepolia、Goerli 或 Kovan（视频当时使用的测试网）。通过“水龙头 (Faucet)”获取免费的测试币来练习转账。
    
-   **区块浏览器 (EtherScan)**：强调 EtherScan 是“不偏不倚的第三方”，通过它可以查询任何交易的进度、Gas 费消耗以及账户余额，验证钱包显示的信息是否真实。
    
-   **不可逆转性**：一旦交易在链上被打包（Mined），就没有任何“客服”可以帮你追回资金。唯一的撤回机会是在交易还在内存池（Mempool）等待时，通过发送更高 Gas 的相同 Nonce 交易来覆盖它。
    

### **4\. 进阶安全：托管 vs 非托管 (Custodial vs Non-custodial)**

-   **所有权原则**：强调“非你的私钥，非你的资产 (Not your keys, not your coins)”。相比于交易所（托管），自己持有助记词（非托管）虽然责任更重，但真正拥有主权。
    
-   **多签与智能合约钱包**：针对大额资产，视频推荐了解 Gnosis Safe（现为 Safe）等智能合约钱包。通过多个人共同签名（如 2-of-3）来提升安全性，防止单点故障导致资产丢失。
    

## **Uniswap V2 源码深度学习**

在第一天掌握了 `x * y = k` 的宏观逻辑后，今天我正式进入 `UniswapV2Pair.sol` 的源码学习。今天，我通过剖析 `sync`、`skim` 以及 `swap` 函数的底层实现，深度拆解 Uniswap 如何在“信任最小化”的前提下，构建出极其高效的流动性与借贷闭环。

### **1\. Uniswap V2 的利润机制**

Uniswap V2 的交易手续费默认为 **0.3%**。这笔费用在交易发生时直接留在流动性池中，从而增加了 $k$ 值，使流动性提供者（LP）持有的份额增值。

-   **协议费开关：** 源码中设计了一个可选的“协议费”开关。
    
-   **分配逻辑：** 如果开关开启，0.3% 手续费中的 **1/6**（即总交易额的 0.05%）会拨给协议指定的地址（通常是团队或 DAO），剩余 5/6 归 LP 所有。
    
-   **计算方式：** 为了节省 Gas，协议费不是实时转账，而是在流动性发生变动（增减流动性）时，通过比较当前的 `k` 值与上次记录的 $k$ 值，利用几何平均数的差值来计算增发的 LP Token 数量。
    

### **2\. 核心底层函数：**`sync()` **与** `skim()`

这两个函数是处理池子余额与合约记录之间不一致情况的“调节器”。

-   `sync()`**（同步）：**
    
    -   **功能：** 将合约记录的 `reserve0` 和 `reserve1` 更新为当前合约地址在链上真实的代币余额。
        
    -   **场景：** 当有人向池子非法转账（非通过 `swap` 函数）导致余额溢出时，调用此函数可以纠正记录。
        
-   `skim()`**（强制提取）：**
    
    -   **功能：** 将池子中超出合约记录 `reserve` 的那部分多余代币，强制转账给调用者。
        
    -   **场景：** 这是一种保护机制，当某些代币因特殊机制导致余额激增时，用户可以提取这部分盈余，防止它们被锁死在公式里。
        

### **3\. 闪电贷实现的精确代码行**

在 Uniswap V2 中，闪电贷并不是一个独立的函数，而是集成在核心函数 `swap` 之中。

-   **关键位置：** 在 `UniswapV2Pair.sol` 的 `swap` 函数中。
    
-   **代码逻辑实现：**
    
    NaN.  **代币乐观转出：** 只要用户传入了 `amount0Out` 或 `amount1Out`，合约会**先执行转账**。
          
    NaN.  **触发回调：** 紧接着通过一行代码检查 `data` 参数是否为空。如果 `data.length > 0`，合约会调用接收方的回调接口 `IUniswapV2Callee(to).uniswapV2Call(...)`。
          
    NaN.  **余额检查：** 回调结束后，合约会立即执行著名的 `K` 值检查逻辑。如果在交易结束时，$k$ 值没有按照包含 0.3% 手续费后的预期增加，交易会直接 `revert`（回滚）。
          

### **4\. 额外学习：无偿损失**

无偿损失是 LP 面临的最核心风险。它并不是真正的“丢了钱”，而是**相对于“仅仅持有代币”的一种机会成本**。

-   **产生原因：** 当池子内两种代币的外部市场价格发生偏移时，套利者会进场利用 `x * y = k` 机制赚取差价，直到池内价格与外部一致。
    
-   **数学结果：** 只要价格发生变动（无论上涨还是下跌），池子中价值增加较快的那种代币会被套走，换成较便宜的那种。
    
-   **为什么叫“无偿”：** 因为如果价格最终回到了你提供流动性时的初始水平，损失就会消失。但如果价格一去不复返，在提取流动性时，这部分损失就会变成**永久性亏损**。
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->





## **Day 1 学习计划**

由于本人是研三电子信息专业应届，且研究生期间研究的主要方向是智能合约安全（偏字节码底层），对于web3相关知识（包括区块链网络运行的基本原理以及智能合约的执行底层逻辑）有较深的理解，同时本人对技术也更感兴趣，因此本人选择了`深度技术`赛道。

今天是我在这个训练营打卡的第一天，我的总体学习计划如下：

-   阅读Web3 实习手册[「入门导读」](https://web3intern.xyz/zh/blockchain-basic/)部分
    
-   学习《021学习以太坊》中的第一章
    
-   观看[**A Developer's Guide to Building on Ethereum**](https://www.youtube.com/watch?v=zuJ-elbo88E&list=PLJz1HruEnenAf80uOfDwBPqaliJkjKg69&index=1) - Intro
    
-   学习以太坊主流Defi协议`Uniswap V2`
    

## **Web3 实习手册阅读**

### **1\. 区块链基础概念：重构信任的底层逻辑**

本模块深入解析了区块链作为“去中心化分布式账本”的本质，重点在于理解它是如何解决信任问题的。

-   **核心特性：**
    
    -   **不可篡改性：** 通过哈希摘要将区块串联，修改历史数据的成本极高，几乎不可能实现。
        
    -   **公开透明与匿名：** 所有交易记录全网公开可查，但通过随机生成的钱包地址实现身份隐私。
        
    -   **分布式记账：** 全球多个节点共同记账并实时同步，消除了单点故障风险。
        
-   **核心组成：** 由“去中心化网络”和“区块链账本”组成，通过代币（如 BTC）激励矿工/验证者维持网络运行（挖矿/Gas 机制）。
    
-   **范式革命：** 对比了 Web2（平台垄断数据）、Web 3.0（语义网）和 Web3（用户拥有数据主权），强调 Web3 实现了从“租房”到“买地盖房”的数字所有权转变。
    

### **2\. 以太坊概览：可编程的世界计算机**

以太坊在区块链 1.0（货币属性）的基础上，通过引入智能合约开启了区块链 2.0 时代。

-   **智能合约与 EVM：** 智能合约是自动执行的代码，而 **EVM (以太坊虚拟机)** 是其执行引擎。这种“代码即法律”的机制使得复杂的 DeFi 和 NFT 应用成为可能。
    
-   **账户系统：** 分为由用户私钥控制的 **外部账户 (EOA)** 和由代码驱动的 **合约账户 (CA)**。理解两者交互是 DApp 开发的基础。
    
-   **Gas 模型：** 解释了 Gas 作为网络燃料的经济意义，包括基础费用（Base Fee）的销毁机制（EIP-1559）和小费（Tip）激励。
    
-   **升级演进：** 从 PoW 到更环保高效的 **PoS (权益证明)** 的合并 (The Merge)，以及通过 Layer 2（如 Rollups）和 EIP-4844（Blob 交易）实现扩容和降费的路线图。
    

### **3\. 行业赛道全览：Web3 的生态版图**

Web3 已从单一支付系统演变为多元生态，手册重点剖析了四大核心领域：

-   **DeFi (去中心化金融)：** 核心在于“无需准入”和“资产自托管”。
    
    -   **Uniswap：** 通过恒定乘积公式 (`x * y = k`) 实现自动定价的去中心化交易所。
        
    -   **Compound/MakerDAO：** 展示了超额抵押借贷和去中心化稳定币（DAI/USDS）的运行机制。
        
-   **NFT (非同质化代币)：** 实现了数字所有权的唯一性，代表案例包括先锋项目 CryptoPunks 和交易平台 OpenSea。
    
-   **DAO (去中心化自治组织)：** 探索社区驱动的治理模式，如支持公共物品建设的 **LXDAO**。
    
-   **MEME 与交叉创新：** 分析了文化溢价下的 MEME 币现象，以及 AI + Web3、模块化区块链等 2025 年新兴趋势。
    

### **4\. Web3 工作方式：远程协作与行业基因**

远程办公是 Web3 世界的生存法则，强调高效、异步且安全的协作习惯。

-   **必备工具箱：** 掌握社交媒体 (Twitter/Discord/Telegram)、资产管理 (MetaMask)、协作文档 (Notion)、代码托管 (GitHub) 及会议工具 (Zoom/Calendly)。
    
-   **远程协作素养：** 学习 OKR 目标管理、跨时区异步沟通技巧（超预期交付、埋点式复盘）以及如何防范日益猖獗的钓鱼和钓鱼诈骗。
    
-   **行业黑话 (Lingo)：** 熟练使用 **DYOR** (自行研究)、**FOMO** (害怕错过)、**WAGMI** (大家都会成功) 等文化语言，这是快速融入 Web3 社区的“门票”。
    

## **《021学习以太坊》第一章学习**

这本书第一章主要讲了三件事：

### **1\. 底层逻辑（区块链基础概念）**

-   **不只是账本**：它是一个去中心化的分布式系统，核心就是“不可篡改”和“所有权”。
    
-   **Web2 vs Web3**：Web2 是你租大公司的房子住（数据是人家的），Web3 是你自己买地盖房（数据所有权归你）。
    

### **2\. 以太坊运转原理**

-   **世界计算机**：它不只能转账，还能跑智能合约（Smart Contracts），就像一台自动售货机，代码写好了就自动执行。
    
-   **经济账 Gas**：干活得付钱，Base Fee 还会被销毁来让 ETH 更有价值。
    
-   **两种账户**：你用的钱包叫 EOA，存代码的叫 CA。
    

### **3\. web3行业赛道全览**

-   **DeFi 还是老大**：Uniswap 靠 `x*y=k` 自动定价，Compound 让你抵押借贷。
    
-   **NFT 和 DAO**：NFT 搞定数字资产的唯一性，DAO 则是大家凑在一起不归谁管、靠投票决定怎么干活的组织。
    

## **A Developer's Guide to Building on Ethereum - Intro学习**

这个视频强调了从 Web2 转型 Web3 的关键在于“先成为用户，再成为开发者”，通过为期四周的计划，从熟悉 MetaMask 和 DEX 等工具的“超级用户”，逐步晋升到掌握 Hardhat 和 Ethers.js 的专业工程师，最终目标是能够独立构建去中心化应用或从事高阶的合约安全审计（这也是我现在正在努力进军的方向）。

## **Uniswap V2 核心机制与安全分析**

在这部分的学习中，我主要深入研究了恒定乘积公式、滑点产生机制、闪电贷攻击场景以及 TWAP 预言机。因为在大致了解uniswap功能之后我认为这些维度对于理解 Uniswap 的自动化做市逻辑、价格发现机制以及协议的安全性防线至关重要。

### **1\. 恒定乘积公式**

Uniswap V2 的核心定价逻辑基于 **AMM (自动化做市商)** 模型中的恒定乘积公式。

-   **核心公式：** `x * y = k`
    
    -   `x`：池中代币 A 的当前数量。
        
    -   `y`：池中代币 B 的当前数量。
        
    -   `k`：常数乘积。在没有流动性增减的情况下，`k`值保持不变。
        
-   **价格滑点 (Slippage) 产生机制：**
    
    假设用户想用 `Δx` 个代币 A 购买代币 B。为了保持 `k` 不变，池子需要给出 `Δy` 个代币 B，满足： `(x + Δx) * (y - Δy) = k` 由此可解出 `Δy = (y * Δx) / (x + Δx)`。 **滑点**体现在：你投入的 `Δx` 越多，公式中分母 `(x + Δx)` 越大，你单位 `Δx` 能换到的 `Δy` 就越少。也就是说，你的大额交易本身显著地改变了池子的资产比率，从而推动了价格。这种因交易规模导致的执行价格与预期价格的偏差就是滑点。
    

* * *

### **2\. 闪电贷与价格操纵攻击**

闪电贷允许攻击者在无需抵押的情况下瞬间获取巨额资本，常被用于操纵低深度的 Uniswap 池。

-   **典型攻击流程：**
    
    NaN.  **借款**：通过闪电贷借入海量代币 A。
          
    NaN.  **砸盘** ：在目标 Uniswap V2 池中强行将绝大部分 A 换成 B。由于交易量巨大，根据恒定乘积公式，A 的单价会瞬间暴跌。
          
    NaN.  **利用预言机漏洞**：依赖该池作为“实时价格预言机”的其他协议（如借贷协议）会读取到该错误低价。攻击者以此低价作为参考，利用极少的抵押品借出远超正常价值的资产。
          
    NaN.  **获利与还款**：由于价格被压低，攻击者只需用少量 B 买回 A 即可归还闪电贷，剩下的抵押资产即为纯利润。
          

* * *

### **3\. 时间加权平均价格 (TWAP) 预言机**

为了防御瞬时价格操纵，Uniswap V2 引入了 TWAP 机制。

-   **工作原理：** V2 在每个区块开始时记录累积价格 `priceCumulative`（价格 / 时间）。 `TWAP = (priceCumulative_t2 - priceCumulative_t1) / (t2 - t1)`
    
-   **操纵方式与风险评估：**
    
    NaN.  **短期高成本操纵**：在一个区块内强行拉抬价格。虽然会对 TWAP 产生影响，但如果时间窗口 `(t2 - t1)` 足够大，单区块的波动会被稀释，攻击成本极高。
          
    NaN.  **低成本长期操纵**：若协议错误地设置了过短的时间窗口（如仅 1 个区块），攻击成本会降低。
          
    NaN.  **安全实践**：常见的防御方式是设置较长的时间窗口（如 30 分钟），因为维持 30 分钟的虚假价格需要持续对抗全市场的套利者，在经济上是不可行的。
          
    NaN.  **数据源攻击**：若选择流动性极低的交易对作为预言机源，即使有 TWAP，操纵成本依然较低。
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
