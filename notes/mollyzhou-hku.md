---
timezone: UTC+8
---

# mollyzhou-hku

**GitHub ID:** mollyzhou-hku

**Telegram:** 

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->
今天完成了：1. 工具安装；2. 阅读021 学习以太坊第 1&2 章 不太理解的概念用ai询问重新理解了一下，问答笔记如下。

反思：快速浏览了一下web3实习手册的以太坊概览部分，读下来觉得更适合技术小白读，思维更连贯，明天结合手册内容再理解一下以太坊的发展和生态。

## 从pow到pos

这一历史性事件被称为“合并”（The Merge）**，发生于2022年9月。简单来说，这是以太坊（Ethereum）将其底层的“共识机制”从**工作量证明（PoW）**切换到了**权益证明（PoS）。

**从 PoW 到 PoS，意味着以太坊从“拼算力、拼能源”的野蛮生长阶段，进入了“拼资本、重效率”的金融化阶段。** 它牺牲了一点点纯粹的去中心化原教旨主义（因为富人可能更富），换取了极致的能源效率、更健康的经济模型以及未来的可扩展性。

详细解读：

* * *

### 一、 从 PoW 到 PoS 是什么意思？

这个转变的核心在于“谁有资格记账（打包区块）并获得奖励”的规则变了。

1.  过去：PoW（工作量证明 - Proof of Work）
    

-   **也就是“挖矿”。**
    
-   **机制：** 全球的矿工通过购买昂贵的硬件（显卡/矿机）并消耗大量电力来解复杂的数学题。谁算得快，谁就有权记录下一笔交易，并获得以太坊奖励。
    
-   **比喻：** 就像是一群人通过举重比赛来决定谁有话语权，谁力气大（算力高），谁就赢。
    
-   **成本：** 主要成本是**硬件**和**电力**。
    

2.  现在：PoS（权益证明 - Proof of Stake）
    

-   **也就是“质押”。**
    
-   **机制：** 不需要显卡挖矿了。用户通过质押（锁定）一定数量的以太坊（32 ETH）成为验证者。系统会随机抽选验证者来打包交易。如果你表现好，获得奖励；如果你作恶（比如乱记账），你的质押金会被没收（Slashing）。
    
-   **比喻：** 就像是公司的股东大会，你持有的股份（质押的币）作为保证金，让你获得记账的权利。
    
-   **成本：** 主要成本是**资金占用**（资本成本）。
    

* * *

### 二、 这个转变有什么意义？

这次升级对以太坊乃至整个区块链行业的影响是深远的，主要体现在以下四个方面：

1.  能源消耗断崖式下跌（最直接的影响）
    

-   **环保：** PoW 挖矿需要消耗极高的电力（曾相当于整个芬兰的耗电量）。转为 PoS 后，不再需要矿机空转计算，**以太坊的能源消耗减少了约 99.95%**。
    
-   **意义：** 这消除了主流社会和环保机构对以太坊“不环保”的诟病，为许多受限于 ESG（环境、社会和治理）标准的机构投资者入场扫清了障碍。
    

2.  经济模型的改变（通缩效应）
    

-   **减产：** 在 PoW 时代，为了激励矿工支付电费，系统每天需要发行约 13,000 ETH。在 PoS 时代，只需支付质押利息，日发行量降至约 1,600 ETH，**发行量减少了约 90%**（常被称为“三重减半”）。
    
-   **超声波货币（Ultrasound Money）：** 配合 EIP-1559 的销毁机制（每笔交易都会销毁一部分 ETH），在链上交易活跃时，**销毁的 ETH 往往多于新发行的 ETH**，导致以太坊进入通缩状态（总量越来越少），这对币价长期支撑有重要意义。
    

3.  安全性的底层逻辑变化
    

-   **攻击成本更高：** 在 PoW 下，攻击者需要控制 51% 的算力（需要购买海量硬件和电力）。在 PoS 下，攻击者需要控制 51% 的质押币。以太坊目前的市值极高，要在市场上买下超过一半的质押量几乎是不可能的，且一旦攻击失败，攻击者的钱会被直接罚没。
    
-   **更易恢复：** 就算遭受攻击，PoS 社区可以通过分叉将攻击者的资金通过代码层面的“共识”直接销毁，这在 PoW 中是很难做到的。
    

4.  为未来的扩容铺路
    

-   **需要澄清的误区：** **PoS 并没有直接让以太坊交易变快，也没有直接降低 Gas 费（手续费）。**
    
-   **真实意义：** PoS 是后续扩容方案（如分片技术 Sharding）的基础。虽然它本身不降费，但它让网络架构变得更适合承载 Layer 2（二层网络），最终通过二层网络来实现低手续费和高速度。
    

* * *

## 理解Gas

理解 **Gas 费（Gas Fee）**，最形象的方式是把它想象成**你在以太坊这个“世界计算机”上租用算力时需要支付的“燃料费”**。

以太坊不像互联网那样免费，它上面的每一步操作（转账、买 NFT、运行合约）都需要消耗全网节点的计算资源。为了防止有人滥用资源（比如发送无限循环的代码），你需要为你占用的资源付费。

现在的 Gas 费计算机制（基于 EIP-1559 升级后）可以拆解为以下一个公式：

Gas总费用 = Gas数量 (Limit)\* (基础费 (Base) + 小费 (Priority))

我们可以用“打车”**或者**“叫外卖”的例子来完美解释这个公式里的三个核心变量：

* * *

### Gas Limit（Gas 数量）：相当于“路程距离”

-   **含义：** 这笔交易需要消耗多少计算量。
    
-   **特点：** 这是由**任务本身的复杂度**决定的，几乎是固定的。
    
    -   **简单转账：** 固定消耗 **21,000** 个 Gas 单位（就像去家门口的超市，路程短）。
        
    -   **复杂操作（如 Uniswap 交易或买 NFT）：** 可能消耗 **150,000+** 个 Gas 单位（就像跨城搬家，路程远，还要搬重物）。
        
-   **注意：** 如果你设置的 Limit 太低（比如车油没加够），交易会走到一半“没油了”（Out of Gas），交易失败，但你的钱（油费）依然会被扣掉，因为矿工已经为你干活了。
    

### Base Fee（基础费）：相当于“平台起步价/动态路费”

-   **含义：** 这是网络根据当前拥堵情况，自动设定的**最低票价**。
    
-   **去向：** 这部分钱**直接销毁（Burned）**，没人赚走。这就是为什么大家说以太坊会“通缩”。
    
-   **运作机制：**
    
    -   如果现在的区块（Block）很挤（想交易的人多），系统会自动调高 Base Fee，劝退一部分人。
        
    -   如果区块很空，Base Fee 就会自动下降。
        

### Priority Fee（优先费/小费）：相当于“给司机的红包”

-   **含义：** 这是你为了让验证者（Validator）优先打包你的交易，额外支付的钱。
    
-   **去向：** 这部分钱进了验证者（质押用户）的口袋。
    
-   **运作机制：**
    
    -   **平时：** 给个象征性的 1-2 Gwei 就行。
        
    -   **抢购时（Gas War）：** 比如某个热门 NFT 发售，几万人同时抢。这时候 Base Fee 大家都一样，谁给的“小费”高，验证者就先让谁上车。这时候 Gas 费会飙升到天价。
        

* * *

### 举个实际计算的例子

假设你要给朋友转一笔 ETH：

1.  **路程（Gas Limit）：** 转账是标准操作，固定 **21,000** 单位。
    
2.  **当前路况（Base Fee）：** 网络比较空闲，系统定价 **10 Gwei**。
    
3.  **小费（Priority Fee）：** 你不着急，给 **1 Gwei**。
    
    1.  计算：$$21,000 \\times (10 + 1) = 231,000 \\text{ Gwei}$$
        
    2.  注：1 Gwei = 0.000000001 ETH。
        

所以总费用是 0.000231 ETH。如果 ETH 价格是 3000 美元，这笔转账大概花 0.7 美元。

* * *

### 为什么 Gas 费有时候会贵得离谱？

你可能听过有人转账几十块钱，却要付几百块 Gas 费，原因通常是：

1.  **区块空间有限：** 以太坊每个区块只能容纳有限的交易（就像公交车座位有限）。
    
2.  **竞价机制：** 当成千上万个复杂的 DeFi 交易和 NFT 铸造请求同时涌入时，大家为了挤上这班车，疯狂提高“小费”。
    
3.  **币价波动：** 当 ETH 价格暴跌或暴涨时，所有人都在链上疯狂操作（抄底或逃顶），导致网络瞬间拥堵。
    

### 总结与省钱小贴士

-   **机制本质：** **Gas 费 = 工作量 (Limit) × \[ 系统定价 (Base) + 竞价红包 (Priority) \]**。
    
-   **怎么省钱？**
    
    -   **避开高峰：** 亚洲时间的周末或是上午通常 Gas 较低；美国时间的白天（亚洲深夜）通常是高峰期。
        
    -   **使用 Layer 2 (L2)：** 比如 Arbitrum, Optimism, Base 等。它们的原理是把几百笔交易打包成一笔发到以太坊主网，平摊下来，**手续费通常只有主网的 1/10 甚至 1/50**。
        

## Danksharding，Proto-Danksharding，Dencun 升级

这三个概念其实描述的是以太坊**同一个宏大叙事中的不同阶段**，核心目标只有一个：**让 Layer 2（二层网络）的手续费降到极低，低到可以忽略不计。**

### 总结：它们如何协作？

我们可以用一个连贯的故事串起来：

1.  **分片 (Sharding)** 是早期的梦想，想把以太坊劈成很多份，但太难了，放弃。
    
2.  于是换了思路，决定搞 **Danksharding**，只扩容数据存储，不扩容计算。
    
3.  为了实现这个大目标，先搞了个**先行版**，叫做 **Proto-Danksharding (EIP-4844)**，它发明了便宜的临时存储空间 **Blob**。
    
4.  最终，通过 **Dencun 升级** 这个具体的更新动作，把上述功能实装上线了。
    

### 这一套组合拳的实际作用

1.  **L2 手续费跳水：** 升级后，Arbitrum, Optimism, Base 等 L2 网络的转账费用从之前的 $0.1 - $0.5 降到了 **$0.01 甚至更低**。
    
2.  **以太坊角色的转变：** 以太坊主网越来越不像一个“计算平台”，而更像一个\*\*“安全锚点 + 数据公告板”\*\*。用户在 L2 玩耍，L2 把数据定期贴到 L1 的 Blob 公告板上，既安全又便宜。
    

* * *

### 分片 (Sharding) vs. Danksharding

这代表了以太坊扩容**战略方向的根本性转变**。

**分片 (Sharding)：被放弃的旧路线**

-   **原始构想：** 也就是传统的“数据库分片”。试图将以太坊这条主链拆分成 64 条“小链”（Shards）。每条小链都有自己的一套验证者，并行处理交易。
    
-   **比喻：** 一条单车道堵车，于是决定把这条路拆成 64 条并行的车道，每条车道都能跑车。
    
-   **现状：** **已放弃**。因为技术太复杂，且存在安全隐患（攻击单个小分片比攻击主链容易）。
    

**Danksharding：现行的新路线**

-   **核心逻辑：** 开发者意识到，Layer 2 (L2) 已经能很好地处理“计算和执行”了，以太坊主网不需要自己去跑每一笔交易，只需要**作为一个巨大的、廉价的数据存储层**，帮 L2 存数据就行。
    
-   **改变：** 不再把网络拆成 64 个处理交易的小链，而是**只把“数据存储能力”扩大**。
    
-   **比喻：** 不扩建车道了，而是把跑在路上的私家车（交易）都赶到空中巴士（Layer 2）上去，以太坊主路只负责运送这些巴士产生的“行车记录仪数据”（大容量数据块）。
    

* * *

### Proto-Danksharding (EIP-4844)

这是通往终极 Danksharding 的**第一步（原型机）**。

-   **名字由来：** "Proto" 意为原型，Danksharding 是以研究员 Dankrad Feist 命名的。
    
-   **核心创新：引入了“Blob”（二进制大对象）。**
    
    -   **以前 (Legacy)：** L2 把交易数据存回以太坊主网时，用的是 `Calldata`。这玩意儿很贵，因为它是永久存储的，所有节点都要永久记录它。
        
    -   **现在 (Blob)：** 引入了一种新的数据格式叫 `Blob`。它像是一个\*\*“外挂的数据包”\*\*，挂在以太坊区块上。
        
    -   **关键点：** Blob 里的数据是**临时的**（大约只存 18 天）。一旦过期，节点就会自动删除。
        
-   **为什么这么做？** L2 的数据主要是为了给挑战者验证有没有作恶用的（防伪验证），只要过了验证期（通常 7 天），这堆数据就没用了。既然没用，何必花大价钱永久存储？
    
-   **意义：** **把“永久买房”变成了“短期租房”，成本直接暴跌 90% 以上。**
    

* * *

### Dencun 升级 (Dencun Upgrade)

这是一个**具体的时间点和事件**。

-   **是什么：** 這是 2024 年 3 月发生的一次以太坊**硬分叉（系统大更新）**。
    
-   **名字由来：** `Deneb`（共识层升级代号） + `Cancun`（执行层升级代号，即坎昆升级） = **Dencun**。
    
-   **关系：** **Proto-Danksharding (EIP-4844) 是这次升级中包含的最核心功能。** 也就是说，Dencun 升级这辆“卡车”，把 Proto-Danksharding 这个“货物”运送到了以太坊网络中并激活了。
    

* * *
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
