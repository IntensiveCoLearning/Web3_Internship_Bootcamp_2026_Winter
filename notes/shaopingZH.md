---
timezone: UTC+8
---

# shaopingZH

**GitHub ID:** shaopingZH

**Telegram:** @ZHANGSHAOPING

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-17
<!-- DAILY_CHECKIN_2026-01-17_START -->
关于 **ERC721 数据存储逻辑与 Gas 权衡** 的深度知识点笔记

### 知识点：ERC721 的“单向映射”与 Enumerable 的代价

**1\. 核心矛盾：Mapping 的“失明”**

-   **现象：** 在标准的 ERC721 代码中，核心数据结构是 mapping(uint256 => address)。
    
-   **本质：** 这是一种**单向查找**机制。
    
    -   **能做：** 拿着 TokenID 查主人（比如：查 #100 号是谁的）。
        
    -   **不能做：** 拿着主人查 TokenID（比如：查 Alice 名下所有的 NFT）。
        
-   **原因：** Solidity 中的 Mapping 就像一个没有目录的巨大仓库，它不记录“列表”。如果要强制查询某人名下的所有币，链上必须遍历所有 ID，这会导致 Gas 费爆炸甚至超出区块上限。
    

**2\. 解决方案：ERC721Enumerable**

-   **定义：** 这是一个官方扩展标准，它额外增加了数组（Array）来记录 Token 的索引。
    
-   **功能：** 开启后，合约可以轻松返回 tokenOfOwnerByIndex，让前端直接读取用户的 NFT 列表。
    

**3\. 关键权衡 (The Trade-off)**  
这是新手进阶必须理解的“守恒定律”：**查询越方便，写入越昂贵。**

-   **使用 Enumerable：** 读取数据很爽，但在执行 mint 或 transfer 时，合约需要同时修改 Mapping 和 Array，导致 **Gas 费大幅上升**（可能贵 30%-50%）。
    
-   **不使用 Enumerable：** 写入操作（Mint/转账）很便宜，但前端无法直接问合约要列表。
    
    -   _替代方案：_ 依赖链下索引工具（如 **The Graph** 或 Alchemy API）来帮用户整理数据，而不是把数据“死记”在链上。
        

* * *

**总结：**  
区块链不仅是存数据的，更是**计费**的。在写合约时，如果不是必须在链上遍历数据，尽量不要用 Enumerable，把复杂的查询压力甩给链下（Off-chain），把最贵的链上资源留给核心逻辑，这才是“省 Gas”的高级心法。
<!-- DAILY_CHECKIN_2026-01-17_END -->

# 2026-01-16
<!-- DAILY_CHECKIN_2026-01-16_START -->

今天开始挑战这个 Challenge 0，最多的感觉就是终于把“网页”和“区块链”给连起来了，以前看智能合约代码觉得挺枯燥的，然后当我真的启动了前端页面，点击按钮，看着小狐狸钱包弹出来让我签名，接着过了一会儿页面上真的刷出来一张我的 NFT 卡片，我才突然反应过来，原来 DApp 的逻辑是这样跑通的，普通网站点个按钮可能就是改改数据库，而在这里每一次点击其实都是在向区块链发号施令，只有亲眼看到那个交互流程跑通了，才明白为什么 Web3 的开发需要把前端和合约结合得这么紧密。做完之后我就在想，我现在是在这个练习自带的网页上看到我的 NFT，那如果我把它部署到真正的公链上，像手机钱包能自动识别出来我刚发的这个币吗，还是说我得去钱包里手动添加合约地址，它才知道这里有个新资产？还有就是，我现在在本地测试，代码写错了可以随便改并重新部署，可是如果我真的把它发布到主网上去了，突然发现 NFT 的名字拼错了或者逻辑写得不对，那还能像平时做网站那样在后台修一下 Bug 吗，还是说一旦上链，这个错误就永远刻在那儿改不了了？
<!-- DAILY_CHECKIN_2026-01-16_END -->

# 2026-01-15
<!-- DAILY_CHECKIN_2026-01-15_START -->


今天跟着做 Simple NFT 的挑战，感觉真的挺不一样的。以前总觉得发 NFT 是个很复杂的技术活，然后自己真的去 import 了代码库，写了那个 mint 函数，才发现原来就是在搭积木，只要符合标准，几行代码就能把东西造出来。接着我在控制台看到那个交易成功的哈希值，还有 Gas 费扣掉的过程，有点明白之前书里说的“代码即资产”是啥意思。原来就是我看得到摸得着的一段逻辑。做完这些操作之后，我就在想两个问题：一个是，我现在发的这个 NFT，图片虽然能显示，但要是存图片的那个普通网站挂了，这 NFT 岂不是就废了？这才让我明白为什么得用 IPFS。另一个是，现在的代码是谁都能免费领，那如果我想搞个限量版或者收钱才能领，是不是就得在代码里加个“如果不满足条件就报错”的命令？
<!-- DAILY_CHECKIN_2026-01-15_END -->

# 2026-01-14
<!-- DAILY_CHECKIN_2026-01-14_START -->



今天还是在看Web3 实习手册[「安全与合规」](https://web3intern.xyz/zh/security/)部分和 021 学习以太坊第 3&4 章

第一个是对**安全**有了更具体的概念：它不只是保管好私钥那么简单，而是通过合规（KYC）和防范机制（反女巫、多签）来建立信任。在没有法律托底的链上世界，理解规则和代码逻辑，才是保护资产的唯一方式。

然后，我把零散的技术名词串联起来了。前面看 ENS、NFT、ERC标准和 IPFS 都是分开的，现在才明白它们其实是一套组合拳：标准定义了资产是什么，IPFS 确保存储了什么，ENS 解决了怎么找到它。这些基础设施共同构成了我在链上的“所有权”。

在然后是，关于 Gas 机制、L2 和交易处理的学习，还是有搞不懂的地方，明天再看看吧，或许有新发现！！
<!-- DAILY_CHECKIN_2026-01-14_END -->

# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->




通过《安全与合规》的学习让我弄明白了 Web3 这种“自己负责自己资产”的核心逻辑，特别是知道了私钥保护和授权管理是防范风险的第一步。了解到了以太坊上不同标准的作用，就像 ENS 是为了让地址好记，ERC20 和 ERC721 区分了普通代币和独一无二的 NFT，而 IPFS 则是为了保证这些资产的数据不丢失。比较实用的是学会了怎么看 Gas 费和处理交易卡死的问题，然后明白了多签钱包是团队管理的保险，而 L2 和借贷协议则是提高资金效率的进阶，这些知识让我知道链上操作的每一步底层在发生什么、风险在哪里都有了大概的理解。
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->





今天看了021 学习以太坊第 1&2 章，觉得Web3 的本质是把，控制权真正还给用户：通过助记词掌控自己的钱包，在以太坊这条全世界共享的去中心化计算机上运行智能合约，自由交换资产、参与 dApp，而不再依赖中心化平台。钱包（尤其是助记词）就是 Web3 世界的起点，它既是身份证，也是银行卡，更是通往所有权利与风险的唯一钥匙。学会安全保管助记词、理解 Gas 与交易、初步认识 Uniswap 这样的 AMM 机制，就是迈出 Web3 第一步的关键。
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
