---
timezone: UTC+8
---

# P_D

**GitHub ID:** Buminglang

**Telegram:** @Brighton040

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-22
<!-- DAILY_CHECKIN_2026-01-22_START -->
1.  智能合约
    
    1.  **智能合约的定义：住在账本里的“代码合同”**
        
        **智能合约**是部署在以太坊区块链上的一段**程序代码**加一份**持久状态（数据）**。
        
        -   **通俗理解**：它就像一个运行在区块链上的\*\*“全自动机器人合同”\*\*。只要事先写好的条件被满足，它就会百分之百地按照规则自动执行，不需要任何人工干预。
            
        -   **物理形式**：它驻留在以太坊的一个特定地址上，只有当你给它发送交易（触发它）时，它才会开始干活。
            
    2.  **为什么需要它？—— 解决“赖账”问题**
        
        在传统的世界里，如果两个人打赌，赢家可能面临输家不肯给钱的风险（即信任问题）。
        
        -   **传统方案**：找一个共同的朋友当见证人，但见证人也可能跑路或被收买。
            
        -   **智能合约方案**：就像一台\*\*“数字自动售货机”**。你投入正确的“钱”（ETH或代币），按下按钮（调用函数），机器就必须吐出商品（执行逻辑），这个过程**不依赖任何人的信用\*\*，只认代码规则。
            
    3.  **智能合约的五大超级能力**
        
        -   自动执行，无需中介
            
        -   结果可预测（代码即法律）
            
        -   不可篡改性
            
        -   公开记录与可审计性
            
            -   合约的所有调用记录、资产转移、事件日志都是**透明上链**的。
                
            -   **作用**：任何人都可以通过区块浏览器查看合约以前做了什么，资金流向了哪里。这种高度的透明性使得审计和风控变得非常简单。
                
        -   假名制与隐私
            
            -   以太坊是匿名网络，交易绑定的是**地址**而不是真实姓名。
                
            -   这被称为\*\*“假名制（Pseudonymous）”\*\*而非完全匿名。因为所有记录公开，只要通过技术手段将地址与现实身份关联，你的所有行为都会被追踪。因此，真正的隐私通常需要额外的隐私协议设计。
                
        
        **核心名词术语解释：**
        
        -   **尼克·萨博 (Nick Szabo)**：他在1994年首次提出了“智能合约”这个术语，是以太坊智能合约思想的先驱。
            
        -   **持久状态 (Persistent State)**：指合约里记住的数据（如余额、游戏等级），这些数据会一直存在账本里，直到被代码修改。
            
        -   **确定性 (Deterministic)**：指相同的输入在任何节点上运行，都必须得出完全相同的结果。
            
        -   **代理模式 (Proxy Pattern)**：一种让“写死的合约”实现升级的方法，通过更换后台逻辑合约但不改变前端地址来实现。
            
        -   **源码验证 (Source Verification)**：将你写的代码公开给全网检查，证明它和链上运行的字节码是一模一样的，从而建立信任。
            
2.  **Solidity 语言特性与优势**。
    
    1.  **原生契合机器人大脑 —— EVM 架构适配**
        
        **Solidity** 是专门为\*\*以太坊虚拟机（EVM）\*\*设计的语言。
        
        -   **解释**：以太坊有一个“大脑”叫 EVM，而 Solidity 写出来的代码可以被直接翻译成这个大脑能听懂的**机器码（字节码）**。
            
        -   **优势**：它能非常高效地管理机器人的**存储空间（Storage）**、计算**油费（Gas）办事日志（事件）**。
            
    2.  **易学且功能强大 —— 面向对象特性**
        
        -   **静态类型**：这意味着你在写代码时，必须给每个数据贴好“标签”（比如：这是一个数字，那是一个地址），这能减少出错的概率。
            
        -   **面向对象**：它像拼积木一样，支持**继承**和**库**。你可以把别人写好的、安全的“代码积木”拿过来直接用，而不需要从零开始造轮子。
            
    3.  **丰富的“工具箱” —— 生态系统支持**
        
        **Solidity** 拥有目前区块链世界里最完整的**开发者工具箱**。
        
        -   **框架工具**：比如 **Hardhat** 和 **Foundry**，它们像是一套全自动化的实验台，帮你在把代码发给机器人之前进行各种模拟测试。
            
        -   **标准库**：比如 **OpenZeppelin**，它提供了一套被专家检查过很多次的、安全的“合同模板”（如代币标准），直接调用这些模板能大幅降低被黑客攻击的风险。
            
    4.  **自动查错的“安全阀门” —— 算术溢出检查**
        
        在 **Solidity 0.8.0** 版本之后，它内置了一个非常厉害的**安全机制**。
        
        -   **名词解释——溢出检查（Checked Arithmetic）**：以前，如果一个数字加得太大超过了格子的容量，它会突然变回 0（就像时钟从 23:59 变成 00:00），这会导致很多安全漏洞。现在的 Solidity 只要发现数字变动不正常，就会**自动中止程序并回滚**，保护资金安全。
            
    5.  **无所不能的“全才” —— 图灵完备性**
        
        **Solidity** 是一门\*\*图灵完备（Turing-complete）\*\*的语言。
        
        -   **解释**：只要你给足“油费（Gas）”，它可以实现几乎任何复杂的计算逻辑。
            
        -   **应用**：正因如此，它才能支撑起**去中心化金融（DeFi）**、\*\*数字艺术品（NFT）**和**自治组织（DAO）\*\*等各种神奇的应用场景。
            
    6.  **统一的“行业标准” —— ERC 标准与库**
        
        为了让不同的机器人之间能互相理解，开发者们约定了一套**通用规则（ERC 标准）**。
        
        -   **ERC-20**：这是“游戏金币”的标准，让所有的代币都能用同一种方式转账。
            
        -   **ERC-721**：这是“独特卡片”的标准，用于证明你拥有那个唯一的 NFT。
            
        -   这些标准大多都是用 Solidity 编写并推广的，这让 Solidity 成为了整个 Web3 世界的**通用语言**。
            
3.  **智能合约在“编译”时会产生的内容**
    
    以下是编译后生成的几个核心产物：
    
    1.  **字节码 (Bytecode) —— 机器人的“内部指令集”**
        
        -   **解释**：这是智能合约的核心，是**以太坊虚拟机（EVM）能够直接识别并执行的低级机器码**，通常表现为一串十六进制数字。
            
        -   **拆分理解**：
            
            -   **创建字节码 (Creation Bytecode)**：这包含了“盖房子”的逻辑（构造函数），只在部署合约的那一刻运行一次，负责把机器人组装好。
                
            -   **运行时字节码 (Runtime Bytecode)**：这是机器人组装好后，**真正留在区块链地址上的核心逻辑**。之后每次有人点按钮，运行的都是这段代码。
                
    2.  **ABI (应用二进制接口) —— 机器人的“交互说明书”**
        
        -   **解释**：这是一个 **JSON 格式的文档**，详细描述了合约中所有可以被外部调用的**函数、参数和事件**。
            
        -   **作用**：外部程序（如手机钱包、网页前端）并不知道机器人内部的 0 和 1 代表什么，它们必须通过 ABI 才能知道“点哪个按钮是转账”、“点哪个按钮是查余额”。
            
        -   **比喻**：它就像是自动售货机外壳上的\*\*“操作面板”或“菜单”\*\*，告诉顾客每一个按钮对应的功能和需要投多少币。
            
    3.  **元数据 (Metadata) —— 机器人的“身份身份证”**
        
        -   **解释**：这是一个 JSON 文件，记录了关于合约的**所有后台背景信息**，包括编译器版本、源代码的哈希值、编译设置以及 ABI。
            
        -   **作用**：它主要用于**源码验证**。当你在区块浏览器上看到一个合约显示“已验证”，就是因为浏览器通过元数据确认了链上的字节码确实是由某份源代码编译出来的。
            
        -   **比喻**：它就像是一份\*\*“出厂合格证”或“零件清单”\*\*，证明这个机器人的来历是清清白白的，没有被偷偷改过零件。
            
    4.  **AST (抽象语法树) —— 机器人的“逻辑骨架图”**
        
        -   **解释**：在翻译过程中，编译器会先把你的源代码拆解成一个**树状的结构**，分析每一句话的主谓宾和逻辑关系。
            
        -   **作用**：它主要供编译器内部使用，或者由**安全审计工具**（如 Slither）用来检查代码逻辑里有没有藏着漏洞。
            
        -   **比喻**：它就像是机器人的\*\*“逻辑结构图”\*\*，把复杂的句子拆成了最简单的树枝和叶子，方便医生（审计员）检查身体。
            
    5.  **源映射 (Source Map) —— 机器人的“反向导航图”**
        
        -   **解释**：它建立了**字节码指令与源代码行数之间的一一对应关系**。
            
        -   **作用**：当机器人干活报错时，开发者可以通过这张图立刻定位到：是你在源码里的**哪一行代码**写错了。
            
        -   **比喻**：它就像是一张\*\*“反向地图”\*\*。当你在迷宫（字节码）里摔倒了，它可以立刻告诉你这个位置对应着设计图上的哪一个房间。
            
    6.  **Assembly (汇编) 与 Yul IR —— 机器人的“中间语言”**
        
        -   **解释**：**Assembly** 是比字节码稍微好懂一点的操作码序列（Opcode）；**Yul** 是 Solidity 官方的一种中间语言，用于在翻译过程中做最后的效果优化。
            
        -   **作用**：它们让编译器能写出\*\*更省钱（省 Gas）\*\*的指令。开发者也可以通过手动写 Yul 来实现一些极端的性能优化。
            
        -   **比喻**：它就像是翻译过程中的\*\*“草稿纸”\*\*。在定稿变成 0 和 1 之前，编译器先在草稿纸上把逻辑理得更顺溜、更高效
            
    
    **总结笔记：**
    
    | 产物名称 | 技术本质 | 形象比喻 | 谁在用它 |
    | --- | --- | --- | --- |
    | Bytecode | 二进制机器码 | 机器人的电流脉冲 | 区块链（EVM） |
    | ABI | JSON 接口描述 | 自动售货机面板 | 前端网页和钱包 |
    | Metadata | 编译配置信息 | 出厂合格证 | 验证平台和浏览器 |
    | AST | 结构化树状图 | 逻辑骨架图 | 安全审计工具 |
    | Source Map | 指令对应关系图 | 反向导航图 | 开发者调试工具 |
    
    **核心结论**：智能合约写完后，通过“编译”会产生一套完整的工具包。**字节码负责执行，ABI 负责沟通，元数据负责证明清白，源映射负责修 Bug**。
    
4.  **部署合约：地址与 ABI 获取**
    
    在智能合约写好并翻译成机器语言（编译）后，下一步就是把它放上以太坊这台“世界计算机”。这个过程叫作**部署**。部署完成后，我们会得到两个非常关键的东西，就像是新房子的“门牌号”和“使用说明书”。
    
    1.  **合约地址（Contract Address）—— 机器人的“门牌号”**
        
        当你成功把合约部署到区块链上后，系统会自动分配一个**合约地址**。
        
        -   **它的意义**：这是智能合约在区块链上的**唯一身份证号**。
            
        -   **它的作用**：如果你想找这个机器人办事（比如存钱、换币或查询数据），你必须通过这个地址才能找到它。
            
        -   **形象理解**：就像你在城市里盖了一座自动售货机，政府会给你一个准确的**街道地址**，别人看着地址才能过来买饮料。
            
    2.  **ABI（应用二进制接口）—— 机器人的“交互说明书”**
        
        虽然名字听起来很复杂，但 **ABI** 其实是一个 **JSON 格式**的文本文件，它在**编译阶段**就已经生成了。
        
        -   **它的意义**：它详细描述了合约里有哪些按钮可以点、点完后机器人会说什么话。
            
        -   **它的作用**：手机钱包或前端网页看不懂区块链上的 0 和 1，它们需要靠 ABI 这份“翻译说明书”来正确地给机器人下达指令。
            
        -   **形象理解**：它就像是自动售货机外壳上的**操作面板**。它告诉你：按蓝色按钮是买水，按红色按钮是退币。
            
    3.  **部署的完整流程**
        
        现在主流的开发工具（如 Hardhat 或 Foundry）会帮你自动化完成这些步骤：
        
        -   **本地编译**：得到机器码（Bytecode）和说明书（ABI）。
            
        -   **发送交易**：通过钱包或脚本把机器码发给区块链。
            
        -   **获取结果**：部署成功后，工具会返回一串**交易哈希**（办事流水号）和最终生成的**合约地址**。
            
    4.  **机器人的“内部零件”（合约常见组件）**
        
        为了让这个机器人能干活，它身体里通常装有这些东西：
        
        -   **状态变量 (State Variables)**：机器人的**永久记忆**，比如谁在它这里存了多少钱，这些数据会永远记在账本里。
            
        -   **函数 (Functions)**：机器人会做的**动作**，比如“转账”、“存钱”或“修改名字”。
            
        -   **事件 (Events)**：机器人的**广播喇叭**，每当它办完一件事，就会大喊一声，让外面的网页和钱包知道进度。
            
        -   **构造函数 (Constructor)**：机器人的**出生设置**，只在部署那一刻运行一次，用来设置初始参数。
            
        -   **修饰符 (Modifiers)**：机器人的**保安**，它会在执行动作前先检查：这个人有没有权限点这个按钮？
            
        -   **自定义错误 (Custom Errors)**：机器人的**报错小闹钟**，当别人乱点按钮时，它会非常省钱且快速地告诉对方哪里错了。
            
    5.  **源码验证（Source Verification）**
        
        为了让大家相信这个机器人是安全的，开发者通常会将源代码公开在区块浏览器（如 Etherscan）上进行验证。
        
        -   **作用**：验证通过后，浏览器会自动解析元数据，并在网页上展示出美观的**交互面板**，让普通人不用写代码也能通过网页点击合约的按钮。
            
    
    **总结笔记：** 部署合约就像是**在城市里安置一台全自动机器**。**地址**是它的位置，**ABI** 是它的操作菜单。有了这两样东西，外面的世界才能通过 **JSON-RPC** 这个通信窗口与机器人进行有意义的交谈。
<!-- DAILY_CHECKIN_2026-01-22_END -->

# 2026-01-21
<!-- DAILY_CHECKIN_2026-01-21_START -->

以太坊中有两种账户——EOA、合约账户

* * *

1.  EOA（外部拥有账户）
    
    1.  **什么是 EOA？—— “人类的银行卡”**
        
        **EOA (Externally Owned Account)** 的全称是“外部拥有账户”
        
        -   **通俗理解**：它就像是你手里的一张**银行卡**，是由我们这些“外部的人”（人类或机构）来操作的。
            
        -   **它的本事**：它能**主动发起交易**（比如发红包、去超市买东西），也可以去指挥“自动售货机”（智能合约）干活，但它自己身体里没有复杂的程序代码。
            
        -   **一句话对比**：**EOA** 像“**人 + 银行卡**”；**合约账户**像“**写死规则的自动售货机**”
            
    2.  **EOA 的“口袋”里装了什么？—— 四个小格子**
        
        在以太坊的超级账本上，每个 EOA 账户都有四个格子的信息：
        
        -   **地址 (Address)**：这就是你的\*\*“银行卡号”\*\*。它总是以 **0x** 开头，后面跟着 40 个像乱码一样的数字和字母。别人想给你送糖果（ETH），就往这个地址里送。
            
        -   **Nonce (交易计数器)**：这是你的\*\*“转账流水号”\*\*。你每发一次钱，这个数字就自动加 1。
            
            -   **它的作用**：防止坏人把你已经发过的红包偷走再发一遍（防止重放攻击），同时也保证你发的红包是按顺序排队被处理的。
                
        -   **余额 (Balance)**：账户持有的ETH数量（你手里攒了多少\*\*“以太币（ETH）糖果”）\*\*。
            
            -   糖果的最小单位叫 **Wei**。1 个大 ETH 糖果等于 10 的 18 次方个 Wei（那是超级超级多个 Wei）。
                
        -   **代码 (Code) 与 存储 (Storage)**：因为 EOA 是给人用的，不是装程序的，所以这两个格子是**空的**。
            
    3.  **你是怎么“控制”钱包的？—— 钥匙和印章**
        
        你可能会问：“既然卡号（地址）是公开的，为什么别人不能花我的钱？”这就全靠下面两样宝贝：
        
        -   **私钥 (Private Key)**：这是你的\*\*“唯一钥匙”，也是你的“电子印章”\*\*。
            
            -   每次你想发钱，都要用私钥在转账单上盖个章（签名）。网络上的机器人们一看到这个章，就知道：“哦！这确实是卡片的主人同意发的！”。
                
            -   **谁拿到私钥，谁就是账户的主人**。
                
        -   **助记词 (Mnemonic)**：你在注册小狐狸钱包时记下的那 **12 或 24 个英文单词**。
            
            -   **通俗记法**：它是\*\*“万能总钥匙”\*\*。如果你把私钥弄丢了，只要有这几个单词，就能重新变出你所有的私钥和卡号。
                
            -   **超级警示**：绝对不能告诉别人这几个单词，也不能截图存手机里！谁拿到了它，谁就能搬走你所有的糖果。
                
    4.  **让账户动起来的“油费” —— Gas**
        
        你想让 EOA 动起来（发交易或调合约），必须给以太坊的小工们付一点点报酬，这叫 **Gas（燃料费）**。 **Gas 必须用 ETH 来付**。如果卡里没有 ETH 糖果，你的钱包就动弹不得。
        
    
    **核心哲学**：区块链不认识你是谁，它**只认印章（私钥签名）**！
    
2.  合约账户的概念与创建流程
    
    1.  **什么是合约账户？—— “住在账本里的自动售货机”**
        
        如果说 **EOA** 是我们手里拿的**银行卡**，那**合约账户**就是一台\*\*“放在大街上的自动售货机”。\*\*
        
        合约账户 = “带代码的账户”，不靠私钥，而是靠部署在链上的EVM字节码决定它能做什么。
        
        有自己的地址和ETH余额，也可以持有ERC-20 / NFT。
        
        -   **没有主人，只有代码**：它没有私钥（也就是没有钥匙），所以没有哪个人能直接钻进机器里把钱拿走。它的所有行为，都是在它出生时就写死在身体里的\*\*程序（代码）\*\*决定的。
            
        -   **被动工作**：售货机不会自己走路（主动发起交易），它只能静静地在那等着。只有当有人（EOA）跑过来投币或者按按钮（调用它）时，它才会按照程序“吐出饮料”或者“收下钱”。
            
    2.  **合约账户的“小书包”里装了什么？—— 四个格子**
        
        合约账户和 EOA 一样，在以太坊的名单里也有四个小格子，但里面的东西更丰富：
        
        -   **Nonce (创建计数器)**：这里的 Nonce 和 EOA 不太一样，它记录的是这个合约**创建过多少个小合约**。
            
        -   **Balance (余额)**：和我们一样，售货机里也可以存很多 **ETH 糖果**。
            
        -   **StorageRoot (储物柜)**：这是合约最厉害的地方。它有一个无限大的**储物柜（存储空间）**，用来记住各种事，比如“谁在它这里存了多少钱”、“现在的游戏等级是多少”。
            
        -   **CodeHash (大脑指纹)**：这里存的是它\*\*“大脑”里的规则（字节码）\*\*的指纹。通过这个指纹，机器人们能找到它执行任务的说明书。
            
    3.  **合约账户是怎么“出生”的？—— 创建流程**
        
        一个合约账户不会凭空出现，它的诞生需要经过这几步：
        
        -   **写好说明书**：程序员叔叔先用 Solidity 语言写好规则。
            
        -   **打包寄快递**：人类（EOA）发出一笔特殊的交易，收件人那一栏**留空（Null）**，然后在包裹里塞进写好的说明书（字节码）。
            
        -   **管家盖房**：以太坊的“大管家”（EVM）收到包裹，就会在账本上新盖一个小房子（分配合约地址），把说明书贴在墙上，并按照指令初始化里面的储物柜。
            
    4.  **它的“门牌号”是怎么来的？—— 地址计算**
        
        合约账户的地址不是随便乱取的，它是**算出来的**：
        
        -   **普通法（CREATE）**：根据“爸爸的地址”和“爸爸发出的第几笔交易”来算。所以同一个爸爸在同一时间生的孩子，地址是唯一的。
            
        -   **预言法（CREATE2）**：这是一种更高级的方法，可以让我们在合约还没出生前，就精准地算出它未来的门牌号是多少。
            
    
    **总结一下：**
    
    | 特性 | EOA (你的钱包) | 合约账户 (售货机) |
    | --- | --- | --- |
    | 谁控制？ | 拿钥匙（私钥）的人 | 写好的代码规则 |
    | 能主动发红包吗？ | 可以，只要你想 | 不行，必须等别人点它 |
    | 有代码吗？ | 没有 | 有，这就是它的灵魂 |
    | 花钱要手续费吗？ | 要，付 Gas 费 | 要，由叫醒它的人付 |
    
    EOA的“出生”不用钱，你想变出多少张银行卡都可以，在自己电脑里点一下就生成了，不用给以太坊社区交钱。 合约账户的“出生”要钱，你得发一笔交易，付不少 Gas 费（油费），才能把代码存到链上。
    
3.  以太坊地址
    
    -   160位
        
    -   地址里的字母忽大忽小（比如 `0x12aB...`），这叫 **EIP-55 校验和地址**。
        
        -   **魔法保护**：这是为了防止你手快打错字。
            
        -   **它的本领**：虽然以太坊本身不分大小写，但如果你输错了一个字母，钱包软件一查这个大小写对不上，就会立刻发出**报错警报**，防止你把钱转错地方。
            
4.  合约账户的两个“法宝”
    
    1.  **多签 (Multisig)**：
        
        -   **意思**：需要**多个印章**一起盖章才能生效。
            
        -   **比喻**：就像一个巨大的零食箱，必须你、爸爸和妈妈三个人里的两个人都同意签名，箱子才会打开。这比你一个人拿钥匙安全多了！
            
    2.  **时间锁 (Timelock)**：
        
        -   **意思**：做决定之后，要**等一段时间**才能真的拿钱。
            
        -   **比喻**：就像你决定买玩具了，但售货机说：“我们要等 48 小时再执行”，这给了大家反悔和检查坏人的时间。
            
    
    **名词小解释：**
    
    -   **msg.sender (你是谁)**：合约用来检查\*\*“是谁在点按钮”\*\*的魔法眼。
        
5.  在以太坊这个大操场上，**到底谁能带头喊“预备——跑！”（谁能主动发起交易）**。
    
    我们可以把这个规矩想象成一场\*\*“谁是带头人”\*\*的游戏：
    
    1.  **唯一的“带头人” —— EOA (人类钱包)**
        
        在以太坊的规矩里，能够主动拍拍脑袋说“我要给谁转账”或者“我要去玩个游戏”的，**只有 EOA（外部拥有账户）**。
        
        -   **为什么只有它能带头？** 因为它手里握着**私钥（电子印章）**。以太坊的机器人管家们非常死板，它们只认印章。每笔交易的开头，必须有一个用印章盖过戳的申请书，机器人管家才会开始干活。
            
        -   **名词解释——发起者 (Transaction Origin)**：这就是整笔交易的最源头，必须是一个拿着印章的小朋友（EOA）。
            
    2.  **“被动的听话机器人” —— 合约账户**
        
        虽然合约账户（自动售货机）非常聪明，会算很多难题，但它有个缺点：**它非常“宅”，从来不主动出门**。
        
        -   **它不能主动发红包**：如果没有人去点它的按钮，它会永远静静地坐在那里，一动也不动。
            
        -   **它是“被动派”**：它只能在收到 EOA 发来的指令后，按照写好的规则（代码）去回话或者把任务传给下一个机器人。
            
    3.  **现在的“变身魔法” —— 账户抽象 (ERC-4337)**
        
        有些小朋友可能会发现，现在有些聪明的钱包（比如智能钱包）好像自己就能动，这是怎么回事呢？这就是书里提到的**账户抽象（Account Abstraction）**。
        
        -   **帮手——捆绑器 (Bundler)**：这就像是你写好了一张“我想玩游戏”的纸条（UserOperation），交给一个专门的“代办大叔”（Bundler）。
            
        -   **背后的真相**：虽然看起来是你的智能合约类账户在动，但其实最源头还是那个“代办大叔”用他自己的印章（EOA）帮你在机器人管家面前发起了交易。
            
        -   **结论**：不管魔法怎么变，**每一笔交易的起点，依然必须是一个有私钥印章的账户**。
            
    4.  **未来更厉害的魔法 —— EIP-7702**
        
        书里还提到了一个正在准备的新魔法，叫 **EIP-7702**。 它能让你普通的银行卡（EOA）在办某一件事的时候，**临时变身**成一个超级厉害的机器人（智能钱包），帮你一口气办完很多复杂的事。但记住，变身的口令还是得由你亲手签发。
        
    
    **名词小解释：**
    
    1.  **主动发起 (Active Initiate)**：第一个站出来给机器人管家下命令。
        
    2.  **UserOperation (意向操作)**：就像你写给“代办大叔”的委托书，告诉他你想干什么。
        
    3.  **私钥控制 (Private Key Control)**：谁有钥匙，谁才有资格在以太坊大操场上第一个说话。
        
    
    小结：
    
    今天为止：链上的每一笔交易，起点仍然是某个 EOA 的签名；合约账户再“聪明”，也只是被调用时执行，而不是自己起头发交易。账户抽象和EIP-7702做的事，是让“谁来签、怎么付费、怎么组合操作”更灵活，而不是改变这一条铁定律。
    
6.  **合约账户的余额与状态存储**。 我们可以把每一个以太坊账户想象成操场名单上的一个小格子，每个格子里都整齐地摆着**四个“小抽屉”**。
    
    1.  **我们的“大名单” —— 世界状态 (World State)**
        
        在讲抽屉之前，我们要先知道这四个抽屉放在哪。
        
        -   **名词解释**：**世界状态**就像是一张**大考勤表**，上面写着每一个账户的名字和他们所有的秘密。
            
        -   无论是你还是机器人，在表上都占有一个位置。
            
        
        （以太坊中的每个账户（无论是EOA还是合约账户）在“世界状态”里，都被建模为一个四元组：σ\[a\] = (nonce, balance, storageRoot, codeHash)）
        
    2.  **机器人账户的“四个小抽屉”**
        
        -   第一个抽屉：余额 (Balance) ——账户持有的ETH数量（单位为wei，1ETH = 10^18 wei）
            
        -   第二个抽屉：Nonce——里面装的是一个数字（计数器）。对我们人类（EOA）来说，这记录的是我们发了多少个红包（发送过多少笔交易）；但对**机器人**来说，这记录的是它**亲手创建了多少个“小机器人”**（子合约）。
            
        -   第三个抽屉：存储根 (StorageRoot)——这是机器人最厉害的抽屉，里面存着它的**所有记忆。比如“谁在它这里存了多少钱”、“游戏里的宝剑在谁手里”。我们人类的这个抽屉是空**的，只有会干活的机器人（合约账户）才会在里面写密密麻麻的账本。
            
        -   第四个抽屉：代码哈希 (CodeHash)——里面装着一串长长的、唯一的hash，这个hash对应着机器人的操作说明书（代码）。
            
            -   **为什么存hash**：因为说明书可能很厚，直接塞进抽屉太占地方了，所以只存一个指纹，想看的时候再去大图书馆里对一下hash就能找到原件。
                
        
        **名词小解释：**
        
        -   **世界状态 (World State)**：全网公认的、记录所有人信息的**终极名单**。
            
        -   **存储树 (Storage Trie)**：机器人用来存秘密的**魔法树**，只要看一眼树根（StorageRoot），就知道里面的秘密有没有被坏人动过。
            
7.  **EOA（人类钱包）与合约账户（机器人账户）是如何互相打交道、互相下命令的？——互相调用机制**
    
    我们可以将这个过程想象成一场“接力比赛”：
    
    1.  **第一棒：从人类钱包到合约（外部交易）**
        
        在以太坊世界里，所有的活动都必须由拿着“印章”（私钥）的人类钱包（EOA）发起。这就是接力赛的第一棒。
        
        -   **发起指令**：用户通过私钥签名发送一笔**外部交易**（External Transaction）。交易里包含：去哪（目标合约地址）to、干什么（具体函数参数）data、带多少钱（ETH）value以及预付的油费（Gas）。
            
        -   **机器人响应**：以太坊计算引擎（EVM）收到指令后，会找到那个合约机器人，读取它的“操作说明书”（代码），然后按照指令开始干活。
            
    2.  **第二棒及后续：合约到合约（内部调用）**
        
        当第一个合约机器人被叫醒后，它在执行任务的过程中，可以继续吩咐其他的合约机器人帮忙，这就是**消息调用**（也叫**内部交易**）。
        
        -   **套娃式吩咐**：机器人 A 收到指令后，可以调用机器人 B，B 又可以调用 C。
            
        -   **消耗同一桶油**：这些内部的小吩咐不需要用户额外再签一次名，但它们都会消耗第一笔交易里预付的 **Gas（油费）**。如果油在中途用完了，整个接力赛都会停下并回滚。
            
        -   **三种吩咐方式**：
            
            -   **普通调用 (call)**：让对方在它自己的地盘干活，最常用的方式。
                
            -   **委托调用 (delegatecall)**：最神奇的方式，让对方拿着它的技术来我的地盘干活（常用于合约升级）。
                
            -   **只读调用 (staticcall)**：只许对方看数据，不许修改任何东西。
                
    3.  **一个铁律：合约不能“主动起头”**
        
        截至目前，合约账户机器人有一个致命的弱点：**它没有私钥，所以无法主动发起第一笔交易**。
        
        -   **被动属性**：如果没有人去点它的“启动按钮”（发起外部交易），合约机器人会永远静止在账本里。
            
        -   **中间站角色**：合约可以作为接力赛的中间任何一棒，但它永远不能当第一棒的发起者。
            
    4.  **现代魔法：让调用链更灵活**
        
        虽然上述规则很严格，但现在有一些新技术让这个过程看起来更聪明：
        
        -   **账户抽象 (ERC-4337)**：这就像是你写了一张“愿望清单”，交给一个**代办大叔（Bundler）**。大叔用他自己的印章发起交易，帮你叫醒你的智能钱包和目标合约。底层看，起点依然是代办大叔这个 EOA。
            
        -   **临时变身 (EIP-7702)**：这是 2025 年 Pectra 升级引入的新功能。它允许人类钱包在办某一件事时，**临时变身**成一个聪明的合约机器人。但变身的权限，依然要靠人类亲手签名授予。
            
    
    **总结笔记：** 以太坊的调用链永远是 **EOA（人类发起）→ 合约（机器人执行）→ 更多合约（内部接力）**。没有人类的“第一推动力”，这个由机器人组成的巨大机器就不会运转。 一笔交易不是必须发给合约账户，但目前必须由EOA（人类钱包发起）。谁可以是接收者？（目的地to字段）
    
    -   **发给另一个 EOA**：这就是最普通的**转账**。比如你给朋友转 1 个 ETH，这就是 EOA -> EOA，不涉及任何合约。
        
    -   **发给合约账户**：这是为了**下达指令**。比如你去 Uniswap 换币，就是 EOA -> 合约账户。
        
    -   **不填接收者（Null）**：这是为了**创建新合约**。当你发出一笔不写收件人的交易并附带代码时，管家就知道你要盖一座新的“自动售货机”（部署合约）。
        
8.  **MetaMask 钱包对 EOA（人类钱包账户）的管理**。
    
    你可以把 MetaMask（小狐狸钱包）想象成一个专门帮你保管“银行卡”和“印章”的**智能保管箱**。它不存储你的钱，而是帮你管理打开钱袋子的钥匙。
    
    1.  **核心底座：助记词与私钥 —— “万能钥匙与唯一印章”**
        
        -   **助记词 (SRP/助记词)**：当你第一次打开保管箱时，它会给你 12 个英文单词。这叫\*\*“秘密恢复短语”\*\*。
            
            -   **它的本质**：它是所有账号的**总根源**。只要有了这 12 个词，就能变出你名下所有的银行卡号和密码。
                
            -   **安全规则**：MetaMask 只把它存在你自己的电脑或手机里，官方服务器绝对不存。谁拿到它，谁就搬走了你所有的家产。
                
        -   **私钥 (Private Key)**：这是每一张“银行卡”对应的**唯一印章**。
            
    2.  **生成与切换：HD 钱包机制 —— “一棵树上结出很多果子”**
        
        你可能会发现，在 MetaMask 里点一下“创建账户”，就会多出一个新地址。
        
        -   **分层确定性 (HD Wallet)**：MetaMask 遵循一种数学规则（BIP-32/44），就像一棵大树（助记词）可以长出无数个树枝（私钥）。
            
        -   **多链通用**：同一个地址可以在以太坊主网用，也可以在 Arbitrum 或 Optimism 等其他“操场”用，只是每条链上的余额是分开算的。
            
    3.  **交易签名流程 —— “不出门的电子盖章”**
        
        当你在网页上点“兑换”或“买入”时，会发生以下过程：
        
        -   **发出请求**：网页（dApp）通过一个叫 **window.ethereum** 的小窗户向 MetaMask 递一张申请表。
            
        -   **展示内容**：MetaMask 会弹窗告诉你：这笔钱发给谁（to）、带多少钱（value）、干什么（data）、付多少小费（gas）
            
        -   **本地盖章**：你点确认后，它就在你手机/电脑本地用私钥盖个章（签名）。**私钥全程不出门**，网页只拿到盖好章的申请表，然后发给机器人管家。
            
        -   **智能账户拓展 (ERC-4337) —— “给银行卡穿上外骨骼”**
            
            现在的 MetaMask 已经支持\*\*“智能账户”\*\*（Account Abstraction）了：
            
            -   **它的超能力**：它可以实现\*\*“批量操作”（点一次确认办三件事）、“小费代付”（别人帮你付油费）或者“社交找回”\*\*。
                
            -   **本质**：这其实是给你的 EOA 钱包配了一个“智能机器人助手”，让操作变得像用支付宝一样简单，而不必去记复杂的底层原理。
                
    4.  **EIP-7702：临时变身魔法 —— “穿上超人服办急事”**
        
        这是 2025 年以太坊 Pectra 升级带来的新魔法：
        
        -   **临时变身**：它允许你的普通钱包（EOA）在办某一件事的时候，**临时变身**成一个聪明的合约机器人。
            
        -   **作用**：办完这笔业务后，你的账号又变回普通账号。这让普通用户也能瞬间享受高级机器人的各种便利服务。
            
    5.  **安全防诈骗 —— “三不原则”**
        
        -   **不给词**：官方客服永远不会问你要 12 个单词（助记词）。
            
        -   **不乱签**：任何看不懂的签名弹窗，都要当成“卖身契”来警惕。
            
        -   **不联网**：助记词最好抄在纸上存进保险柜，别存手机相册或云盘。
            
    
    **名词小百科：**
    
    -   **window.ethereum**：网页和钱包说话的专用传声筒。
        
    
    2.  **ECDSA 签名**：一种数学魔法，证明这笔钱确实是你本人同意发出的。
        
    3.  **账户抽象 (AA)**：让钱包不只是钥匙，而是一个可以写程序的“智能管家”。
        
    
    **一句话总结**：**MetaMask 是你进入以太坊世界的“随身保镖”和“公文包”，它在保护你私钥（印章）的同时，帮你打理各种复杂的转账和盖章业务。**
    
9.  **ERC-20 / ERC-721 代币与合约账户的关系**
    
    在以太坊世界里，代币并不是像真实的硬币那样塞在你的钱包里，它们更像是**由合约机器人保管的一份“大账本”**。
    
    1.  **代币的本质：合约机器人手里的小账本**
        
        在以太坊中，无论是用来当钱花的代币（ERC-20），还是独一无二的收藏品（ERC-721/NFT），它们的本质都是**存储在智能合约里的数据记录**。
        
        -   **ERC-20 代币（同质化代币）**：就像是某种\*\*“游戏金币”，每一枚都长得一模一样。合约内部维护着一张余额表\*\*（技术上叫 `_balances` 映射），记录了每个地址名下有多少金币。
            
        -   **ERC-721 代币（NFT）**：就像是\*\*“怪兽卡片”，每一张都有编号（ID）且独一无二。合约内部维护着一张归属表\*\*（技术上叫 `_owners` 映射），记录了哪一个编号的卡片现在属于哪一个地址。
            
    2.  **“转账”是怎么回事？：改写账本的操作**
        
        当你想要把代币送给朋友时，你并不是真的“递”给了他一个东西，而是**给合约机器人发了一个指令**。
        
        -   **操作过程**：你向代币合约发起一个\*\*“外部交易”\*\*。在这个交易的指令（data）里写着：“请把我名下的 10 个金币减掉，并在我朋友名下加上 10 个”。
            
        -   **机器人核对**：合约机器人（代币合约）会先看你的余额够不够，如果够，它就会拿起笔，在它的小账本（存储空间/Storage）上**把数字改掉**。
            
        -   **结果**：转账完成。这个过程实际上是\*\*“调用一段代码 + 改一行存储数据”\*\*。
            
    3.  **合约账户是“大脑”和“仓库”的结合体**
        
        每一个代币合约本身就是一个**合约账户**，它扮演着两个角色：
        
        -   **逻辑中心（大脑）**：它规定了代币怎么产生、怎么销毁、谁能转账给谁（这些规则写在 Code 字节码里）。
            
        -   **数据中心（仓库）**：它利用自己的\*\*存储树（Storage Root）\*\*记下了所有人的余额、授权记录和每个 NFT 的出生证明。
            
    4.  **钱包里看到的代币是从哪来的？**
        
        你会发现，即便代币不在钱包（EOA）里，钱包软件（如 MetaMask）还是能显示你有多少钱。这是因为钱包做了一次\*\*“读数”\*\*操作：
        
        -   钱包知道这个代币合约的**门牌号（地址）**。
            
        -   钱包通过网络问机器人：“请查一下你的账本，看看这个地址（你的地址）还有多少钱？”。
            
        -   机器人查完账本（`balanceOf` 接口）告诉钱包数字，钱包再**展示**在屏幕上给你看。
            
    
    **核心名词总结：**
    
    1.  **映射 (Mapping)**：代币合约里的\*\*“名字对应数字”的对照表\*\*。
        
    2.  **ERC-20**：一种让代币像普通货币一样可以互相替换、分割的**标准规则**。
        
    3.  **ERC-721**：一种让代币像艺术品一样唯一、不能被分割的**标准规则**。
        
10.  **合约部署后的不可篡改性与销毁**
     
     在以太坊中，合约一旦部署到链上，它的生命周期就进入了一个非常特殊的阶段。理解这一点对于编写安全的程序至关重要。
     
     1.  **代码的不可篡改性 (Immutability)**
         
         **不可篡改性**是指合约的代码（字节码）一旦写进区块链，就**永远不能直接在原来的位置修改**。
         
         -   **原理**：在以太坊的账本里，每个合约账户都存有一个“大脑指纹”（`codeHash`）。这个指纹对应的是一串死代码。即使你是合约的创建者，也没办法像修改 Word 文档一样去改掉里面的逻辑。
             
         -   **好处**：这保证了\*\*“代码即法律”\*\*。用户可以确信，今天存进去的钱，规则不会在明天被开发者偷偷改掉。
             
     2.  **SELFDESTRUCT：被削弱的“自毁按钮”**
         
         在以太坊早期，合约里有一个叫 **SELFDESTRUCT** 的指令，相当于合约的“自毁按钮”。
         
         -   **原本的作用**：执行这个指令后，合约会把自己从账本上抹除，并把剩下的钱转给指定的地址。
             
         -   **现在的变化（坎昆升级/EIP-6780）**：在 2024 年升级后，这个按钮基本失效了。现在**只有在合约刚刚创建的那一秒钟（同一笔交易内）**，自毁才有效；如果合约已经存在很久了，点这个按钮**只能转走余额，代码和数据依然会留在链上**。
             
         -   **结论**：不要再指望用“自毁”来清理合约或做系统升级了。
             
     3.  **地址重部署：失效的“原地换壳”**
         
         过去有一种黑魔法叫 **Metamorphic（变形合约）**。
         
         -   **做法**：先用自毁按钮把旧合约删掉，再用特殊的 `CREATE2` 指令在同一个门牌号（地址）上盖一座新房子，从而实现“原地换代码”。
             
         -   **现状**：因为现在的自毁按钮已经没法彻底清除代码，所以这种\*\*“原地换壳”的办法已经几乎失效且非常不安全。\*\*
             
     4.  **代理模式 (Proxy Pattern)：现在的“正规升级法”**
         
         既然不能直接改代码，也不能原地换壳，那想加新功能怎么办？现在唯一的标准做法是**代理模式**。
         
         -   **代理合约 (Proxy)**：这是一个永远不变的“办公室”（固定地址），里面存着所有的账本和数据。
             
         -   **实现合约 (Implementation)**：这是被雇佣的“业务员”（逻辑代码）。
             
         -   **升级过程**：当需要改逻辑时，办公室不搬家，只是**换一个新的业务员**。办公室通过一个叫 **delegatecall** 的电话，把任务传给新业务员，但最后记账还是记在办公室自己的账本里。
             
     5.  **用户如何与部署后的合约“对话”？ (Interaction)**
         
         合约部署好了，用户要怎么使用它呢？需要三样东西：
         
         1.  **合约地址**：相当于合约的门牌号。
             
         2.  **ABI (接口说明书)**：告诉钱包和前端，这个合约有哪些按钮可以点、需要填什么参数。
             
         3.  **JSON-RPC (通信窗口)**：钱包通过这个窗口把你的操作（交易）发给以太坊节点。
             
     
     **核心名词总结：**
     
     -   **不可篡改 (Immutable)**：代码部署后不能编辑，只能通过代理模式间接“升级”逻辑。
         
     -   **SELFDESTRUCT (自毁)**：曾经可以删除合约，现在仅能在创建时生效，不再推荐使用。
         
     -   **代理模式 (Proxy)**：保持地址不变，通过切换逻辑合约来实现升级的主流方案。
         
     -   **delegatecall**：代理合约用来调用逻辑合约的关键技术，让逻辑在代理合约的存储空间里运行。
         
     
     **总结笔记：** 合约一旦部署，它的代码就被“锁死”了。想升级只能靠**代理模式**（换业务员不换办公室）。由于自毁机制已被削弱，**开发者不应再设计依赖删除合约的逻辑**。
<!-- DAILY_CHECKIN_2026-01-21_END -->

# 2026-01-20
<!-- DAILY_CHECKIN_2026-01-20_START -->


1.  归档节点在数据查询中的优势
    
    1.  **什么是归档节点？——“超级记忆力的大管家”**
        
        -   **全节点**：像一个普通的图书管理员，他只记得最近发生的事。如果书架满了，他会把很久以前的旧记录扔掉（这叫**修剪**）。
            
        -   **归档节点**：就是一个**永远不扔东西**的大管家。从以太坊诞生的第一天起，每一秒钟、每一个小朋友的账户里有多少钱，他都记得清清楚楚并存了下来。
            
    2.  **它的绝活：即时“穿越”——历史查询**
        
        想象一下，如果你问：“三年前的今天下午两点，小明手里有几个苹果？”
        
        -   **普通管理员（全节点）**：他会挠挠头说：“哎呀，太久了我不记得了，你得等我从第一天开始重新算一遍。”这要花好久好久的时间。
            
        -   **归档管家（归档节点）**：他会立刻翻开那一天的档案说：“在那一秒，小明正好有5个苹果！”这就是**即时查询**，不需要重新计算，速度超级快。
            
    3.  **谁需要这种“时间机器”？**
        
        因为这个管家太厉害了，所以一些特殊的人特别需要他：
        
        -   **区块链侦探（审计与分析）**：如果有人想查很久以前的一笔钱是怎么丢的，就需要归档节点提供证据。
            
        -   **历史学家（研究机构）**：他们要研究这几年大家是怎么用钱的，必须看完整的历史记录。
            
        -   **图书馆的门面（区块浏览器）**：像 Etherscan 这样的网站，要让全世界的人都能查到以前的账单，背后必须靠归档节点支撑。
            
    4.  **这个管家的“大书包”——代价**
        
        虽然他记性好，但他非常辛苦：
        
        -   **超级大硬盘**：他需要一个非常非常巨大的“书包”来装这些档案。现在的以太坊归档数据通常要 **12TB 以上**的硬盘空间（这相当于好几千部高清电影那么大）。
            
        -   **同步时间长**：因为要记下从第一天开始的所有细节，他第一次上班时，需要不眠不休地工作好几周甚至好几个月，才能把历史全部背下来。
            
    
    **名词小解释：**
    
    1.  **即时查询（Instant Query）**：像翻书一样，想看哪页看哪页，不用从头读。
        
    2.  **重放（Replay）**：因为不记得了，只好从第一页开始像复读机一样重新算一遍，非常慢。
        
    3.  **状态快照（State Snapshot）**：就像给全班同学拍一张“谁有多少钱”的照片，归档节点存下了历史上的每一张照片
        
2.  在合并的背景下，EL 和 CL 的具体边界
    
    1.  **它们住在不同的“朋友圈” —— 两个 P2P 网络**
        
        前面说他们只会传八卦，但这两个人其实各玩各的，有两套完全不一样的“朋友圈”：
        
        -   **会计 (EL) 的朋友圈**：他每天在朋友圈里转发新交易和区块信息，这是**执行层朋友圈。**
            
        -   **裁判 (CL) 的朋友圈**：他每天在朋友圈里转发谁投了票、谁被罚了、谁该出块了，这是**共识层朋友圈。**
            
        -   **重点**：这两个圈子是\*\*“平行宇宙”\*\*，互不干扰，只有在家里通过“秘密电话”（Engine API）时，它们才会交换这两个圈子里的情报
            
    2.  **它们对外说话的“口音”不一样 —— 接口区别**
        
        虽然前面提到了“窗户”，但这里会详细区分它们的“说话方式”：
        
        -   **会计 (EL) 说“方言” (JSON-RPC)**：当你问“小明有多少钱？”或者想发个红包（转账）时，你要用 `eth_` 开头的方言跟他说话。
            
        -   **裁判 (CL) 说“外语” (Beacon API)**：如果你想问“现在谁在投票？”或者“裁判长是谁？”，你要用专门的 `REST` 或 `gRPC` 这种外语去问他。
            
    3.  **为什么非要把他们拆开？ —— 模块化的好处**
        
        书中在这一部分特别强调了“拆分”的良苦用心：
        
        -   **各学各的本领**：会计（EL）可以一心一意研究怎么算账最快，裁判（CL）可以一心一意研究怎么投票最公平。
            
        -   **不会“一倒全倒”**：如果会计的程序出了点小 Bug，裁判还可以继续盯着秩序；只要换个会计程序，节点很快就能恢复，这叫**客户端多样性。**
            
    4.  **一个新出现的专业动作：装进“大箱子”**
        
        这里还有一个具体的配合动作：
        
        -   **执行负载 (Execution Payload)**：会计（EL）把算好的账单打包成一个“小信封”。
            
        -   **信标区块 (Beacon Block)**：裁判（CL）收到小信封后，会把它塞进一个更大的“快递箱”里，然后贴上共识的封条，发往全世界
            
    
    The Merge 之后：执行客户端是 “ 世界计算机的大脑皮层(算逻辑) ” ,共识客户端是 “ 集体神经系统(达成一致) ” ,两者通过 Engine API 绑在一起，才构成一台真正的以太坊节点。
    
3.  EL 和 CL 是怎么分工干活、相互配合的
    
    1.  **我们的“秘密对讲机” —— Engine API**
        
        会计和裁判虽然住在一起，但他们有各自的房间。
        
        -   **Engine API**：就是连通他们两个房间的\*\*“秘密对讲机”\*\*
            
        -   他们平时不用大喇叭喊，而是通过这组专门的指令（就像按对讲机上的按钮）说悄悄话。
            
        -   **常用按钮有三个**：`newPayload`（会计，看新菜！）、`forkchoiceUpdated`（法官，我们跟谁走？）、`getPayload`（会计，把做好的菜给我！）
            
    2.  **轮到我们当“出块小队长”了**
        
        当全网随机选中你的节点来写新一页账本时，配合就开始了：
        
        -   裁判员（CL）**会看准时间，按下对讲机跟会计说：“我要准备写新账本了，你快帮我准备一份**‘大餐’（执行负载/Execution Payload）吧
            
        -   会计（EL）**收到消息，立刻从篮子（交易池）里挑出最好的菜（交易），在计算器（EVM）里炒好，打包成一个**大信封（Execution Payload）交给裁判。
            
        -   **裁判员**收到信封，把它塞进一个漂亮的盒子里，贴上封条发往全世界。
            
        -   **比喻**：经理（CL）负责接单，厨师（EL）负责炒菜，最后经理把菜端出去。
            
    3.  **当别的小朋友送来新账本时**
        
        当网络上其他小朋友写好了新账本传过来，你的节点要负责检查：
        
        -   裁判员（CL）先收到账本，他会先看封面和印章对不对
            
        -   接着他会把里面的账单丢给会计：“你快算算，这些账目逻辑合不合法？”
            
        -   **会计（EL）“算对了！”（VALID）**。
            
        -   只有会计点头了，**裁判员**才会放心地在自己这边盖章认可，并大声告诉全世界：“我投这一票！”
            
    4.  **掉队了怎么办？—— 同步配合**
        
        如果你今天请假没来，错过了一段故事，两位小伙伴会这样帮你追进度：
        
        -   **裁判员（CL）**负责看路：他通过自己的朋友圈（P2P 网络）先搞清楚最新的故事已经讲到哪一页了。
            
        -   **会计（EL）**负责补课：裁判告诉他该往哪儿走，他就负责把那一页页具体的账单补齐并自己算一遍。
            
        -   这就是\*\*“裁判指路，会计填肉”\*\*
            
    
    **总结一下：**
    
    -   **一个节点** = **1个会计** + **1个裁判** + **1台对讲机（Engine API）**。
        
    -   **出块时**：裁判下令，会计炒菜。
        
    -   **收块时**：裁判看封面，会计重算账目。
        
    -   **同步时**：裁判带路，会计补齐细节。
        
    
    他们两个每天就这样通过\*\*“三大动作”\*\*（`newPayload` / `forkchoiceUpdated` / `getPayload`）不停地配合，才让以太坊这个大账本永远不出错
    
4.  节点同步
    
    想象一下，以太坊的大账本从好几年前就开始记了，已经写了厚厚的好几万本书。你家的新节点机器人刚搬来，书架上空空的，它得去把这些故事都“抄”回来，这个过程就叫**同步（Sync）**
    
    书里讲了三种不同的“抄作业”方法：
    
    1.  **全同步 (FullSync) —— “最认真的小学霸”**
        
        这是最稳重但也最慢的方法。
        
        -   **怎么做**：机器人从\*\*“创世区块”\*\*（也就是大账本的第一页的第一行）开始，一笔一笔地重新算。每一笔小明给小红转苹果的账，它都要亲手在计算器上按一遍，确认结果对不对。
            
        -   **优点**：最安全！它不相信任何人，只相信自己算出来的结果。
            
        -   **缺点**：太慢了！要把几年的账全部重算一遍，可能要不眠不休地算好几天甚至更久。
            
        -   **名词解释**：\*\*创世区块（Genesis Block）\*\*就是以太坊出生的那一秒钟产生的第一个小方块。
            
    2.  **快照同步 (SnapSync) —— “机灵的搬家公司”**
        
        这是现在大多数人最喜欢用的方法，也是很多程序的默认选择。
        
        -   **怎么做**：机器人不再从第一页开始抄，而是先找个好朋友要一张\*\*“快照（Snapshot）”\*\*。这就好比你要搬进新家，不用自己从头盖房，而是直接把最近最核心的家具（账户余额、合约代码等）直接搬进来。
            
        -   **补课**：家具搬完后，它再把最近刚刚发生的几页新账补齐就行了。
            
        -   **优点**：非常快！通常几个小时到一天就能抄完，而且也很安全。
            
        -   **名词解释**：\*\*快照（Snapshot）\*\*就像是给全班同学拍一张“现在大家口袋里分别有多少钱”的照片，直接看照片就能知道现状。
            
    3.  **轻节点同步 (LightSync) —— “只带目录的小旅行家”**
        
        这种方法最省力，适合住在手机或者智能手表里的小机器人。
        
        -   **怎么做**：它不存整本厚厚的书，它只存\*\*“区块头（Block Header）”。\*\*
            
        -   **怎么用**：当它想知道具体某笔账时，它会跑去问“学霸全节点”哥哥，然后对照手里的目录看哥哥有没有撒谎。
            
        -   **比喻**：就像你只下载了电影的“预告片”和“封面”，你想看正片时才临时找别人要那个片段。
            
    
    **机器人到底在抄什么？** 为了抄好作业，机器人需要搞清楚书里的两个部分：
    
    -   **区块头 (Block Header) —— “书的封面和目录”**
        
        -   里面写着：这是第几页、上一页的编号是什么、这页是什么时候写的。
            
        -   **父区块哈希（Parent Hash）**：就是上一页的“指纹”，通过它能把所有书页像铁链一样锁在一起，谁也别想偷偷换掉其中的一页。
            
    -   **区块体 (Block Body) —— “正文故事”**
        
        -   这里面才是真正的干货：记录了成千上万笔**交易（Transactions）**，比如谁给谁转了多少钱、谁执行了什么魔法合同。
            
    -   **状态数据 (State Data) —— “最终名单”**
        
        -   抄完所有故事后，机器人得总结出一份名单：现在全网每个人的余额是多少、每个合约长什么样。
            
    
    总结：**同步**就是新节点为了加入大家，努力“补课”把大账本抄齐的过程！
    
5.  节点机器人们互相之间到底在交换什么样的\*\*“秘密情报”\*\*呢？
    
    1.  **交易信息 —— “转账小纸条”**
        
        这是最基础的情报。每当有人想给别人送苹果（转账）或者让机器人干活（调合约），就会写一张\*\*“小纸条”。\*\*
        
        -   **纸条内容**：谁发起的、送给谁、送多少、什么时候送的。
            
        -   **传递过程**：节点收到这张纸条后，会检查对不对，然后赶紧传给别的小伙伴。
            
    2.  **区块数据 —— “装满纸条的大盒子”**
        
        当纸条攒够了，就会被装进一个\*\*“大盒子”（区块）\*\*里。
        
        -   **区块头（Block Header）**：像盒子的\*\*“封面”\*\*。上面写着盒子的编号、上一个盒子的指纹、还有装盒子的时间。通过封面，机器人能快速知道这盒东西对不对。
            
        -   **区块体（Block Body）**：像盒子的\*\*“内部”\*\*。里面塞满了成千上万张真实的交易小纸条。
            
    3.  **加密哈希 —— “神奇的指纹”**
        
        在以太坊世界里，每个纸条、每个盒子、甚至每个人的名字都有一个\*\*“指纹”，叫哈希值。\*\*
        
        -   **作用**：指纹是唯一的。如果盒子里的一张小纸条被偷偷改了一个字，整个盒子的指纹就会变，机器人们立刻就能发现有人撒谎。
            
    4.  **账户信息 —— “大家的小钱包”**
        
        机器人得记住每个人手里还有多少钱。
        
        （简单来说，**“机器人得记住每个人手里还有多少钱”** 指的是以太坊节点对 **“世界状态（World State）”** 的维护。）
        
        -   **EOA 账户**：就像你手里拿的**银行卡**。你有密码（私钥），可以自己存钱、花钱。
            
        -   **合约账户**：就像一个**自动售货机**。里面存着一段“代码”，只要你按对了按钮，它就会按照写好的规矩自动吐东西。
            
    5.  **公钥和私钥 —— “信箱名字和钥匙”**
        
        -   **公钥**：你的\*\*“收件地址”\*\*。别人想给你钱，就把钱往这个地址里扔。
            
        -   **私钥**：你兜里的\*\*“秘密钥匙”\*\*。只有拿着这把钥匙，你才能把信箱打开，把钱花出去。
            
    6.  **状态树（State Trie） —— “魔法图书馆的索引”**
        
        这是最厉害的情报！以太坊里有成千上万个人，怎么能立刻查到小明有多少钱呢？
        
        -   **魔法地图**：他们用一种叫 **MPT（默克尔-帕特里夏树）** 的魔法地图。
            
        -   **怎么查**：就像在图书馆查书名目录一样，只要跟着地图指引走，很快就能找到具体的账户信息。
            
    7.  **节点间的“对口令” —— P2P 管理数据**
        
        机器人们在一起玩，还得经常确定对方在不在。
        
        -   **Ping / Pong**：就像在玩\*\*“嘿，你在吗？”“我在呢！”\*\*的小游戏，确保大家都没掉线。
            
        -   **加密握手**：大家建立连接时要先**对暗号**（加密握手），确保对方不是坏人变的，保护情报不被偷听。
            
    
    **名词小解释：**
    
    1.  **哈希 (Hash)**：一种神奇的压缩技术，把任何东西都变成一串长长的、唯一的指纹。
        
    2.  **收据 (Receipts)**：小纸条执行完后的\*\*“回执单”\*\*，记录了花了多少油费、发生了什么事。
        
    3.  **DAG 片段**：就像是**拼图的一小块**，机器人们通过交换这些小碎片来拼出完整的地图
        
6.  以太坊社区里到底有多少个“机器人”，以及为什么坏人没办法当这个社区的大老板？
    
    可以把这想象成一个全世界小朋友都在参与的“超级大操场”**。为了不让任何一个坏孩子欺负大家，这个操场有几个神奇的**“安全法宝”：
    
    1.  **我们的社区有多大？—— 节点和验证者的数量**
        
        首先，我们要看看这个操场上有多少人。
        
        -   **节点机器人（Nodes）**：目前全世界大约有 **1万到2万个** 机器人正在工作。这些机器人就像操场上的小房子，每个房子里都存着一份账本。
            
        -   **验证者（Validators）**：这些人是专门负责给账本盖章的“小小监督员”，现在已经有快 **100万个** 了。
            
        -   **为什么人多才好？**：因为人越多，坏人就越难收买所有人，操场也就越安全
            
    2.  **我们的“安全法宝” —— 去中心化保障机制**
        
        -   不穿同样的校服 —— 客户端多样性 (Client Diversity)
            
            -   **法宝说明**：小朋友们用的“游戏规则说明书”不是同一个工厂印的。有的用 Go 语言写的，有的用 Rust 语言写的。
                
            -   **为什么安全**：如果有一家工厂印错了（程序出 Bug 了），因为大家穿的校服、用的工具牌子不一样，**只有一小部分人会受影响，其他人还能继续玩**，操场不会因此关门
                
        -   住在世界各地 —— 地理分布 (Geographic Distribution)
            
            -   **法宝说明**：我们的机器人小伙伴分布在美国、德国、亚洲、南美洲等世界各个角落。
                
            -   **为什么安全**：就算某一个地方突然断电了或者不让玩了，**其他地方的小朋友还是可以继续连线**，操场永远不打烊
                
        -   不全租一家的房子 —— 自建与云托管并存
            
            -   **法宝说明**：有些机器人住在云端的大厂房里（比如 AWS），但还有将近一半的机器人（约 45%）是**小朋友们自己家里的电脑**。
                
            -   **为什么安全**：这叫“多云部署”。我们不依赖任何一家大公司，这样就算大公司的机器坏了，我们**自家的电脑还能撑起整个网络**。
                
        -   每人手里都有糖果 —— 经济去中心化
            
            -   **法宝说明**：糖果（ETH）分散在 100 万个监督员手里，而不是被一两个大老板独占。
                
            -   **为什么安全**：如果坏人想捣乱，他必须买到超级超级多的糖果才行，这太贵了，他根本买不起！而且如果他捣乱，他的糖果会被\*\*“罚没（Slashing）”\*\*，这就是惩罚坏孩子的规矩。
                
        -   谁都能来玩 —— 无需许可 (Permissionless)
            
            -   **法宝说明**：以太坊的说明书是\*\*开源（所有人都能看）\*\*的。
                
            -   **为什么安全**：不需要大老板同意，只要你有一台电脑，你随时可以搬个小板凳加入操场，帮大家一起对账。**没有人能把你赶走。**
                
7.  **Gossip 协议（八卦协议）**
    
    1.  **它是怎么传八卦的？ —— “一传十，十传百”**
        
        想象一下，你发现了一个超级大秘密，你会怎么做？
        
        -   **局部随机转发**：你不会拿着大喇叭对着操场上几千个小朋友喊。你只会拉住身边**随机选出的 2-3 个好朋友**，悄悄告诉他们。
            
        -   **邻居继续扩散**：这几个好朋友听完后，也会随机去找他们身边的 2-3 个还没听过这个秘密的小朋友去说。
            
        -   **全网发酵**：就这样，虽然每个人只跟几个人说话，但只要几秒钟，全操场的小朋友就都知道这个八卦啦！这就是**指数级扩散**。
            
    2.  **它为什么这么厉害？ —— 它的三个“超能力”**
        
        -   挂了也不怕 —— 高可用与容错
            
        -   不用认识所有人 —— 可扩展性
            
            -   只需要跟那 2-3 个邻居说话，**不用担心自己累坏了。**
                
        -   快而不炸 —— 缓存与过滤
            
            -   **法宝说明**：**已见缓存（Cache）与跳数限制（TTL）**。
                
            -   **规则**：如果你听过这个八卦了，别人再跑来跟你说，你会摆摆手说：“我知道啦，不用再说了！”（即丢弃已经见过的交易 / 区块）。而且八卦传了太多手之后就会自动停下，防止全网都在吵架，导致“炸锅”（设置传播TTL / 跳数限制）。
                
    3.  **它们在传什么“小秘密”？**
        
        节点机器人们每天通过这个八卦协议交换三类最重要的东西：
        
        -   **新交易（Transactions）**：谁给谁转了多少钱的小纸条。
            
        -   **新区块（Blocks）**：新写好的一页大账本。
            
        -   **投票消息（Attestations）**：也就是监督员们的举手投票，“我也觉得这一页是对的！”
            
    
    **名词小解释：**
    
    -   **收敛（Convergence）**：全网小朋友最后都听到了同一个版本的八卦，大家达成了一致
        
8.  如果你也想在家里养一个属于自己的\*\*“超级机器人管家”\*\*（搭建个人节点），该怎么做呢？
    
    1.  **第一步：选房型 —— 决定你要什么样的“管家”**
        
        -   全节点
            
        -   归档节点
            
        -   轻节点
            
    2.  **第二步：选地址 —— 机器人住哪儿？**
        
        -   **住在家里 (本地机器)**：把机器人放在你自己的小电脑里。**优点是隐私好**，没人知道你在干什么；缺点是你要自己负责它的用电和网络。
            
        -   **住在云端 (云服务器)**：给机器人在外面的大饭店租个房间（如 AWS、谷歌云）。**优点是网络非常稳**，但每个月要交租金.
            
    3.  **第三步：请大脑 —— 安装两个“核心小伙伴”**
        
        还记得我们之前说的吗？现在的节点需要两个脑袋一起工作：
        
        -   **执行层脑袋 (EL)**：负责算账。你可以选 **Geth** 或者 **Nethermind** 牌的
            
        -   **共识层脑袋 (CL)**：负责守规矩。你可以选 **Lighthouse** 或者 **Prysm** 牌的
            
        -   它们之间会通过**秘密电话 (Engine API)** 互相配合。
            
    4.  **第四步：补课 —— 选择“抄作业”的方式 (同步模式)**
        
        新机器人刚来，得把以前的账本抄回来，这叫**同步**：
        
        -   **快照同步 (Snap Sync)**：这是最聪明的办法。先找个好朋友把最近的\*\*“照片”\*\*传给你，你直接搬家具进屋，再补最近的课。**几个小时就能抄完**。（执行层同步模式）
            
        -   **检查点同步 (Checkpoint Sync)**：让共识脑袋直接从最近的一个\*\*“重点标记”\*\*开始看，不用从第一页开始读，速度飞快。(共识层同步模式)
            
    5.  **第五步：开窗户 —— 开启 JSON-RPC 接口**
        
        机器人住下后，你得给它开个\*\*“服务窗口” (JSON-RPC)\*\*
        
        -   这样你手机里的钱包（比如小狐狸）才能通过这个窗口问机器人：“我的钱还在不在？”。
            
        -   **注意安全**：这个窗户不能随便对着大街开，不然坏人会跑进来的！
            
    6.  **第六步：深造 —— 变成“数据分析大师”**
        
        如果你想研究全班同学是怎么花钱的（为了链上数据分析 / 报表 / 量化研究而搭建节点），你可以给机器人装个\*\*“翻译机” (Ethereum ETL)\*\*
        
        -   它能把机器人那些看不懂的乱码笔记，变成整齐的**表格和数据库**，让你能像看故事书一样分析数据。
            
    7.  **第七步：当保姆 —— 维护与优化**
        
        机器人也需要照顾：
        
        -   **防火墙 (Firewall)**：就像给家里装个防盗门，只让认识的朋友进来。
            
        -   **监控 (Monitoring)**：时刻看着机器人的体温（CPU）和书包（硬盘）够不够用。
            
        -   **备份 (Backup)**：万一机器人坏了，得有一份备用的笔记，不然重抄一遍可是很累的。
            
9.  如果想搭建节点，但是觉得买大硬盘太贵了，怎么办呢？
    
    **就算不自己养机器人，我们也能借别人的“超级放大镜”来看数据！**
    
    一些工具：
    
    | 方法 | 像什么 | 优点 | 缺点 |
    | --- | --- | --- | --- |
    | Dune 平台 | 涂色书 | 零成本，直接看漂亮图表 | 免费版有时候要排队 |
    | 谷歌图书馆 | 企业仓库 | 数据超级全，能跟自家的拼在一起 | 需要会用谷歌的云服务 |
    | Etherscan | 放大镜 | 查单个地址最快、最简单 | 不能查太复杂的大数据 |
    | 数据小管家 | 私人助手 | 拿到的直接就是整理好的结果 | 查多了可能要付钱 |
    
    **一句话总结**：如果你不想在家里养机器人，可以**租用别人的云端机器人**（BigQuery），或者**去看别人画好的图表**（Dune）！
    
    **名词小解释：**
    
    -   **不跑节点 (Zero Node)**：意思是不在自己家电脑里装那个沉沉的大账本程序。
        
    -   **仪表盘 (Dashboard)**：像赛车的仪表盘一样，上面有各种跳动的数字和曲线，让你一眼看清全网动态。
<!-- DAILY_CHECKIN_2026-01-20_END -->

# 2026-01-19
<!-- DAILY_CHECKIN_2026-01-19_START -->



tips：今天过生日，浅浅摆一天~

1.  开发者或机构运行全节点的必要性
    
    **为什么厉害的开发者和公司一定要自己开一家“全能小图书馆”（运行全节点）呢？**
    
    我们可以把这件事想象成：**为什么要在家里请一个专属的“机器人管家”，而不是每次都打电话问外面的“客服中心”？**
    
    1.  **不听别人吹牛，自己看证据” —— 验证 (Verify)**
        
        当你用外面的客服中心（比如 Infura 这种公共 RPC）时，你每查一次余额、发一次红包，他们都会知道你是谁、你在哪。
        
        -   **专属管家**：如果你家里有自己的全节点机器人，你问他任何问题，**外面的机器人都不知道**。
            
        -   **名词解释**：**RPC 节点**就像是一个“客户服务中心”，你打电话（发请求）过去，它查完数据库告诉你答案。
            
    2.  **不怕被“关禁闭” —— 抗审查 (Censorship Resistance)**
        
        如果你总依赖别人的机器人，万一那个机器人公司不开心了，或者他们的机器坏了，你就没法玩游戏了。
        
        -   **自己做主**：有了自己的全节点，你想什么时候发信息就什么时候发，**没人能掐断你的电话线**。
            
        -   **名词解释**：**抗审查**就是没有人能随便不让你说话或者不让你玩。
            
    3.  **不听别人吹牛，自己看证据” —— 验证 (Verify)**
        
        以太坊的世界里有一句超级重要的话：**“不要信任，要验证”**（Don't trust, verify）
        
        -   **亲手检查**：别人告诉你“你有 100 块钱”，你可能不信。但你自己的全节点机器人会把所有的账本**从头到尾自己算一遍**，确保一分钱都不会错。
            
    4.  **帮大家“撑腰” —— 客户端多样性 (Client Diversity)**
        
        想象一下，如果全班小朋友都用同一种品牌的书包，万一这种书包的拉链坏了，大家都没法装书了。
        
        -   **多选几种品牌**：如果你选一个比较少人用的机器人程序（比如 Besu 或 Nethermind），就算最流行的那个坏了，**以太坊这个大网络还是能照常运行**。
            
        -   **名词解释**：**客户端多样性**就是大家用不同的“说明书”来玩游戏，这样更安全。
            
    5.  **拥有“最快的大脑” —— 稳定与低延迟**
        
        外面的客服中心离你很远，打电话过去要等好久。
        
        **就在身边**：全节点就在你家里的电脑上，**速度超级快**，而且你想怎么改这个机器人都可以。
        
    6.  **参与“定规矩” —— 用脚投票 (Sovereignty)**
        
        当以太坊要改游戏规则（升级）时，如果你有自己的全节点，你可以**自己决定要不要换新规则**。
        
        **小主人权力**：如果你只听别人的，别人变了你就得跟着变；有了节点，你就有了**话语权**。
        
        **总结一下（小朋友背诵版）：**
        
        厉害的人要自己跑节点，是为了拿回三样宝贝：
        
        1.  **安全和隐私**：自己的秘密自己守。
            
        2.  **不求人**：别人坏了我也能玩。
            
        3.  **说话算数**：对规则有自己的投票权。
            

> 英文全称：RPC = Remote Procedure Call，即“远程过程调用”。
> 
> 简单来说,就是一个程序(或客户端)可以像调用本地函数/方法一样，向远端服务器节点(或服务)发出请求，让对方执行某个过程(procedure/方法/函数)，并返回结果。客户端自己并不关心这个过程实际运行在哪台机器或在什么网络之中。
> 
> **在区块链生态中，RPC 通常指区块链节点提供的一种接口，供应用程序 (比如钱包、dApp、区块浏览器等)远程调用。**
<!-- DAILY_CHECKIN_2026-01-19_END -->

# 2026-01-18
<!-- DAILY_CHECKIN_2026-01-18_START -->




1.  **以太坊节点间的连接与通信方式**
    

**先找到人 -> 拉上加密专线 -> 最后靠“传八卦”把消息传满全网**。

1.  第一步：找朋友——**节点发现**
    
    想象你是一个刚搬到以太坊社区的小朋友，你家谁都不认识，这该怎么办呢？
    
    -   **引导节点 (Boot nodes)**： 这就好比你刚进社区时，\*\*只认识一个“热心老街坊”。这个老街坊是长期在线的，他手里有一份通讯录。\*\*你先去找他，他会把其他小朋友的联系方式告诉你。
        
    -   **UDP 协议 —— “挥手打招呼”**： 节点之间第一次打招呼用的是 **UDP**。它就像你在操场对面大喊一声“喂！你在吗？”，非常快，但有时候对方可能没听见。
        
    -   **Kademlia (卡德姆利亚) —— “排座位的规则”**： 这听起来名字很长，但其实它就是一种**排座位的算法**。每个节点都有一个编号，这个规则能让你很快找到离你编号“近”的小朋友，让大家能更有序地聚在一起。
        
    
    **总结：** 这一步就是通过老朋友拿到通讯录，把自己的“好友列表”填满。
    
2.  第二步：拉专线——**建立安全连接**
    
    认识新朋友后，为了保证传的消息不被坏人偷听，你们得拉起一条\*\*“秘密电话线”\*\*。
    
    -   **TCP 协议 —— “靠谱的电话线”**： 和刚才打招呼的 UDP 不同，**TCP** 是一根非常结实的电话线。它会保证：只要我说了，你一定能听到；如果信号不好，我会重新说一遍。
        
    -   **RLPx —— “加密锁和分机号”**：
        
        -   **加密锁**：在说话之前，两个节点会先对个暗号，把电话线加密，别人偷听也听不懂。
            
        -   **分机号**：它支持“多路复用”，就像一根大电话线里分出了很多小分机，有的分机负责传新账单（交易），有的负责传老历史，互不干扰。
            
3.  第三步：传消息——**Gossip协议（八卦协议）**
    

这是整个网络最神奇的地方：如果全世界有上万个节点，怎么能让大家在几秒钟内都收到同一个新消息呢？

-   **Gossip 协议 (八卦协议/流言协议)**： 它的工作方式就像\*\*“办公室传八卦”\*\*
    
    -   我收到了一个小秘密（一笔新交易或一个新区块），我不告诉所有人，我只**随机告诉身边 2-3 个好朋友**。
        
    -   这几个好朋友再分别告诉他们身边的 2-3 个朋友。
        
    -   这样一传十、十传百，只要几秒钟，全世界的节点就都知道这个八卦啦！
        
    -   **好处**：就算中间有几个小朋友掉线了或者不说话，消息也能通过其他路传过去，非常可靠。
        
-   **请求-响应 (Request-Response)**： 如果你今天请假没来学校，错过了一天的八卦，你不能靠别人传，因为那些八卦已经过时了。这时候，你会专门去找一个同学问：“能把昨天的作业（历史区块）发给我吗？”这就是**请求-响应**（按需拉取历史区块、状态等）。
    

2.  **以太坊中，存储数据的节点其实是不一样大的，可以把节点分成三类：\*\*全节点、归档节点和轻节点。\*\*用“图书馆”的故事来讲解：**
    

1.  全节点（Full Node）——“全能的小图书馆”
    
    **全节点**是大多数小朋友会选择的类型。它非常独立，不需要求别人。
    
    -   它的口袋里装了什么？
        
        -   **全部的“故事书”**：也就是从第一个区块到现在所有的交易记录
            
        -   **最新的“名单”**：它记住了现在每个小朋友口袋里有多少钱（这叫**状态**）
            
    -   **什么叫“修剪”（Pruning）？为了不让书架挤爆，全节点会把很久以前的“旧名单”扔掉，只留最近的。这就叫修剪。**
        
    -   **它的本领**：它会自己检查每一个新故事是不是真的，是个“不求人”的诚实孩子。
        
2.  归档节点（Archive Node）——“超级大的国家档案馆”
    
    **归档节点**就像是一个巨大的、永远不打扫的超级图书馆。
    
    -   **它的口袋里装了什么？**
        
        -   全节点有的它都有，而且它**从来不扔东西**！
            
    -   **它的绝活——“时间机器”**： 如果你问：“三年前的今天，小明口袋里有几个苹果？”全节点可能因为“修剪”过而不记得了，但归档节点能**秒回**你，因为它记住了历史上每一个时刻的所有名单。
        
    -   **缺点**：它太重了，需要好多个超级巨大的硬盘才能装下。
        
3.  轻节点（Light Node）——“随身携带的小目录”
    
    **轻节点**就像是只拿着一本\*\*“书名目录”\*\*的小朋友，它通常住在你的手机或者手表的钱包里。
    
    -   **它的口袋里装了什么？**
        
        -   它只存\*\*“区块头” (Block Headers)\*\*。你可以把它想象成书的“封面”或“目录”，里面没有具体的故事内容，但有防伪标志。
            
    -   **它是怎么工作的？**
        
        -   它自己不存大书，当它想知道小明有多少钱时，它会跑去问“全节点”大哥哥。
            
    -   **它怕被骗吗？**
        
        -   不怕！全节点给它答案时，还会给它一个\*\*“默克尔证明” (Merkle Proof)\*\*，轻节点只要对照手里的目录一比，就知道对方有没有撒谎
            
4.  **名词解释：**
    
    -   **状态 (State)**：就是现在大家口袋里各有多少钱、每个合约长什么样的“现况快照”。
        
    -   **区块头 (Block Header)**：书的封面和简介，通过它能算出整本书对不对，但它很轻。
        
    -   **同步 (Sync)**：就像是把别人的书抄到自己书架上的过程。
        
    
    | 类型 | 像什么 | 记性好吗？ | 占地方吗？ | 优点 |
    | --- | --- | --- | --- | --- |
    | 全节点 | 大型图书馆 | 记得现在，忘了很久以前 | 中等 | 最安全、最常用 |
    | 归档节点 | 国家档案馆 | 记得从第一天到现在的所有事 | 非常大 | 能查历史“时间线” |
    | 轻节点 | 电子目录机 | 自己不记，靠问别人 | 极小 | 手机也能跑 |
    

所以呀，如果你只是想买个玩具（转个账），用**轻节点**就够了；如果你想开个银行（搞开发），最好自己跑个**全节点**；如果你想当历史学家（数据分析），那就得准备好多硬盘去跑**归档节点**啦！
<!-- DAILY_CHECKIN_2026-01-18_END -->

# 2026-01-17
<!-- DAILY_CHECKIN_2026-01-17_START -->





1.  **客户端（client）和节点（node）的区别？**
    

简单理解：客户端是写出来的程序，节点是跑程序的电脑

2.  **一个完整的以太坊节点由两个核心客户端组成：**
    

-   **执行客户端（EL）**——勤快的书记员
    
    -   **他的工作**：干苦活。他会听大家广播的交易，然后在EVM里算账
        
    -   **他的职责**：记下谁有多少钱、执行各种魔法合同（智能合约）、维护大账本的状态
        
    -   **常见的名字**：Geth, Nethermind, Besu, Erigon, Reth
        
-   **共识客户端（CL）**——公正的法官
    
    -   **他的工作：**做决定。他不去算每笔小账，他只管大家有没有遵守“权益证明 (PoS)”的规矩。
        
    -   **他的职责：**决定谁来举手发言（提议区块）、组织大家投票、看看哪条路才是“正统”的
        
    -   **常见的名字**：Lighthouse, Prysm, Teku, Nimbus, Lodestar
        

3.  **EL 和 CL怎么说话？（怎么相互配合）——Engine API**
    

Engine API 就是 EL 和 CL 之间的**内线电话**。法官（CL）会打电话问书记员（EL）：“这个新账单算出来的结果对不对？”书记员算完后把结果告诉法官。只有他们两个沟通好了，这一页账本才算完成。

4.  **“超级奖励官“——验证者（客户端）**
    

-   **验证者：**如果你是个想要赚奖金的人，就可以多装一个”插件“，叫验证者客户端
    
-   **他的规矩：**交32个ETH作为”保证金“
    
-   **工作内容**：轮到你的时候，你要大声提议新区块，或者给别人的区块投票（见证）
    
-   **陪审团比喻**：他就像**陪审团代表**，按规则投票，表现好就有奖励，捣乱的话保证金就会被扣掉。
    

5.  **对外联系的”窗口“——JSON-RPC接口**
    

-   当你手机上的小狐狸钱包（MetaMask）想问“我还有多少钱？”时，它就会敲敲节点的窗户。
    
-   这个窗户就叫 **JSON-RPC 接口**。它是让外部应用（比如你的游戏、钱包）和执行客户端交流的通道。
    

**总结一下：**

一个**以太坊节点** = **电脑** + **勤快的书记员 (EL)** + **公正的法官 (CL)** + (可选的) **超级奖励官 (Validator)**。

他们通过\*\*“内线电话” (Engine API)\*\* 每天在家里说悄悄话，通过 **P2P 网络** 和全世界的其他小朋友交换信息，共同维护这个巨大的“世界计算机”！

6.  **CL 组织谁投票？**
    

**CL是在组织和协调“全球成千上万个验证者”共同达成共识。详细拆解：**

-   一个节点可以不运行验证者（只做观察和同步），也可以同时运行成百上千个验证者（如果你有足够的 ETH）。**真正投票的是“验证者”**
    
-   CL的”组织“工作体现在两个层面：
    
    -   **对内（组织自己的验证者）：** 如果你的节点挂载了“验证者客户端”，共识客户端会像一个**指挥官**一样告诉它：“报时员说现在是你的时隙（Slot）了，请立刻针对你看到的最新区块进行投票（见证）！”
        
    -   **对外（组织全网的消息交换）：** 这是最核心的“组织”工作。共识客户端拥有自己的 **P2P 网络**。它不停地与全球其他节点的共识客户端交换信息：
        
        -   **广播投票：** 把你家验证者的选票发给全世界（通过Gossip协议）
            
        -   **收集选票：** 把全世界其他验证者的选票收回来
            
        -   **计票处理：** 收集到足够的票数后，共识客户端会利用 **Gasper 共识算法**进行“计票”，计算哪条链才是大家公认的“正统链头”
<!-- DAILY_CHECKIN_2026-01-17_END -->

# 2026-01-16
<!-- DAILY_CHECKIN_2026-01-16_START -->






1.  **dApp的几个核心技术特征？**
    

-   去中心化
    
-   确定性
    
-   图灵完备
    
-   隔离性（沙盒）
    

2.  **dApp的优势**
    

-   零停机时间
    
-   隐私和匿名性
    
-   抗审查
    
-   数据完整性：链上数据一旦写入就不能篡改
    
-   无需信任 / 可验证行为（不需要相信运营方，而是相信代码+共识规则）
    

3.  **dApp能做些什么？**
    

-   金融（DeFi）
    
-   资产与内容（NFT & 游戏 / 内容）
    
-   组织与治理（DAO）
    
-   基础设施类dAp
    
-   其他实验性应用
    

4.  dApp开发的缺点 / 代价
    

-   维护困难
    
-   性能开销与扩展难度
    
-   网络拥堵与Gas成本
    
-   用户体验门槛高
    
-   “再中心化”倾向
    

5.  PoS机制和Gasper机制？
    

简单说，\*\*PoS 是共识机制的“类别（Type）”，而 Gasper 是以太坊在这个类别下具体的“协议实现（Protocol）”。\*\*两者的关系可以从下面几个维度理解：

1.  **为什么需要 Gasper 这种复合设计？**
    
    -   **PoS (Proof of Stake，权益证明)**：这是一个大的范畴。它规定了节点不再通过消耗电力“挖矿”，而是通过\*\*质押代币（ETH）\*\*来获得验证区块的权利。
        
    -   **Gasper**：是以太坊在信标链（Beacon Chain）中运行的**具体共识协议名称**。它定义了百万级验证者如何通过具体的算法逻辑来达成共识。
        
    -   可以类比为：**“汽车”是类型（PoS），而“特斯拉 Model 3”是具体的型号（Gasper）**
        
2.  **Gasper 的两个核心组件**
    
    -   Gasper 协议实际上是由两个关键算法结合而成的“复合共识”，旨在平衡网络的“安全性”与“活性”。
        
    -   **Casper-FFG (终局性机制)**：主要负责**最终性（Finality）**。它通过周期性的投票，确保一旦某个区块被盖上“最终确认”的戳，除非有极大量的验证者被削减（Slashing）质押，否则该区块不可回滚。
        
    -   **LMD-GHOST (链头选择算法)**：主要负责**链头选择（Fork Choice）**。当网络由于延迟产生短暂分叉时，它指导验证者如何根据权重（投票数）选出最正统的那条链继续构建，确保网络不会因分歧而停摆。
        
3.  **为什么需要 Gasper 这种复合设计？**
    
    -   **验证者规模巨大**：目前以太坊拥有接近 100 万个活跃验证者。
        
    -   **两全其美**：Gasper 的设计让以太坊即便在部分节点掉线的情况下也能持续产出区块（靠 LMD-GHOST 维持活性），同时在节点足够多且诚实时提供不可更改的账本确权（靠 Casper-FFG 维持安全性）。
        

6.  提议者和验证者？
    

验证者是一个整体身份，而提议者是验证者在特定时间点被分配的一个具体职责。Gasper则是将这两者协作逻辑组合在一起的底层共识协议。

1.  **提议者（Proposer）：** 在每一个 **Slot（时隙）**（约 12 秒）中，协议会从全体验证者中随机选出**一名**验证者作为提议者。提议者的任务是收集交易、构造区块并将其广播给全网。
    
2.  **验证者（即见证者/Attester）：** 在同一个 Slot 中，其他成百上千名验证者则负责进行**见证（Attestation）**。他们会对提议者发出的区块进行投票，确认其合法性以及是否将其作为链头。
    

**形象比喻：** 来源将共识过程类比为“法庭”：**提议者**像是一名提交判决建议的成员；而**其他验证者**则组成了“陪审团”或“法官团”，通过投票（见证）来决定是否认可这一判决，并确保全网达成共识。

7.  以太坊执行层使用DevP2P协议维护点对点网络
    

-   **发现层（Discovery Stack）**基于UDP，用来发现和加入新节点
    
-   **DevP2P 通信层**基于 TCP，负责在已连接节点间传递区块、交易等实际数据
    

8.  **同步委员会（Sync Committee）**？
    

每27小时会随机挑选512个验证者组成一组，他们连续为区块头签名，让轻客户端只通过验证少量签名就能跟随链头，而不需要下载和执行完整区块，从而让手机、浏览器插件甚至IOT设备都能以低成本参与。

9.  MEV和PBS（提议者-建构者分离）？
    

-   MEV就像是区块链世界的“排队潜规则”或“套利小费”
    
    -   **官方定义**：指区块构建者通过对区块内的交易进行**重新排序、包含或排除**，所能获取的超出常规区块奖励和 Gas 费之外的额外价值。
        
    -   **简单理解**：在以太坊上，交易并不是谁先发谁就先成交，而是由负责打包的人决定顺序,。如果你能决定顺序，你就可以通过在别人的大额买单前后插入自己的买单（三明治攻击）或利用不同交易所的价格差（套利）来赚大钱。
        
    -   **带来的问题**：赚这些钱需要非常专业的技术和强大的算力。如果每个验证者都要自己去钻研怎么套利，那么只有拥有大型机房和专业团队的大机构才能盈利，这会导致以太坊变得**中心化**，违背了去中心化的初衷。
        
-   **PBS** 是一套“分工协作”的方案，旨在解决上面提到的中心化问题。它将原来由一个人干的活儿拆成两个角色：**建构者（Builder）提议者（Proposer）**
    
    -   **建构者（Builder）——“打包达人”**：他们是专业人士，专门负责研究怎么把成千上万的交易排好顺序，从而压榨出最多的 MEV。他们会互相竞争，把打包好的“区块成品”连同给验证者的报价一起提交。
        
    -   **提议者（Proposer）——“盖章验证者”**：他们就是普通的以太坊验证者。他们不需要懂复杂的套利逻辑，只需要从众多的“区块成品”里选一个**出价最高**的，然后签名通过即可。
        

10.  **以太坊的运行过程全览（浅显版）**
     

可以想象成一个\*\*全球联网的”超级自动化法院和银行系统“。\*\*这个系统的运行大致可以分为以下几个关键环节：

-   第一步：用户发起请求（签署交易）
    
    -   一切的起点是**用户（EOA 账户）**。当你想要转账或者使用一个 dApp（比如兑换代币）时，你会使用你的**私钥**对一个“指令”（交易）进行签名。
        
    -   此时，此交易会带上Gas费，作为租用这台”全球计算机“算力的报酬。
        
-   第二步：传八卦（Gossip网络传播）
    
    -   一旦签署了交易，你的钱包就会把签名后的交易发给与之连接的以太坊节点。随后，节点们会利用一种叫Gossip协议的机制，像”办公室传闲话“一样，在几秒钟内把你的交易传遍全球成千上万个节点。
        
    -   这些交易会暂时存放在每个节点的\*\*交易池（Mempool）\*\*里，排队等待被打包。
        
-   第三步：谁来打包？（提议者与建构者）
    
    -   以太坊每 12 秒为一个时间段（Slot），协议会通过算法**随机选出一名验证者（Validator）提议者（Proposer）**
        
    -   在现在的机制下（PBS模式），通常有专门的建构者负责把交易排好顺序，压榨出最大的价值，然后交给提议者
        
    -   提议者负责挑选出一组交易，把它们装进一个”区块“里，并向全网广播：“这一页账本我写好了！”
        
-   第四步：计算与核对（执行层与虚拟机）
    
    -   当其他节点收到这个新区块时，它们内部的\*\*执行客户端（EL）\*\*就要开始干活了。
        
    -   每个节点都会运行 **EVM（以太坊虚拟机）**，它像一个标准的“计算引擎”，逐条执行区块里的代码。
        
    -   **EVM 会检查：** 你的余额够不够扣？代码跑出来的结果对不对？。执行完后，节点会更新自己的“账本状态”（比如 A 账户少了 1 ETH，B 账户多了 1 ETH）。
        
-   第五步：陪审团投票（验证者见证）
    
    -   光提议者一个人说“账本是对的”不算数，其他的验证者们会组成\*\*“陪审团”\*\*（见证者）进行投票。
        
    -   他们会核对提议者的区块是否合法、有没有作恶。如果觉得没问题，他们就会提交一份**见证（Attestation）**，相当于在这一页账本上盖个章。
        
-   第六步：选链头与终局性（共识达成）
    
    -   如果网络中出现了分叉（比如同时有两个提议者发出了不同的区块），以太坊会使用**LMD-GHOST算法**来选出“获得投票权重最大”的那条链作为正统链头。
        
    -   最后，通过 **Casper-FFG 协议**，当投票达到一定比例并经过一段时间后，这笔交易就会进入\*\*最终确定（Finality）\*\*状态。这意味着它已经刻在了区块链上，除非罚没极大量的资产，否则不可更改。
        

11.  关于“选出某条链作为链头”，链头是什么意思？
     

**链头选择规则（Fork Choice Rule）**就是选出正确的那一个区块，目前使用的是LMD-GHOST算法。

-   **为什么要选：** 在去中心化网络中，由于网络延迟等原因，可能会在同一时间出现两个或多个合法的区块（即“分叉”），节点需要一套标准来决定哪一个才是“账本的真实延续”。
    
-   **什么是“正确”：** 在以太坊中，“正确”或“正统”的定义不是看谁先到达，而是看哪一个区块获得的**验证者投票（见证/Attestation）权重最大。**
    
-   **算法的作用：** LMD-GHOST 就像一个导航员，它计算全网验证者的最新投票，引导所有节点在分叉路口选择那条“脚印最深”（投票权重最高）的路径作为**正统链头（Canonical Head）**
    

**“链头”是相当于后面连上来的区块而言的。**就是目前大家公认的最新的那个“正统排头兵”。 选链头就是为了告诉全网：下一页账本请往这个区块后面接，不要接错了地方

12.  共识效率的常见指标？
     

-   吞吐量
    
-   延迟
    
-   资源消耗
    
-   容错能力
<!-- DAILY_CHECKIN_2026-01-16_END -->

# 2026-01-15
<!-- DAILY_CHECKIN_2026-01-15_START -->







1.  **智能合约和dApps的区别是什么？**
    

智能合约是部署在区块链地址上的一段程序代码和持久状态。它遵循“如果，，，那么，，，”的逻辑，在预设条件满足时自动执行。

dApps通常由两部分“拼接”而成：**链上的智能合约（提供后端逻辑） + 链下的前端页面 / 客户端（提供用户界面）**。 dApps中可能包含多个智能合约来处理不同的业务。

2.  **Tokens如何产生和管理？**
    

**Tokens由智能合约产生并管理**，实质上是智能合约存储空间里的一个记账系统，智能合约通过修改内部账本记录来创造价值资产（可以把代币想成游戏中的“金币”或“点券”,智能合约可以发行这些“金 币”,供 dApp 使用。）；但同时，智能合约的运行需要\*\*“燃料”\*\*，因此它必须消耗以太币（ETH/Gas）来支付网络节点的计算成本。

3.  **PoS机制原理？**
    

节点质押ETH成为验证者，每个时隙由协议随机选出提议区块的验证者，并由其他验证者投票参与。质押的ETH数量越多、表现越稳定的验证者，长期来看被选中参与记账的频率更高。

4.  **PoW（工作量机制）和PoS（权益证明）的安全性来源？**
    

PoW：攻击者想要“51%”的攻击，就必须要付出极其巨大的算力和电费；

PoS：slashing机制——验证者的部分或者全部质押资产会被销毁或罚没；长时间的离线也会被逐步罚没。

5.  **Dencun升级？Proto-Danksharding？Danksharding？**
    

Dencun升级是以太坊的一次重大复合升级，由 **Deneb（共识层）**和 **Cancun（执行层）两部分的改动组成。该升级已于 2024 年 3 月 13 日正式上线以太坊主网。它是以太坊迈向完整 Danksharding 的关键中间步骤，主要目的是引入数据可用性（DA）**相关的特性，并优化执行层。它被视为以太坊走向“以 Rollup 为中心”路线图的里程碑，显著降低了第二层网络（Layer-2）的运行成本。

Proto-Danksharding（也称为 EIP-4844），是 Dencun 升级的核心内容，旨在通过技术手段大幅降低 Layer-2（Rollup）向主链提交数据的成本。它引入了一种新的\*\*“携带 blob 的交易类型”\*\*。**Blob** 是专门为 Rollup 设计的数据空间，它们存储在共识层中。

完 整 Danksharding 的目标，是在保持去中心化前提下，将每个区块可用的数据空间扩展到几十甚至上百个 blob，具体数值(如 64、128、256 等) 仍在研究和参数调优中。

6.  **Rollup机制**
    

在L2层处理大量交易，并将这些交易异步或压缩后打包提交至L1。结果被送回L1后，根据Rollup类型的不同，验证方式有所区别：

-   **Optimistic Rollup（乐观式）：** 默认交易是有效的，只有在有人质疑时，才通过“\*\*欺诈证明”\*\*在 L1 进行验证。
    
-   **ZK Rollup（零知识证明）：** 随数据附上一份\*\*“有效性证明”\*\*，L1 只需要通过数学证书直接验证这批交易的正确性。
    

职责分离：在以太坊的扩容愿景中，**L2 负责执行（Execution）**，追求高速度和多样化应用；而 **L1 负责结算（Settlement）和数据可用性（DA）**，负责保障最终的安全性和去中心化。

7.  **ETH（以太币）的几大核心作用**
    

-   Gas：支付交易和计算费用
    
-   参与网络共识与安全（Staking）；ETH在共识层扮演了三个关键角色：
    
    -   质押（Staking）资产
        
    -   获得奖励（Rewards）
        
        -   共识层奖励（投票）
            
        -   执行层奖励（tip、MEV）
            
        -   额外激励
            
    -   提供经济安全（Security / ”保证金“）
        
-   奖惩机制
    
-   价值储存和交换媒介
    
    -   数字货币与投资资产
        
    -   DeFi生态的抵押品与流动性基石
        
    -   NFT与数字经济的基石货币
        

8.  **验证者的工作**
    

![image.png](attachment:881d4986-cdb0-4277-9828-b7bc37145bcd:image.png)

9.  **典型的Slashing行为**
    

-   **对同一个 slot 双重提议区块(proposer double block)**
    
    -   在以太坊的PoS节拍中，时间被划分为Slot（时隙），每个Slot都会由协议随机选出一名验证者作为“提议者”来发布区块。
        
    -   具体定义：“双重提议区块”是指同一个验证者在被分配到的**同一个 Slot 内，提议了两个内容不同的区块。**
        
    -   **为什么会被惩罚：** 正常情况下，一个 Slot 只能有一个合法的提议块。如果一个提议者同时发布两个块，就会在网络中制造“分叉”和混乱，让其他验证者不知道该往哪条链上投票。这种行为被视为试图诱导网络产生冲突，因此会触发严厉的罚没。
        
-   **对同一高度同时给两个不同区块投票 (Double Vote)**
    
    -   **具体定义：** 验证者在同一个 Slot（即同一高度）内，同时为两个互相冲突的区块提交了投票（见证/Attestation）
        
    -   **危害：** 投票的作用是让全网对“哪条链是正统的”达成共识。如果验证者“脚踩两只船”，同时支持两个相互竞争的区块，就会破坏共识的确定性
        
-   **提交 “环绕投票”(surround vote)，试图篡改链的最终性。**
    
    -   **具体定义：** 这是一种更复杂的技术性攻击方式。验证者提交的投票（由来源和目标高度组成）“环绕”了其之前提交的另一个投票，或者被之前的投票所环绕
        
    -   **危害：** 这种行为的本质是试图篡改或撤销链的**最终性（Finality）**，通过违规投票来绕过共识协议的约束，从而达到回滚交易的目的。
        

10.  **Slashing流程**
     

-   **立即罚没本金：** 协议会立即烧掉验证者有效余额的一小部分（例如质押的 32 ETH 中的约 1 ETH）。
    
-   **强制移除：** 验证者会被立即移出活跃集合，进入长达约 **36 天的移除期**，期间会持续受到额外罚没。
    
-   **相关性惩罚：** 如果同一时间内有大量验证者集体作恶，每个验证者会被加重罚没比例，以防止串谋攻击。
    
-   **举报奖励：** 提交这些作恶证据的“举报者”会获得一部分 ETH 作为奖励，以此激励全网互相监督
    

> 补充:普通的 “短时间掉线”不会触发 Slashing，但会因为错过投票而被轻微罚没。只有真正危害共识安全的行为，才会触发上面的严厉 Slashing 流程。
<!-- DAILY_CHECKIN_2026-01-15_END -->

# 2026-01-14
<!-- DAILY_CHECKIN_2026-01-14_START -->








-   Rollup：在 Web3 编程中，如果直接在以太坊主网（L1）上执行每一行代码，Gas 费会贵得吓人。Rollup 就像是一个外包公司。它把成百上千笔交易拿到以太坊“外面”去处理（执行运算、修改状态），然后把这些交易的结果“压缩”成一小块数据，定期打包发送回以太坊主网。主网只负责存储最终结果并提供安全保障，不负责中间复杂的运算。
    
-   Blob：2024 年以太坊进行了一次叫 **EIP-4844** 的升级，专门引入了一种新的数据格式，叫 **Blob。**它就像是在高速公路上专门为 Rollup 的大货车开了一条“快递专线”。普通合约数据是永久存储的，但 Blob 数据在链上只保留约 18 天。因为 Rollup 只需要这些数据来验证交易，验证完就不需要永久占位子了。因为它不参与 EVM 的实时运算，且不是永久存储，所以 Gas 费比传统的 `Calldata` 降低了 90% 以上。
    
-   二者关系：**Rollup** 负责把一堆零散交易“打包”成一个大包，**Blob** 提供了一个极其便宜的“大盒子”，让 Rollup 能把这个包塞进去发给以太坊。
    

**实际支付费用 ≈ (Base Fee + Priority Fee) × Gas Used**

**Priority Fee是自愿支付，而Base Fee会自动销毁不会进任何人的口袋。如果支付的Priority Fee为0，那验证者不会“颗粒无收”吗？**

不会。验证者的收入来源：

-   **区块奖励（Block Reward）**：这是最核心的动力。每产生一个新区块，以太坊系统会自动“印”出新的 ETH 发给该验证者。这是固定工资，与交易手续费无关。
    
-   **手续费提成 (Priority Fee)**：属于“绩效奖金”
    
-   **MEV (最大可提取价值)**：这是高手验证者赚外快的方式，通过优化区块内交易的顺序来获取额外收益。
    

也就是说，只要有区块奖励在，依然会有验证者打包，但是交易排队的时间会变长。

**为什么Base Fee必须销毁？**

-   **防止合谋**：如果 Base Fee 给矿工，矿工可以为了抬高币价，故意制造垃圾交易塞满区块，虚假地把 Base Fee 炒高，然后钱又回到了自己兜里。
    
-   **通缩机制**：销毁 Base Fee 使得 ETH 变得稀缺。当链上活动频繁（烧掉的钱多）而系统增发（发给验证者的奖励）少时，ETH 就会进入通缩，对所有持有 ETH 的人都有利。
    

**Gas费的影响因素**

-   网络拥堵（供需决定价格）
    
-   全球用户活跃时间差
    
-   交互复杂程度
<!-- DAILY_CHECKIN_2026-01-14_END -->

# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->









今天开始学习solidity了，并且大致规划好了自己接下来的学习路径

* * *

### 2.4 以太坊核心机制

-   账户系统
    
    -   外部账户（EOA）——由私钥和公钥生成。类比银行卡，输入密码才能取钱。
        
    -   合约账户（CA）——不受私钥控制。类比自动售货机，没有主人坐在里面，但只要你从 EOA 投币（发起交易）并按下按钮，它就会根据内部预设的程序吐出商品。
        
-   Gas模型
    
    -   基础费用（Base Fee）
        
    -   小费（Tip）
        
    -   防止资源滥用
        
-   以太坊虚拟机（EVM）——EVM（Ethereum Virtual Machine）是 **以太坊的“大脑”**，是专门用来**运行智能合约的虚拟计算机**。它运行在每个节点上，确保整个网络在处理代码时，**结果都一致、可信任。**
    
    -   图灵完备
        
    -   全球同步：每个节点（矿工）都会自己执行一遍合约代码，保证结果相同
        
    -   隔离安全：保护隐私
        

### 2.5 一般流程与类比

> 一般流程
> 
> 1.  **用户通过 EOA 发起交易**（如调用合约与 **CA** 交互，或者转账与其他用户的 **EOA** 交互）。
>     
> 2.  **交易附带 Gas 参数**，矿工 / 验证者选择打包。
>     
> 3.  **EVM 执行合约代码**，修改存储（如更新 NFT 归属）。
>     
> 4.  **Gas 费用按 Gas Limit × Gas Price 扣除**，保障资源合理使用。
>     

> 相似类比
> 
> -   **EOA = 个人钱包**：你用私钥“签名”来证明身份，可以主动发起任何交易
>     
> -   **CA = 智能保险箱**：按照预设程序自动运行，只有满足条件才执行操作（如：收到正确密码后自动转账）
>     
> -   **Gas = 计算资源费用**：
>     
>     -   Gas Limit：你愿意支付的最大计算量
>         
>     -   Gas Price：每单位计算的价格
>         
>     -   如果设置 1000 单位 ×10Gwei，实际用了 800 单位，退还 200 单位的费用
>         
> -   **EVM = 全球共享计算机**：所有节点同时运行相同的程序，确保结果一致且可信
>     

## 3\. web3行业赛道

1.  **DeFi去中心化金融**
    
    1.  Uniswap（DEX）
        
        -   AMM自动做市商
            
        -   恒定乘积公式x\*y=k
            
        -   流动性池与LP
            
    2.  Compound（借贷）
        
        -   cToken凭证
            
        -   超额抵押机制
            
        -   强制清算风险
            
    3.  Sky / MakerDAO（稳定币）
        
        -   DAI / USDS稳定币
            
        -   稳定费率调节
            
2.  **NFT数字所有权**
    
    1.  唯一性与不可篡改
        
    2.  智能合约自动化版税
        
    3.  典型案例：CryptoPunks
        
    4.  交易平台：OpenSea
        
3.  **DAO去中心化组织**
    
    1.  社区驱动决策
        
    2.  Nouns DAO（艺术拍卖）
        
    3.  LXDAO（公共物品建设）
        
    4.  ConstitutionDAO（众筹实验）
        
4.  **MEME文化与投资**
    
    1.  典型代币：DOGE，PEPE
        
    2.  社区共识驱动
        
    3.  高波动与投机风险
        
5.  **交叉创新与乡建**
    
    1.  DeFi+NFT（抵押借贷）
        
    2.  DAO+MEME（治理融合）
        
    3.  AI+DeFi（智能策略/风控）
        
    4.  Web3+乡建（南塘DAO/南塘豆）
        
6.  **2025新兴趋势**
    
    1.  Intent-Based 意图交易
        
    2.  账户抽象（AA）与智能钱包
        
    3.  模块化区块链（DA/结算/执行）
        
    4.  AI + Web3深度融合
        

## 4\. NFT

### 4.1 相关概念

-   同质化代币（FT）：可以被任意交换的代币，就像钱一样
    
-   非同质化代币（NFT）：独一无二、完全不同，难以用来平等交换的代币
    
    -   未来世界的应用：游戏的虚拟资产、版权确认、买卖房产、艺术品收藏、交换物品、通行证
        
-   DYOR（Do your own research）
    
-   FOMO（Fear of missing out）
    
-   FUD（Fear, uncertainty, and doubt）
    

### 4.2 链接钱包

-   链接钱包相当于登录网站 APP，登录之后，网站将有权限读取你的钱包信息以及区块链上你的资产
    
-   由于区块链是公开透明的，网站将可以读取你的全部在区块链上的信息
    
-   钱包就是账户，而且是匿名的，无需填写密码或者任何联系信息
    

### 4.3 Mint NFT

-   良心NFT可以免费锻造，为什么还要钱呢？——任何在区块链网络中的操作，都需要支付一笔手续费（Gas Fee）给区块链矿工来维持去中心化网络运行。
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->










学习了《web3实习手册》中区块链和以太坊的基础概念，安装好了所需的软件，锻造了自己的第一个NFT！（nft相关笔记明天补充）。

参与了以太坊中文周会。

通过下午的co-learning学到了很多行业相关知识。

在晚上的web3行业全局介绍中，对自己未来方向似乎更明确了一些（相关笔记明天补充）。

* * *

## 1\. 区块链基础概念

### 1.1 区块链的定义

由“区块”和“链”组成，数据按时间顺序串联为“区块链”。每个区块存储容量有限，**会包含之前的区块摘要**（哈希）。

特性：

-   不可篡改
    
-   公开透明、匿名
    
-   快速交易
    
-   去中心化：每个节点都会存储一份相同的区块链数据
    

### 1.2 比特币（BTC）

网络节点服务提供商可以获得的奖励，数量有限，可以自由转账，因此具备了货币的特性。

> 要注意的是，在比特币网络中，并不是所有节点都有机会获得代币。
> 
> -   **矿工/挖矿节点：** 专门投入算力进行计算（工作量证明），通过“竞争”抢夺记账权的特定节点。只有他们才能获得奖励。
>     
> -   **普通节点（Full Nodes）：** 只是下载并存储账本，维持网络安全和验证交易，但不参与“记账权”的竞争，因此**没有**代币奖励。
>     

### 1.3 区块链的核心

1.  去中心化的网络和区块链：由无数节点提供服务来维持网络运行。节点通过计算验证交易获得代币奖励。
    
2.  维持网络运行的代币奖励：Gas Fee 就是矿工的工资（手续费），使用这个网络进行交易、转账、铸造 NFT 等等，均需要支付代币。
    

**区块链的运行关键步骤：**

**用户发起交易 → 交易信息广播到整个网络 → 矿工节点验证交易合法性 → 打包成块 → 链接上链 → 矿工获得奖励**

### 1.4 区块链类型

| 区块链类型 | 节点加入方式 | 数据可见性 | 管理模式 | 特点 |
| --- | --- | --- | --- | --- |
| 公链（公园） | 任何人自由加入 | 所有人 | 去中心化（投票/共识机制） | 交易确认慢，维护成本高 |
| 联盟链（董事会） | 联盟成员邀请/审批 | 仅联盟成员可见 | 多中心化（董事会决策） | 效率比公链高，隐私比公链好，不如私链灵活 |
| 私链（私人俱乐部） | 老板审批 | 仅内部成员可见 | 中心化 | 效率更高，隐私更强，但缺乏透明性 |

### 1.5 一些误区

**web3不等于web3.0**

-   web3是区块链驱动的革命，在金融、产权、隐私场景具有优势，不适合高频社交。
    
-   web3.0是语义网技术驱动的数据组织升级
    

### 1.6 去中心化的优势与挑战

-   优势
    
    -   **信任最小化**：无需依赖中心化第三方
        
    -   **抗审查与高弹性**：数据分布存储在多个节点
        
    -   **用户自主管理**
        
    -   **开放创新生态**
        
-   挑战
    
    -   **可扩展性瓶颈**：公链在节点众多时共识效率低下，目前正在通过分片、Layer 2 方案等技术进行优化
        
    -   **安全与治理难题**：尽管区块链具有不可篡改特性，但代码漏洞或治理失衡也能导致损失
        
    -   **用户体验与成本**
        
    -   **法律与合规风险**
        

## 2\. 以太坊概览

### 2.1 以太坊相关介绍

-   以太坊的核心创新在于**智能合约**，以太币（ETH）是以太坊的原生代币。
    

> 智能合约是存储在区块链上的可执行代码，能够在满足预设条件时自动执行操作，无需人工干预。这一特性使得以太坊不仅是数字货币的载体，更是构建去中心化应用（Dapps）、去中心化金融（DeFi）、非同质化代币（NFT）等生态系统的基础设施。

-   目标是让任何人无需依赖第三方即可进行交易、管理数据或运行应用。
    
-   与Bitcoin的差异
    

| 维度 | 比特币（Bitcoin） | 以太坊（Ethereum） |
| --- | --- | --- |
| 目标与定位 | 去中心化的数字货币，强调安全、稳定和稀缺性（总量 2100 万枚） | 去中心化平台，支持智能合约和 Dapps，定位为“区块链 2.0” |
| 编程能力 | 脚本语言有限，仅支持简单的交易验证逻辑 | 图灵完备的编程语言（如 Solidity），可开发复杂智能合约 |
| 共识机制 | 工作量证明（PoW），矿工通过算力竞争记账权 | 从 PoW 转向权益证明（PoS），通过 The Merge 实现能源效率优化 |
| 交易速度 | 每 10 分钟生成一个区块，交易确认较慢 | 区块时间约 12 秒，交易确认更快，适合高频应用 |
| 经济模型 | 总量固定，强调抗通胀属性 | 供应灵活，通过 EIP-1559 等机制可能呈现通缩趋势 |

### 2.2 以太坊的发展阶段

1.  以太坊1.0（PoW阶段——工作量证明）
    
    -   矿工通过计算机算力争夺打包交易的权利，消耗大量电力资源。
        
    -   成功打包会获得新生成的ETH奖励
        
    -   存在**能耗高**和**扩展性差**（每秒只能处理约30笔交易，速度慢，费用高）的问题
        
2.  以太坊 2.0 与 The Merge
    
    -   **信标链（Beacon Chain）**：专门运行PoS共识机制。
        
    -   The Merge发生，以太坊主网由信标链保护安全，从高能耗 PoW → 低能耗 PoS。
        
    -   PoS机制
        
        -   质押32ETH成为验证者，相比于PoW能耗降低99.95%，成本降低。
            
        -   **工作方式**：系统随机选择验证者来提议和验证区块
            
        -   **奖励机制**：验证者获得新发行的 ETH + 交易费用
            
        -   **惩罚机制**：作恶者质押的 ETH 被销毁（Slashing）
            
3.  未来
    
    -   数据分片：配合 Layer 2 （Layer 2 负责大量交易处理）实现扩容，进一步降低 L2 成本。
        
    -   EIP-4844：让 L2 更便宜。（引入专门的 “Blob 交易” 类型，数据存储成本大幅降低。Blob 数据会在一定时间后自动删除，不会永久占用主网存储。）
        
    -   ZK-Rollup技术：通过验证”正确性证明“一次性处理数百笔交易。
        

关于Layer 2的内容补充：

> **Layer 2（第二层解决方案）就是为了给区块链 ”减负“ 而搭建的一层额外网络。** 如果把比特币或以太坊比作一条**极其拥堵、收费昂贵的城市主干道（Layer 1）**，那么 Layer 2 就是在它上方修建的**高架桥或快速路。**
> 
> 1.  为什么需要Layer 2？
>     
> 
> 底层的区块链（Layer 1）为了保证绝对的安全和去中心化，每秒处理交易的能力（TPS）非常有限：
> 
> -   **比特币：** 每秒约 7 笔交易。
>     
> -   **以太坊：** 每秒约 15-30 笔交易。
>     
> 
> 当用户变多时，网络就会变得极其拥堵，手续费（Gas Fee）也会飙升。Layer 2 的出现就是为了解决这个“可扩展性”难题。
> 
> 2.  Layer 2如何运作？
>     
> 
> Layer 2 的核心逻辑是：**在链下处理交易，在链上进行结算。**
> 
> -   **处理（Off-chain）：** 你在 Layer 2 上进行成千上万笔小额、快速的交易。
>     
> -   **打包（Batching）：** Layer 2 并不把每一笔交易都发给主网（Layer 1），而是将一段时间内的交易“打包”成一个摘要。
>     
> -   **结算（Settlement）：** Layer 2 定期向主网发送这个摘要和证明，告诉主网：“这一万笔交易我已经处理好了，这是结果，请备份。”
>     
> 
> 这样一来，主网只需要处理一笔交易，却变相完成了上万笔交易的验证，效率极大提升。
> 
> 3.  Layer 2的优势
>     
> 
> -   **低费用：** 手续费通常只有主网的几十分之一甚至更低。
>     
> -   **极速：** 交易几乎可以秒到账。
>     
> -   **继承安全性：** 真正的 Layer 2（如 Rollups）最终会将安全根植在主网上，这意味着如果 Layer 2 出问题，你的资产理论上仍受主网保护。
>     

### 2.3 以太坊生态概览

以太网的生态系统由多层架构组成，包括 **L1（主网）、L2（二层扩展解决方案）、侧链（Sidechains）** 等。

-   **Layer 1（L1）**
    
    -   **以太坊主网**：核心区块链，负责最终安全性与共识。
        
    -   **EVM**：以太坊虚拟机，执行智能合约代码。
        
    -   **账户系统**：外部账户（EOA）与合约账户（CA）共同构成网络基础。
        
-   **Layer 2（L2）**
    
    -   **Rollup**：通过将交易批量处理后提交至 L1，降低 Gas 费。
        
    -   **Optimistic Rollup**：假设交易合法，仅在争议时验证。
        
    -   **ZK Rollup**：通过零知识证明验证交易，无需链上争议。
        
-   **侧链（Sidechains）**：独立运行的链，通过桥接与主网交互。
    
-   **以太坊生态分层架构**
    
    -   **应用层（Application Layer）**：用户直接交互的应用和界面
        
    -   **协议层（Protocol Layer）**：以太坊核心基础设施
        
    -   **扩展层（Scaling Layer）**：提升性能和降低成本的解决方案
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
