---
timezone: UTC+8
---

# IYA1738

**GitHub ID:** IYA1738

**Telegram:** 

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-14
<!-- DAILY_CHECKIN_2026-01-14_START -->
今天在做一些自己的事情，由于我的工作是智能合约审计，因此记录一下今天审计带来的一些开发时的思考。  
  
审计目标是一份借贷协议的controller, 也是这个协议的entry point.其中的分桶抵押机制，也就是稳定抵押品只能借出高波动难清算的抵押品，反之亦然。项目方的目的是为了防止高波动资产能作为抵押高波动抵押品的情况。  
  
现假设稳定抵押品为A，高波动抵押品为B，A的有效担保抵押价值为cA，稳定抵押品和高波动抵押品的风险因子分别为rA，rB。  
此协议的问题在于，正确做法下取出A时，要么减少cA，要么提高rB，但是开发者提高了rA。  
攻击者可以存入大量A来提高rB，从而借出大量的B，然后抽走抵押的A，此时的rB不变，再重复存入A，进一步推高rB，等到rB允许借出池中所有B时，此时攻击者存入池中的A的抵押价值远小于此时攻击者借走的B，这个时候直接不还借走的B，赔偿抵押的A，攻击者就偷走了资产把坏账留给了B池。由于操作都在同块进行，而抵押率不足的清算需要等价格在下一块更新后才能清算，因此攻击者用少量A借出大量B的行为也不会被清算，等清算的时候攻击已经完成了。  
  
总结的开发者应该注意的点有几个：  
1.注意拼写，尤其是命名近似且相同数据类型相同场景下使用的数据容易写错导致严重漏洞，但是编译器并不会报错，在不涉及当前路径的操作中，也难以发现漏洞。  
2.用户可组合操作资金的功能可以考虑跨块执行，避免同块执行，避免预言机离散更新的间隔导致整个协议的攻击面扩大。可以考虑加入cooldownBlock或cooldownTimeStamp(抵押借贷等场景推荐cooldownBlock)来禁止同块执行或大于预言机时间更新窗口(但加入这一防护后无法使用闪电贷)。这一举措可以减少整个协议的闪电贷攻击风险与清算不及时的风险。
<!-- DAILY_CHECKIN_2026-01-14_END -->

# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->

今天的co-learning有在听到讨论DAO治理怎么样公平。其实很难去有一个完全公平的体制。  
但是之前有想过一个DAO架构，1token1票，但是权重根据token越多增长得越少，相当于给巨鲸加入了一个边际递减。  
与此同时，给每个地址去量化当前地址的声誉与贡献，也加入投票的权重中，避免巨鲸可以把大量token分散到多个地址来绕过token数量带来权重影响的边际递减。  
再在这个时候在有一定质押量的地址中随机抽取12个（也可以更多），作为公民裁决团。  
大致的架构就是DAO成员根据上述的权重计算规则先投一次票，再看公民裁决团投票之前的DAO成员投票是否合理。  
但这里又引入了新的问题，如何保证公民裁决团不会投票冷漠？如何保证公民裁决团不会串通好然后在本次投票形成新的寡头层？如果巨鲸通过钱让很多人创建很多钱包，然后被选上公民裁决团的几率比普通公民大怎么办？  
所以其实仍然是有很多的问题，但对于一个更好的体制，目前确实是没有一个准确的答案。  
但是XiaoHai老师讲到的一个例子让我觉得非常有道理，那就是ETH的硬分叉。  
仔细思考过后我认为，这一点确实是民主的保障。民主很多时候都是由大多数人的共识确立的，让多数人满意了。  
但是问题是，那其他人的想法该怎么办？遵从了多数人的想法后，是不是一种对意见不同的人的少数人的剥削？  
所以此时一个退出机制就很重要，这个退出机制是让不同意当前主流共识的人可以尽量低成本无惩罚的去离开当前的体制，建立自己的体制。也就是我们需要先承认有一些分歧是不可调和的，此时我们需要保障少数人的意见仍然可以生效，那就硬分叉咯。就像民主国家也不能靠投票来保证每个人都满意，但是文明国家都不会限制移民，如果你对体制不满，你可以直接不和这个体制玩了。  
所以我觉得以太坊硬分叉的理念确实是体现了一个非常重要的民主举措。但是到底什么是真正公正的制度，还是需要继续思考。
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->


今天参与了Co- Learning会议，感觉受益匪浅呢。以前没有关注过以太坊的每个层，听完同学们提的问题后研究了一下。  
  
共识层并不知道什么是EVM，什么是智能合约，它只保证区块的有效性合法性。  
  
而执行层应该是可以概括为负责状态的转移，本质上EVM做的许多工作都是不断的sload与sstore的不断进行状态的转移。  
  
Rollup层是自己执行完交易后生成state root等可验证证明，发送到执行层去做验证，验证通过的话就被认为是一次合法的状态转移，并将修改后的状态写入下一个区块中等待验证者打包后给共识层校验区块有效后写入链上。但是Rollup的方案是不同的，ZkRollup是给zk proof，然后执行层验证。optimism是L1先假设这个证明是对的，在一段时间内如果有人有疑问的话可以来挑战，挑战成功的话就不会被验证通过了。
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
