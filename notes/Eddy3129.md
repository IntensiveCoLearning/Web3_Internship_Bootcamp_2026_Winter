---
timezone: UTC+8
---

# Eddy

**GitHub ID:** Eddy3129

**Telegram:** Eddy3129

## Self-introduction

全栈开发工程师，具备完整的 dApp 开发经验。曾参与 Web3 项目并入选 Blockchain For Good Alliance（BGA）孵化器，项目获得 1 万美金孵化奖励金。

技术方向以 Next.js、React 为核心，主攻 Web3 前端集成与钱包交互开发，熟练使用 Wagmi 进行链上数据读取与交易交互。熟悉以太坊、Solana 等主流公链生态及常见 DeFi 项目架构。

曾在中心化交易所实习，了解交易所整体技术架构，熟悉 Binance API，并接触过高频交易相关接口与实务场景。

## Notes

<!-- Content_START -->
# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->
今天对执行层和共识层的交互有了更深层的了解，也了解了各个节点如何通过 **P2P（Peer-to-Peer）** 的方式实行高效的资料传输以及扩散。

* * *

首先，**Node（节点）** 即以太坊网络中的一个完整参与者，一般都需要运行两个客户端，即 **执行端（Execution Layer, EL）** 以及 **共识端（Consensus Layer, CL）**。  

![image.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Eddy3129/images/2026-01-13-1768288789516-image.png)

二者的责任区别如下：

## 执行层（EL）与共识层（CL）职责对比

| 层级 | 客户端 | 核心职责 |
| --- | --- | --- |
| 执行端（Execution Layer, EL） | Geth / Nethermind / Besu / Erigon | - 监听交易传播（Transaction Propagation，来自 devP2P）- 执行交易（Transaction Execution via EVM）- 管理状态转换（State Transition / World State Update）- 维护交易池（TxPool / Mempool）- 对外提供 RPC 接口（JSON-RPC API，如 eth_call, eth_getBalance） |
| 共识端（Consensus Layer, CL） | Lighthouse / Prysm / Teku / Nimbus | - 严格执行权益证明机制（Proof of Stake, PoS）- 在每个 Slot / Epoch 中选择区块提议者（Block Proposer Selection）- 负责验证与投票流程（Attestation Process）- 维护最终性（Finality via Casper FFG） |

> 一句话理解：  
> **EL 负责“区块内容是否在状态层面是对的”**  
> **CL 负责“这个区块在共识规则下是不是合法的”**

以上两个客户端通过 **Engine API（JSON-RPC over IPC / HTTP）** 实现信息交换。  
Engine API 是在 **Execution Layer 与 Consensus Layer 之间定义的强约束接口**，其设计目标是避免任一层“越权”。

## 完整过程如下（1–5）

### **1️⃣ Proposer 触发执行构建**

当 **Proposer** 被 **PoS**选择后，Proposer 的 **CL**会通过 **Engine API** 传递**engine\_forkchoiceUpdated** 信息。

该信息中包含：

-   当前链头（**Head Block**）
    
-   **Safe Block**
    
-   **Finalized Block**
    

用于明确当前区块应当构建在哪一个区块之上。

* * *

### **2️⃣ EL 执行交易并生成 payloadID**

**EL（Execution Layer）** 会根据当前链头以及被提供的参数：

-   确认 **parent block**
    
-   从交易池中选择交易
    
-   在 **EVM（Ethereum Virtual Machine）** 中执行交易（**Speculative Execution**）
    

随后，EL 会返回一个 **payloadID（Execution Payload Identifier）**，  
用于标识这一次“区块构建任务”。

* * *

### **3️⃣ CL 请求 Execution Payload**

随后，**CL** 会通过 **Engine API** 的  
**getPayload（engine\_getPayload(payloadID)）**  
请求 payloadID 对应的执行结果。

当执行完毕后，完整的 **Execution Payload（执行载荷）** 会被返回，其中包括：

-   **Transactions**
    
-   **Receipts Root**
    
-   **State Root**
    
-   **Logs Bloom**
    
-   **Gas Used** 等执行结果
    

* * *

### **4️⃣ Proposer 封装 Beacon Block 并广播**

**CL** 会将 **Execution Payload** 封装在 **Beacon Block（信标区块）** 中，并完成：

-   区块签名（**BLS Signature**）
    
-   基础一致性校验
    

随后广播至其他节点（**P2P Gossip Broadcast**）。

至此，**Proposer 节点已经完成其职责**，流程进入 Validator 验证阶段。

* * *

### **5️⃣ Validator 验证、对齐并投票**

其余 **Validator Node（验证者节点）** 执行以下流程：

**（1）CL 层验证**

-   验证 Beacon Block 签名是否正确
    
-   验证 Proposer 身份是否与当前 Slot 匹配
    
-   验证共识规则（**Slot / Epoch / Fork Rules**）
    

**（2）EL 层重放执行**

-   CL 通过**engine\_newPayload**将 Execution Payload 发送给本地 EL
    
-   EL 完整重放交易（**Full Transaction Replay**）
    
-   本地计算 **State Root**
    
-   对比执行结果
    
-   返回 **VALID / INVALID**
    

**（3）结果处理**

-   若为 **VALID**：
    
    -   CL 再次发送=**engine\_forkchoiceUpdated**
        
    -   更新本地 fork choice
        
    -   使 **CL 与 EL 的链头（Head）保持对齐**
        
    -   Validator 发送 **Attestation（投票）**
        
    -   若形成超级多数（**Supermajority**），推进最终性流程
        
-   若为 **INVALID**：
    
    -   区块被拒绝
        
    -   不进入 fork choice
        
    -   不进入投票流程
        
    -   在恶意或可证明违规的情况下，可能触发 **Slashing**  
          
        以上过程可由下列流程图进行说明:
        
        ![cl-el-engineapi.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Eddy3129/images/2026-01-13-1768290582314-cl-el-engineapi.png)

以太坊的 P2P 网络由 **两层互补机制**构成：

* * *

### 1️⃣ UDP Kademlia（**Discovery v4/v5, Kademlia DHT**）

用于：

-   **节点发现（Node Discovery）**
    
-   **路由信息维护（Routing Table）**
    

核心特性：

-   使用 **NodeID XOR 距离度量**
    
-   构建逻辑上的 **k-bucket 路由表**
    
-   查找复杂度为 **O(log n)**
    

> 举例：  
> 即便在 **1,000,000 个节点**的网络中，平均只需 **~6–7 次 hop** 即可定位目标节点。

* * *

### 2️⃣ TCP + RLPx（**devP2P / RLPx**）

用于：

-   **真实数据传输**
    
-   **加密通信**
    
-   **区块 / 交易 Gossip**
    

特性包括：

-   **ECIES + AES-GCM** 加密
    
-   **Capability Negotiation**
    
    -   eth
        
    -   snap
        
    -   beacon
        
-   基于 TCP：
    
    -   顺序保证
        
    -   重传机制
        
    -   完整性校验
        

* * *

## 七、Gossip 传播模型

-   节点不会“全网广播”
    
-   只向部分邻居转发
    
-   信息通过 **指数级扩散** 覆盖全网
    

优势：

-   **去中心化**
    
-   **高冗余**
    
-   **抗节点失败**
    
-   **高传播效率**
    

即使多个节点同时宕机，网络仍能保持：

-   区块传播
    
-   交易同步
    
-   共识推进
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->

* * *

## 一、区块链三大核心概念

1.  **去中心化 (Decentralization)** — 无需中央机构或第三方信任，由分布式节点共同维护网络
    
2.  **不可篡改 (Immutability)** — 一旦数据写入区块链，便无法被修改或删除
    
3.  **安全透明 (Security & Transparency)** — 所有交易公开可查，通过密码学保证数据安全
    

* * *

## 二、比特币 (Bitcoin)

比特币作为第一个**去中心化数字货币 (Decentralized Digital Currency)**，首次实现了：

-   **价值转移 (Value Transfer)** — 无需银行即可点对点转账
    
-   **价值储藏 (Store of Value)** — 总量恒定2100万枚，被称为"数字黄金"
    
-   **抗通胀 (Inflation Resistant)** — 通过 **减半机制 (Halving)** 控制供应量，对抗法币贬值
    

* * *

## 三、以太坊 (Ethereum)

以太坊作为比特币的继任者，提出了**智能合约 (Smart Contract)**，首次为区块链带来了可编程且**图灵完备 (Turing Complete)** 的状态机，因此被称为**世界计算机 (World Computer)**。

### 3.1 经济模型 (Economic Model)

为了让协议可持续运行，以太坊设计了以下经济机制：

(1) EIP-1559 手续费机制

-   **Priority Fee (小费/Tip)** — 用户额外支付给验证者的激励费用
    
-   **Base Fee (基础费)** — 根据网络拥堵程度动态调整，**此部分会被销毁 (Burn)**
    
-   通过销毁机制，ETH 可能成为**通缩资产 (Deflationary Asset)**（当销毁量 > 发行量时）_ultrasound money_
    

(2) 共识层 (Consensus Layer)

采用**权益证明 (Proof-of-Stake, PoS)** 共识机制：

-   每位**验证者 (Validator)** 需质押 **32 ETH** 才能参与验证
    
-   验证者负责进行 **attestation (投票证明)** 来确认区块
    
-   采用随机选取的 **Sync Committee (同步委员会)** 进行轮换，每 256 个 epoch 更换一次
    
-   **奖励机制**：正常运行可获得质押奖励 (Staking Rewards)
    
-   **惩罚机制 (Slashing)**：
    
    -   若节点离线或行为不诚实，将面临 slashing 惩罚
        
    -   严重违规可被罚没 **最高 1 ETH 起跳**（实际惩罚金额视情节而定，最严重可被罚没全部质押）
        
    -   被 slash 后会进入 **36 天退出期 (Exit Period)**，期间无法获得任何奖励
        

(3) 执行层 (Execution Layer)

验证者在执行层可获得：

-   **Priority Fee** — 来自用户的小费
    
-   **MEV (Maximal Extractable Value，最大可提取价值)** — 通过交易排序获得的额外收益
    

### 3.2 PBS 与 MEV 机制

为防止验证者恶意操纵 Priority Fee 和 MEV，提出了 **PBS (Proposer-Builder Separation，提议者-构建者分离)** 模式：

-   **Builder (构建者)** — 负责构建区块内容，需通过竞价提交区块
    
-   **Proposer (提议者/验证者)** — 拥有最终决定权，选择出价最高、效率最优的区块
    
-   此机制通过 **MEV-Boost** 实现
    

**问题与改进**：

-   MEV-Boost 依赖 **Relay (中继器)**，存在中心化风险
    
-   后续提出 **ePBS (Enshrined PBS，协议内置 PBS)** 方案，将 PBS 直接写入协议层，减少对外部 Relay 的依赖
    

### 3.3 Gasper 共识机制

以太坊的验证流程依赖 **Gasper 共识**，由两部分组成：

(1) Casper FFG — 负责最终性 (Finality)

-   决定哪些区块**不可被回滚 (Finalized)**
    
-   若验证者试图篡改已 finalize 的区块，将受到 slashing 惩罚
    
-   采用 **Epoch Justification** 逻辑：
    
    -   每个 **Epoch** 包含 **32 个 Slot**（每个 slot 为 12 秒，即 1 epoch ≈ 6.4 分钟）
        
    -   需要**连续两个 epoch 被 justify**，才能 finalize 前一个 epoch
        
    -   此设计确保至少 **2/3 的质押量** 参与 justify；若有人违规，剩余 **1/3** 违规者将被惩罚
        

(2) LMD-GHOST — 负责选择链头 (Fork Choice Rule)

-   **LMD-GHOST (Latest Message Driven - Greedy Heaviest Observed SubTree)**
    
-   不同于比特币的**最长链规则 (Longest Chain Rule)**
    
-   以太坊采用**最重链规则 (Heaviest Chain)**：选择累计质押权重最大的分叉作为主链
    

### 3.4 节点客户端 (Node Clients)

要成为验证者，需运行**全节点 (Full Node)** 或**轻节点 (Light Node)**：

> 注：轻节点**不需要**下载完整区块链数据，仅验证区块头

节点需同时运行两种客户端：

| 类型 | 功能 | 主流客户端 |
| --- | --- | --- |
| EL Client (执行层客户端) | 处理交易与智能合约执行 | Geth, Nethermind, Besu, Erigon |
| CL Client (共识层客户端) | 处理 PoS 共识与验证 | Lighthouse, Prysm, Nimbus, Teku, Lodestar |

**客户端多样性 (Client Diversity)** 的重要性：

-   若单一客户端出现 bug，可能导致大规模 slashing 或网络分叉
    
-   建议质押者选择**市占率较低的客户端**，分散风险
    
-   目前 Geth 和 Prysm 市占率过高，社区鼓励使用少数派客户端
    

* * *

## 四、NFT (Non-Fungible Token，非同质化代币)

NFT 代表**独一无二、不可互换**的数字资产，应用场景包括：

-   数字艺术与收藏品
    
-   版权与知识产权
    
-   房地产所有权凭证
    
-   游戏道具与虚拟资产
    
-   会员资格与门票
    

### NFT 相关标准

| 标准 | 特点 | 应用场景 |
| --- | --- | --- |
| ERC-721 | 每个 Token ID 对应唯一的 NFT | 艺术品、头像 PFP、土地 |
| ERC-1155 | 融合同质化与非同质化特性，支持批量转移 | 游戏道具（同款武器多把）、演唱会门票（同场次数千张） |
| ERC-6551 | 将 NFT 绑定为一个账户 (Token Bound Account, TBA)，可持有其他资产 | NFT 背包、链上身份、游戏角色装备管理 |
| ERC-7432 | 让 NFT 可编程化，支持角色与权限分离 | NFT 租赁、治理委托、借贷抵押 |

* * *

## 五、dApp (Decentralized Application，去中心化应用)

dApp 是部署在区块链上的应用程序，核心理念是 **"Code is Law"（代码即法律）**。

### 优点

-   **7×24 无间断运行** — 无需服务器托管，只要区块链存在就能运行
    
-   **无需信任** — 信任代码而非人或机构
    
-   **抗审查 (Censorship Resistant)** — 无法被单一实体关闭
    
-   **匿名性** — 用户可用钱包地址交互，无需实名
    

### 缺点

-   **不可修改性** — 代码部署后无法直接修改（除非预设升级机制）
    
    -   可通过 **UUPS Proxy** 或 **Transparent Proxy** 等**可升级合约模式**实现更新
        
-   **可扩展性受限** — L1 的 TPS (Transactions Per Second) 有限
    
    -   以太坊主网约 15-30 TPS，远低于传统支付系统
        
-   **Gas 成本高** — 在主网交互费用昂贵
    

### Layer 2 扩容方案

为解决 L1 的扩展性瓶颈，社区采用 **L2 扩容方案 (Layer 2 Scaling Solutions)**：

-   **L1 (Layer 1)** — 仅作为**结算层 (Settlement Layer)**，保证最终安全性
    
-   **L2 (Layer 2)** — 负责执行交易，定期将状态提交至 L1
    

主流 L2 方案：

| 类型 | 代表项目 | 特点 |
| --- | --- | --- |
| Optimistic Rollup | Arbitrum, Optimism, Base | 乐观假设交易有效，通过挑战期防作弊 |
| ZK Rollup | zkSync, StarkNet, Scroll, Linea | 通过零知识证明验证交易有效性，更快最终性 |

* * *

_附上自己Gemini生成的笔记总结_

![ethereum.jpg](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Eddy3129/images/2026-01-12-1768231718067-ethereum.jpg)

_顺带附上自己mint的NFT。。。_

![mfnft1.png](https://raw.githubusercontent.com/IntensiveCoLearning/Web3_Internship_Bootcamp_2026_Winter/main/assets/Eddy3129/images/2026-01-12-1768231444783-mfnft1.png)
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
