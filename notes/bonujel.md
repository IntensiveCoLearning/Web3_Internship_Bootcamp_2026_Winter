---
timezone: UTC+8
---

# bonujel

**GitHub ID:** bonujel

**Telegram:** 

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-16
<!-- DAILY_CHECKIN_2026-01-16_START -->
## **行动**

-   参与《分享会 - AI 及其基础概念》直播
    
-   参与本日co-learning
    

## **内容**

## **x402历史沿革**

万维网（World Wide Web）的架构设计始于20世纪90年代。在蒂姆·伯纳斯-李（Tim Berners-Lee）等先驱的最初构想中，互联网不仅是信息的传输网络，也应当是价值的传输网络。这一愿景被明确编码在超文本传输协议（HTTP）的状态码定义中。

HTTP 200代表“成功”，404代表“未找到”，而**HTTP 402**则被预留为“需要支付”（Payment Required）。在HTTP/1.1规范制定之初，设计者们预见到未来的网络资源访问将需要一种原生的、标准化的支付触发机制。然而，由于当时缺乏成熟的去中心化数字货币技术，以及加密学在金融领域的应用尚未普及，这一状态码从未被正式实施或广泛采用，处于长期“休眠”状态。

x402并非一种新的区块链，也不是一种特定的代币，而是一个**开放的互联网支付标准**。它的核心使命是复活HTTP 402状态码，利用现代区块链技术（特别是Layer 2网络和稳定币）作为结算层，实现一种无摩擦、无需许可、机器可读的支付协商机制。x402的出现不仅仅是一次技术升级，更是对互联网底层逻辑的一次修正，它使得“价值”能够像“信息”一样在网络中自由流动，特别是为非人类主体（AI Agents）参与经济活动扫清了障碍。

## **x402协议的技术架构与运行机理**

### **四方架构模型**

x402协议的运行依赖于四个核心角色的协同工作，形成了一个闭环的价值传输系统：

1.  **客户端（Client）**：
    
    -   即买方，通常是AI智能体、浏览器插件或自动化脚本。
        
    -   **关键特征**：持有加密钱包（私钥），存有少量稳定币（如USDC），但**不需要持有ETH等Gas代币**。
        
2.  **资源服务器（Resource Server）**：
    
    -   即卖方，提供API接口、付费内容或计算资源的服务端。
        
    -   **关键特征**：集成x402中间件，能够拦截未付费请求并返回402状态码。
        
3.  **服务商/协调器（Facilitator）**：
    
    -   这是x402架构中最具创新性的中间层。它是一个Web2服务，充当区块链与HTTP之间的桥梁。
        
    -   **关键职能**：验证客户端的签名、垫付Gas费将交易上链（Relayer）、向资源服务器确认支付结果。
        
4.  **区块链结算层（Blockchain Settlement Layer）**：
    
    -   价值最终转移的账本。目前主要基于Base（Coinbase推出的Layer 2网络）或Solana等高性能链。
        

### **支付流程详解**

x402的交互流程遵循RESTful API的设计哲学：

1.  **初始请求（Initial Request）**： 客户端向受保护的资源（如 `https://api.service.com/premium-data`）发起标准的HTTP GET请求。
    
2.  **支付质询（Payment Challenge）**： 服务端检测到请求未包含支付证明，拦截请求并返回 **HTTP 402 Payment Required** 状态码。 响应头中包含关键的支付元数据（Metadata）：
    
    -   `WWW-Authenticate: x402`
        
    -   `amount`: 0.05 (USDC)
        
    -   `token`: USDC合约地址
        
    -   `recipient`: 商家收款地址
        
    -   `chainId`: 8453 (Base网络ID)
        
3.  **签名授权（Signing）**： 客户端接收到402响应后，解析元数据。它使用自己的私钥，对支付意图进行加密签名。
    
    -   **技术核心**：这里使用了**EIP-712**（结构化数据签名）标准，确保签名的内容是人类（及机器）可读的，且不能被篡改。
        
    -   **Gasless机制**：客户端生成的只是一个离线的数字签名，**不需要**发起链上交易，因此不需要消耗Gas费。
        
4.  **重试请求（Retry with Authorization）**： 客户端再次发起HTTP请求，这次在Header中附带了生成的签名： `Authorization: x402 <signature_payload>`
    
5.  **验证与结算（Verification & Settlement）**： 服务端收到带有签名的请求，将其转发给**Facilitator**的 `/verify` 接口。 Facilitator验证签名有效后，一方面立即告知服务端“支付有效”，另一方面将该签名包装成一笔交易，垫付Gas费并广播到区块链上（基于**EIP-3009** Transfer with Authorization标准）。
    
6.  **资源交付（Delivery）**： 服务端收到Facilitator的确认（通常在毫秒级，利用软确认机制），随即向客户端返回HTTP 200 OK及请求的数据。
    

### **核心技术标准：EIP-3009与Gasless体验**

x402能够实现“无感支付”的关键在于它规避了传统区块链支付的最大痛点——Gas费。

在普通以太坊交易中，发送方必须持有ETH来支付矿工费。这对AI智能体来说是一个巨大的管理负担（需要管理USDC和ETH两种资产，且ETH价格波动大）。 x402利用了**EIP-3009**标准，该标准允许代币持有者通过签名“授权”第三方（即Facilitator）来触发转账操作。

-   **流程**：智能体（用户）签名 -> Facilitator（服务商）提交上链并付Gas -> USDC从智能体账户转到商家账户。
    
-   **意义**：这种设计使得智能体只需持有稳定币即可运行，极大地降低了技术门槛和资金管理复杂度，是实现大规模机器支付的前提。
    

## **与其他支付方案对比**

### **x402 vs. L402 (Lightning Network)**

L402是比特币生态中用于API支付的类似标准，利用闪电网络进行结算。

| 比较维度 | x402 (EVM/Base) | L402 (Bitcoin Lightning) |
| --- | --- | --- |
| 基础资产 | USDC (稳定币) | BTC (比特币) |
| 资产波动性 | 极低，适合商业定价 | 高，难以作为计价单位 |
| 鉴权机制 | 数字签名 (EIP-712) | Macaroons (带权限的Cookies) |
| 基础设施要求 | 轻量级 (API调用) | 沉重 (需维护闪电网络节点/通道) |
| 去中心化程度 | 中 (依赖Facilitator) | 高 (点对点，无中间人) |
| 隐私性 | 低 (链上地址公开透明) | 高 (洋葱路由，匿名性强) |
| 开发者友好度 | 高 (Web2开发者熟悉REST/JSON) | 低 (需理解通道流动性管理) |

虽然L402在去中心化和隐私方面占优，但商业可用性是x402的杀手锏。对于一个售卖数据的AI服务商来说，以美元（稳定币）定价和收款是刚需。如果使用L402，服务商必须承担BTC的价格波动风险。此外，x402基于账户模型（Account Model），比闪电网络的UTXO及通道管理更容易被主流Web开发人员理解和集成。因此，x402更适合作为Web3商业基础设施。

### **4.2 x402 vs. Stripe Agentic Commerce**

Stripe最近也推出了针对AI代理的支付接口（Agentic Commerce Protocol, ACP）。

-   **应用场景差异**：
    
    -   **x402** 专注于**上游资源获取**（Upstream）：AI购买API调用、数据流、推理算力。这些是不可逆的、即时交付的数字化商品。
        
    -   **Stripe** 专注于**下游商业行为**（Downstream）：AI替用户预订酒店、购买实物商品。这些交易涉及退款、争议处理（Chargebacks）和复杂的商业逻辑，需要传统金融系统的支持。
        
-   **互补性**：两者并非死敌，而是互补。未来的AI智能体可能使用x402来支付“思考”所需的算力和数据费用，然后使用Stripe来完成最终的“行动”（如帮用户买票）。
    

## **x402在Web3与AI结合中的实际应用案例**

### **Heurist：去中心化AI算力的即时货币化**

**Heurist** 是一个基于ZK-Rollup的去中心化AI计算网络。

-   **痛点**：传统的云GPU服务（如AWS）需要预先绑定信用卡，且计费粒度通常按小时计，对于只需运行几秒钟推理任务的AI智能体来说极其不便。
    
-   **x402应用**：Heurist集成了x402，允许用户（或智能体）通过简单的API调用来使用高性能GPU运行Stable Diffusion或Llama模型。
    
-   **模式**：Pay-per-Inference（按次推理付费）。智能体发送Prompt，同时附带微量的USDC签名，Heurist节点执行计算并返回结果。
    
-   **Heurist Deep Research**：这是一个基于AI的深度研报生成平台，用户支付1 USDC即可获得一份长篇研报，完全通过x402轨道结算。
    

### **Virtuals Protocol：智能体之间的协作经济**

**Virtuals** 致力于构建即插即用的AI智能体，这些智能体拥有自己的个性和资产。

-   **应用场景**：Agent-to-Agent (A2A) 经济。
    
-   **案例**：设想一个“游戏解说智能体”需要一段特定的背景音乐。它可以自动向一个“音乐生成智能体”发起请求，并通过x402支付0.05 USDC获得音乐授权。整个过程无需人类介入。
    
-   **价值**：x402赋予了Virtuals生态中的智能体“财务自主权”，使其能够通过提供服务赚取资金，并用这些资金去购买其他服务，形成了闭环的**机器经济生态**。
    

### **货币化的MCP服务器（Monetized MCP Servers）**

-   **背景**：Claude推出的MCP（Model Context Protocol）标准允许AI连接本地或远程数据源。
    
-   **x402结合**：开发者可以构建一个提供独家数据（如实时链上Alpha信号、私有知识库）的MCP服务器，并加上x402支付网关。任何连接该MCP的AI模型，在读取数据时都必须自动支付微小的费用。
    
-   **意义**：这为个人开发者通过AI时代的数据变现提供了一条极简路径，甚至可能催生出“数据微商”这一新职业。
    

### **基础设施支持：Coinbase与Cloudflare**

-   **Cloudflare**：通过与Coinbase合作，Cloudflare允许在其边缘计算平台（Workers）上直接部署x402网关。这意味着全球数百万个网站只需几行代码配置，就能变成支持AI支付的节点。
    
-   **Thirdweb / QuickNode**：这些Web3开发平台集成了x402工具包，让开发者可以像添加登录功能一样简单地添加“收费墙”功能。
    

## **总结**

长期以来，AI与Crypto的结合往往被批评为“生硬拼接”或纯粹的炒作（如AI概念币）。 x402提供了一个**非投机性**的结合点。它不是为了发币，而是为了解决AI运行中的实际基础设施问题（支付与鉴权）。

市场关注点正在从“AI生成的Meme币”转向“AI使用的基础设施”。x402作为Coinbase力推的基建，被视为这一叙事的龙头。 这确实利好AI与Web3的结合。对于Web3来说，AI带来了海量的高频交易用户（智能体），能显著提升链上活跃度（TPS）；对于AI来说，Web3提供了无需许可的全球支付网络，使其能摆脱大公司的API限制，实现真正的自主化。
<!-- DAILY_CHECKIN_2026-01-16_END -->

# 2026-01-15
<!-- DAILY_CHECKIN_2026-01-15_START -->

## **行动**

1.  通读《web3实习手册》，对整体生态以及求职方向有了比较系统的理解
    
2.  观看《web3安全》和《web3合规》讲座直播
    
3.  rust学习
    

## **内容**

### **发展赛道**

1.  公链 L1 代表：Bitcoin、Ethereum、Solana 提供共识安全、数据可用与执行环境，是所有应用最终结算的底座。
    
2.  扩容 L2（Rollup 等） 代表：Arbitrum、Optimism、zkSync、Starknet 把大量交易放到二层处理，再把结果/证明回到 L1，降低成本、提高吞吐。
    
3.  数据可用性 DA 代表：Celestia、EigenDA、Avail 专注“数据公开可得与可验证”，给 L2/模块化链提供发布数据的底座。
    
4.  互操作 / 跨链 代表：IBC 生态（Cosmos）、LayerZero（示例） 解决链与链之间的消息传递与资产流动，让生态不是孤岛。
    
5.  安全与再质押（Shared Security / Restaking） 代表：EigenLayer（示例） 通过共享经济安全，把安全能力“外包/复用”给中间件和应用。
    
6.  预言机（Oracle） 代表：Chainlink、Pyth 把链外价格、事件结果等数据，安全、可验证地喂给链上合约。
    
7.  数据与索引（Indexing / Analytics） 代表：The Graph（索引）、Dune（分析，示例） 把链上原始数据整理成可查询、可分析的形态，支撑应用与运营。
    
8.  节点/RPC 与开发者平台（Infra） 代表：Ankr、Alchemy/Infura（示例） 提供稳定的节点访问、API、监控与运维能力。
    
9.  钱包与账户体系（Wallet / Account Abstraction / Identity） 代表：MetaMask（示例）、各类 AA 方案 用户入口与权限系统，决定了登录、签名、支付体验与安全边界。
    

### **其他补充**

A) 稳定币（资产类别） 例：USDT、USDC 链上“现金与计价单位”，既服务支付也服务 DeFi，是金融体系的基础资产之一。

B) LSD/LRT（质押与再质押凭证，资产类别） 例：Lido、Jito（LSD）；LRT 依生态而定 把质押权益代币化，提高资金可用性，强关联 DeFi。

C) Meme（叙事资产） 例：DOGE、SHIB 以文化与情绪为主导的资产类别，技术共性弱，更适合当“市场叙事”而非技术赛道。

D) AI x Crypto（跨层主题，需落地到具体形态） 例：去中心化算力/推理（更像 DePIN/Infra）、链上代理应用（更像应用层） 不是天然单一，最好按“它到底在卖什么能力”归到 Infra/应用里。

### **合规**

针对中国大陆法律环境下的风险。会议邀请了资深刑辩律师进行解答，以帮助从业者和想要转行的人员建立法律合规意识 。目前的情况是，Web3 行业在中国大陆面临政策收紧，合规空间狭窄，“雷区”较多。法律具有滞后性，而 Web3 业务形态激进，导致新兴业务常与现有法律产生冲突 。另外，执法机关往往不懂虚拟货币，常依据“九四公告”等文件将相关活动定性为非法。例如，永续合约常被定性为“开设赌场罪”，交易所被视为赌博网站 。

d律分析了具体的业务场景风险，包括发币融资、交易所运营、虚拟货币挖矿、个人出入金（U商）以及项目方经营等，并提供相应的合规建议和辩护思路 。

并详细拆解了以下几个核心领域的风险与应对策略：

-   **发币与交易所风险**：
    
    -   单纯发币（如 Meme币）若无公开融资行为通常不构成犯罪，但一旦涉及公开融资则触犯“非法吸收公众存款”或“集资诈骗” 。
        
    -   交易所的永续合约常被公安视为赌博（压大小）。律师的辩护策略是强调合约属于金融衍生品，用户掌握风险控制权（非买定离手），以此争取非赌博定性 。
        
    -   技术人员不仅不能以“技术中立”完全免责，甚至可能被视为共犯 。
        
-   **挖矿业务转型**：
    
    -   单纯挖矿被禁，合规路径是将业务转化为“AI超算中心”，与政府签订协议，将算力以出口外贸的形式卖给海外 。
        
-   **出入金与“路径攻击”**：
    
    -   个人出入金风险极高，约占咨询量的 70%。除了传统的冻卡风险，现在出现了“路径攻击”：洗钱团伙利用正常账户进行资金混淆，导致收款方账户涉案 。
        
    -   建议：与交易对手核实身份、保留证据；若收到不明资产需警惕，甚至主动报案备档 。
        
-   **就业与职场风险**：
    
    -   **远程工作**：为海外交易所（即使有牌照）工作，若该交易所面向中国大陆展业（未做IP隔离、允许大陆身份注册），员工仍有极高刑事风险，尤其是涉及合约、期权板块的技术或市场人员 。
        
    -   **薪资支付**：接受 USDT 支付工资在中国劳动仲裁中可能不受支持，导致维权困难；若签署海外合同，国内仲裁极难受理 。
        
-   **项目方经营**：
    
    -   在中国大陆经营 Web3 项目常面临“非法经营罪”（如涉及法币兑换）、“传销罪”（涉及多层级返佣）的风险 。
        
    -   存在专门配合公安打击项目方的“配侦公司”，通过链上数据分析锁定资产并举报以获利
        

最后针对具体问题给出了结论性建议：“不作恶”是行业保命符。无论是项目方还是个人，长期的合规意识和避免侵害他人利益是最终的安全保障 。
<!-- DAILY_CHECKIN_2026-01-15_END -->

# 2026-01-14
<!-- DAILY_CHECKIN_2026-01-14_START -->


## **行动**

-   观看“web3运行原理“直播
    
-   完成完成 2 章 Unphishable 钓鱼攻防挑战
    
-   参与本日co-learning
    

## **内容**

### **钱包、私钥与个人主权**

Web3 的起点不是注册账户，而是生成私钥。这是“个人主权”在密码学上的体现。

-   **私钥 (Private Key)**: 你的“终极签名印章”。本质是一串随机数，谁拥有私钥谁就控制了资产。它是不可重置的，丢失即意味着资产永久丢失
    
-   **助记词 (Seed Phrase)**: 私钥的可读备份（通常由12-24个单词组成）。通过派生路径，一套助记词可以生成无数个私钥/账户 。
    
-   **地址 (Address)**: 相当于银行卡号。是公钥经过哈希截取后的字符串，用于公开收款。地址是公开的，虽然不直接显示姓名，但链上行为可被关联分析 。
    

**安全原则**

-   **零信任环境**: 区块链不认识“你”是谁，只认识“谁能签名” 。
    
-   **存储禁忌**: 不截图、不存网盘、不发给任何人、不复制到联网剪贴板（恶意软件会监控剪贴板） 。
    
-   **被盗真相**: 大部分资产被盗并非区块链底层被攻破，而是用户泄露了助记词或签署了恶意授权（被钓鱼） 。
    

### **交互机制：交易与数字签名**

在 Web3 中，“交易”不仅仅是转账，它是所有链上行为的载体。

**交易 (Transaction/Tx) 的构成**

一笔交易主要包含三个要素 ：

1.  **意图 (Payload)**: 你要做什么（转账、Mint NFT、投票等） 。
    
2.  **手续费 (Gas Fee)**: 为网络资源付费 。
    
3.  **防重放序号 (Nonce)**: 一个计数器，确保同一笔交易不会被重复执行（防止重放攻击） 。
    

**钱包的工作流程**

钱包本质上是一个**密钥管理器**和**交易组装器**，它不存储资产（资产在链上），它的工作是：

1.  组装交易内容。
    
2.  使用私钥生成**数字签名**（证明是你授权的操作）。
    
3.  将签名后的交易广播到网络 。
    

### **网络经济学：Gas Fee (燃料费)**

Gas 不仅仅是费用，它是去中心化网络能持续运行的经济保障。

-   **防作恶 (Anti-Spam)**: 提高发送垃圾交易的成本，防止网络被无意义请求淹没 。
    
-   **激励机制 (Incentive)**: 激励矿工/验证者投入算力和硬件来维护账本安全 。
    
-   **经济闭环**: 资源使用者付费，资源提供者获利，确保网络非慈善性质的可持续运转 。
    

### **基础设施：区块链网络如何流转**

一笔交易从点击“发送”到由于不可篡改，经历了一个复杂的协作流程。

1.  **Wallet**: 用户签名。
    
2.  **RPC/Node**: 交易发送到节点接口（RPC是中心化风险点，因为它连接钱包与区块链网络） 。
    
3.  **Mempool**: 交易在内存池中排队等待打包 。
    
4.  **Builder/Validator**: 验证者挑选交易（通常按 Gas 高低）并打包进区块 。
    
5.  **Block**: 区块落盘，广播至全网。
    
6.  **Explorer**: 区块浏览器（如 Etherscan）可查询到交易状态 。
    

**共识机制：如何让全球节点认可同一本账？**

-   **PoW (工作量证明 - BTC)**: 算力竞争。像解一道极难的数学题，谁先解出谁记账。耗能高，但在早期提供了极高的安全性 。
    
-   **PoS (权益证明 - ETH)**: 质押资产。像“押保证金抽签”，质押越多、信誉越好，当选记账员概率越高。作恶会罚没押金，更加节能 。
    

**智能合约 (Smart Contract)**

智能合约是运行在区块链（EVM）上的代码，其本质是**“可执行的法律/规则”**。

-   **Code is Law**: 规则一旦部署，难以单方面更改（除非预留升级接口）。所有人都可以审计代码，预测执行结果 。
    
-   **去中介化**: 传统的信任依赖中介（银行、律师），智能合约将信任压缩为“代码+共识”。
    

开放的公共区块链的组件应该包括：

1.  点对点 (P2P) 网络，基于标准化的“gossip” 协议 ，连接参与者、传播未上链交易集和打包了确认上链交易集的区块集
    
2.  消息, 以交易的形式存在，表示状态转换
    
3.  一组共识规则，用于控制构成交易以及促成有效状态转换的因素
    
4.  一个状态机，根据共识规则处理交易 一系列经过加密保护的区块，包含所有已验证和接受状态转换的记录
    
5.  一套共识算法，通过强制参与者在共识规则的执行上合作来达到区块链控制去中心化的目的
    
6.  一个基于博弈论的合理激励机制（例如，工作量证明成本加上区块奖励），以在开放 环境 中经济地保护状态机安全
    
7.  一个或多个由以上部分构成的开源软件（“客户端”）
    

共识规则是**状态机的规则 + 区块/交易的合法性判定标准**，共识算法关于**网络一致性**
<!-- DAILY_CHECKIN_2026-01-14_END -->

# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->



## **行动**

-   观看“Web3 行业全局介绍 & 岗位概览“直播
    
-   完成“在 My First NFT mint 第一个 NFT”
    
-   参加co-learning
    

## **内容**

### **token**

“token”最核心的意义是：它把某种“可被拥有、可被转移、可被验证的权利/价值”编码进一个全网共同维护的账本里，并且可以被程序自动执行规则。换句话说，token 让“数字世界里的财产权、使用权、治理权、收益权、资源配额”等，第一次变成了互联网原生、可编程、可组合、可市场化的对象。它不只是“币”，而是一种通用的资产与权利表达方式：你可以用它做结算、做激励、做安全预算、做准入与治理，也可以把现实资产映射到链上形成可流通的凭证。

第一层：token 是“链上可验证的产权记录”

1.  统一的“所有权状态机”：谁拥有多少、何时转移、依据什么规则转移，都由共识 + 密码学签名保证。
    
2.  可编程规则：发行、转账、冻结、权限、销毁、分红、抵押等行为可以由合约/协议规则自动执行。
    
3.  可组合：token 可以被其他合约当成“积木”继续组合成更复杂的金融/业务结构。
    

第二层：token 解决的是“陌生人协作的协调问题”

1.  激励对齐：把网络参与者（用户、开发者、节点、流动性提供者）的利益绑定到同一套规则与收益函数上。
    
2.  安全预算：用 token 的价值与惩罚机制（如 PoS 质押与惩罚）把攻击成本显性化。
    
3.  市场化资源定价：把区块空间、算力/带宽、存储、服务访问等资源通过 token 定价与分配。
    

第三层：token 在实际系统里常见的九类用途

1.  货币与结算：原生币/稳定币，用于支付、跨境汇款、商户结算、微支付。
    
2.  交易费与反垃圾：gas/手续费让链上资源有成本，抑制 spam，并为验证者/矿工提供收入。
    
3.  共识与安全（PoS）：质押 token 获得出块/验证权；作恶会被惩罚（slash），提高安全性。
    
4.  抵押与信用：在 DeFi 中作为抵押品借贷、清算、杠杆与风险管理基础。
    
5.  治理与组织：治理 token 表示投票权/提案权，用于 DAO 的参数修改、资金分配、策略决策（也带来治理攻击风险）。
    
6.  准入与会员：持有某 token 才能使用某服务、进入某社区、获取额度/折扣（“token-gated access”）。
    
7.  收益权与现金流分配：用 token 表达对费用、收益、分润的某种权利（往往伴随强监管属性）。
    
8.  资产代币化（Tokenization / RWA）：把现实世界资产（债券、基金份额、票据、黄金、碳信用等）映射为链上可流通凭证，提升清结算效率与可组合性。
    
9.  非同质化与凭证：NFT/票据/证书/版权/游戏道具等，用于唯一性、溯源与防伪。
    

根据“技术”特性，代币分为两类：**同质化代币（FT）**和**非同质化代币(NFT)**。

-   同质化代币：表示可互换；由多个相同的单位组成，可以替代同一代币的任何其他单位，并可以分为小数单位（例如拥有 0.5 个代币）。
    
-   非同质化代币：表示独特且不可互换；每个代币都是独一无二的、不可分割的，并具有使其与其他代币不同的独特属性。
    

### **以太坊NFT协议的进化**

**ERC-165：**不是为了解决“怎么做 NFT”的问题，而是确定了“外部如何用一种统一方式识别一个合约实现了哪些接口”。核心是 `supportsInterface(bytes4)`，通过计算函数选择器的异或（XOR）值，合约可以声明其支持的接口集。这一标准虽不直接定义 NFT，但它是所有后续 NFT 标准（包括 ERC-721 和 ERC-1155）的**元依赖（Meta-dependency）**。没有 ERC-165，市场将无法自动区分一个合约究竟是同质化代币（ERC-20）还是非同质化代币（ERC-721），也无法安全地执行资产转移。

**ERC-721：** 首次通过 `tokenId` 将所有权颗粒度精确到每一个独立的资产，使得 `Token A ≠ Token B` 成为可能。

确立了 `ownerOf(tokenId)`、`transferFrom` 和 `approve` 等核心原语。尤为重要的是，它引入了 `safeTransferFrom` 机制。该机制在转账时会检查接收方是否为合约，如果是，则调用接收方的 `onERC721Received` 函数。如果接收方合约未实现该接口（通过 ERC-165 检测），交易将回滚。这一设计极大地降低了 NFT 误转入不支持合约而导致“资产黑洞”的风险 。

尽管 ERC-721 奠定了 NFT 的基础，但其“每一个 Token 都是独立实体”的设计理念在处理大规模资产时显得笨重且昂贵

**ERC-1155 ：\***\*一个合约管理多种 token 类型\*\*。它允许同一合约里既有 FT 也有 NFT（或半同质化），并天然支持 batch（一次交易转多个 id、多个数量），减少部署碎片与交易开销。对游戏道具、批量铸造/空投、组合资产这类场景，1155 的工程效率通常更高；而对“单一系列的收藏品”这类强叙事集合，721 仍然是最常见选择。

创新在于重新定义了 `id` 的含义。在 ERC-721 中，`id` 指向唯一的资产；而在 ERC-1155 中，`id` 指向一种“资产类型”。

-   若该类型的供应量为 1，则表现为 NFT。
    
-   若供应量 > 1，则表现为同质化代币。 此外，`safeBatchTransferFrom` 允许在单笔交易中转移多种类型的资产，相较于 ERC-721，其 Gas 消耗在批量操作下降低了 80%-90%。这标志着 NFT 从单纯的“收藏品”向“实用型库存”的进化 。
    

**ERC-2309 ：**解决了一个“链上工程”的瓶颈：如果你要一次性 mint/transfer 海量 NFT，逐个发 `Transfer` 事件会变成 O(n) 的 gas 灾难。（项目方通常如果一次性铸造 10,000 个 NFT。在标准 ERC-721 中，这需要触发 10,000 次 `Transfer` 事件，极其昂贵且易导致区块 Gas 上限溢出。）

ERC-2309 引入了 `ConsecutiveTransfer` 事件：

```
event ConsecutiveTransfer(uint256 indexed fromTokenId, uint256 toTokenId, address indexed fromAddress, address indexed toAddress);
```

该事件不再逐一记录，而是记录“从 ID X 到 ID Y 的所有权发生了转移”。这一改动将日志记录的复杂度从线性 O(N) 降低到了常数 O(1)。然而，值得注意的是，由于这改变了标准的事件签名，许多早期的索引器（Indexer）和交易所（如早期的 OpenSea）对其支持较慢，导致采用 ERC-2309 的项目有时面临“资产未显示”的兼容性挑战。

**ERC-2981:** 在 ERC-2981 之前，版税并非链上标准，而是依赖于各个市场（OpenSea, Rarible）的私有注册表。这意味着在 A 平台设置的版税，在 B 平台交易时无法生效。ERC-2981 通过引入 `royaltyInfo(tokenId, salePrice)` 函数，允许合约告诉市场：“如果这个 Token 卖了 100 ETH，请给地址 X 支付 5 ETH” 。

但他仅是一个**信号标准（Signaling Standard）**，而非强制执行标准。它依赖于市场平台的自愿遵守。当市场为了抢占份额而选择忽略 `royaltyInfo` 时，该标准实际上会失效。尽管如此，作为通用的版税查询接口，ERC-2981 依然是当前绝大多数 NFT 合约的标配 。

**ERC-4494 ：**ERC-20 代币通过 EIP-2612 实现了 `permit` 功能，允许用户通过签名而非发送交易来进行授权，极大地优化了体验。ERC-4494 试图将这一逻辑移植到 ERC-721 上。其技术难点在于 `nonce` 的管理：与 ERC-20 的账户级 nonce 不同，ERC-4494 提议将 nonce 绑定在 `tokenId` 上，以确保 NFT 转手后旧的签名授权失效 。

但是ERC-4494 最终被标记为 **Stagnant（停滞）**。主要原因在于：

1.  **基础设施的替代**：Opensea 推出的 **Seaport** 协议以及 Uniswap 的 **Permit2** 实际上在应用层解决了签名授权的问题，使得底层的代币标准升级变得不再紧迫。
    
2.  **安全性与复杂性**：关于谁有权签署 Permit（仅所有者还是被批准的操作员）的争论增加了标准化的难度。 因此，虽然用户的时间线中包含了 ERC-4494，但需明确它并未像 ERC-721 或 2981 那样成为广泛采纳的行业标准，而是一次未竟的尝试 。
    

2022 年开始，随着**元宇宙概念**的兴起，NFT 不再仅仅是静态图片。市场需要能够“租赁”的 NFT，以及随外部数据（如游戏等级、天气）变化的动态 NFT。NFT 从“所有权”走向“更复杂的权利拆分与索引协作”。

**ERC-4671：**试图建立一种全新的、专门针对不可转移代币（如证书、勋章）的标准。源于v神提出“去中心化社会（DeSoc）”和“灵魂绑定代币（SBT）”的概念。

最终stagnant：没有继承 ERC-721，而是定义了一套全新的接口，完全移除了转账逻辑，并增加了复杂的发行者（Issuer）管理和有效性验证逻辑 。 然而，这种破坏性的创新导致了它的失败。由于不兼容 ERC-721，现有的钱包（MetaMask）和市场无法直接显示这些代币。社区最终意识到，SBT 不需要成为一种新资产类别，而应该只是**一种具有特殊属性的 ERC-721**。因此，ERC-4671 陷入停滞，被更具兼容性的 ERC-5192 取代 。

**ERC-4907：**分离了 NFT 的所有者（Owner）和使用者（User），并引入了自动过期的租赁机制。在 ERC-4907 之前，租赁 NFT 通常需要抵押借贷（存在资金占用风险）或中心化托管。ERC-4907 在合约存储中增加了一个 `UserInfo` 结构体，记录使用者地址和过期时间戳。 `userOf(tokenId)` 函数被修改为：如果 `block.timestamp < expires`，返回使用者地址；否则返回零地址。这种**无需交易即可自动过期**的设计是其最大创新，极大地降低了租赁业务的 Gas 成本。

**ERC-4906：**定义了标准的 `MetadataUpdate` 事件，用于通知第三方平台元数据已更改。OpenSea 等平台为了性能会深度缓存 NFT 的元数据（图片、属性）。当一个“盲盒”NFT 开图，或者一个游戏装备升级时，链上状态虽然变了，但前端显示的依然是旧数据。ERC-4906 标准化了 `MetadataUpdate` 和 `BatchMetadataUpdate` 事件。这相当于给索引器发出的一个“刷新信号（Ping）”，解决了动态 NFT 在展示层的同步难题 。

**ERC-5192：**通过增加“锁定”状态，将 ERC-721 转化为灵魂绑定代币。仅引入了 `locked` 状态和相应的事件。当代币处于锁定状态时，所有转账函数必须 Revert（回滚）。这种设计使得 SBT 可以直接在 OpenSea 上显示（作为不可售卖的 NFT），并被所有支持 ERC-721 的钱包识别。

**ERC-6551 ：**把 NFT 推到更“账户化”的形态：为每个 NFT 绑定一个“token bound account（合约账户）”，使 NFT 能像地址一样持有资产、与应用交互（无需修改原 NFT 合约）。ERC-6551 颠覆了所有权层级。在此之前，NFT 只是账户里的一个数据；在此之后，NFT 本身变成了一个账户（Token Bound Account, TBA）。

-   **技术机制**：通过一个无许可的注册表合约，为每个 NFT 计算出一个确定性的合约地址。这个地址可以接收 ETH、ERC-20 代币，甚至拥有其他 NFT。
    
-   **应用场景**：这使得“NFT 组合包”成为可能（例如：一个 RPG 角色 NFT，其“背包”里装着武器 NFT 和金币 Token）。当转移角色 NFT 时，其绑定的账户及账户内所有资产自动随之转移。
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->




行动与产出

-   完成 MetaMask 钱包创建；在 Sepolia 领取测试币并完成转账验证；
    
-   参与以太坊中文周会；
    
-   参与 co-learning 答疑场；
    

周会部分内容

-   以太坊 Fusaka 升级进展：BPO2 参数调整将 Blob 目标值提升至每区块 14、最大值提升至 21。这类调整本质上是在“数据可用性（DA）供给侧”扩容：提高每区块可承载的 Blob 数量上限与常态目标值，会直接改变 Blob 供需关系与 blob basefee 的形成区间，从而对 L2（rollup）发布数据的边际成本进行再定价。意义主要体现在两点：其一，若供给提升顺利落地，L2 的数据发布成本有望下降，进而改善用户侧交易费与批量结算策略；其二，参数上调会把压力从“价格”转移到“传播与验证路径”，对共识层网络传播、区块构建/验证的峰值负载提出更高要求，因此评估时不能只看均值吞吐，必须同步关注区块传播延迟、重组/错过提议等系统性指标（尤其是尾部表现）。
    
-   ruebit 因旧合约定价错误导致重大损失，并出现 Tornado Cash 洗钱路径；Zcash 因治理与商业化分歧出现团队出走并成立 CashZ。安全侧样本的专业含义在于强调“经济逻辑缺陷（economic bug）”的破坏性不亚于传统的权限/重入漏洞：定价、激励、结算等机制一旦存在可被套利的错误，会在极短时间内被自动化资金放大为系统性损失；而后续通过混币工具隐藏资金流向，意味着事件处置不仅是技术修复，还会延伸到追踪、合规与生态信任修复。治理侧样本则提醒：公链或隐私币项目的长期可持续性不仅取决于密码学与工程实现，更取决于资金安排、决策机制与商业化路径的共识。一旦在核心利益与路线选择上出现结构性分歧，团队分裂、组织重组甚至生态分叉的概率会上升，直接影响路线图兑现能力、开发资源密度与外部合作方的风险评估。
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
