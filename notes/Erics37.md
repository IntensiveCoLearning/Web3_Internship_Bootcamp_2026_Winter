---
timezone: UTC+8
---

# Erics37

**GitHub ID:** Erics37

**Telegram:** 

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-16
<!-- DAILY_CHECKIN_2026-01-16_START -->
# 智能合约是如何工作的

### 1\. 核心定义与账户结构

智能合约本质上是以太坊网络中的一种特殊账户，称为合约账户（Contract Account）。它与我们常用的钱包账户（EOA）有本质区别：

代码控制：合约账户没有私钥，其行为完全由内部的代码逻辑（Code）控制，而EOA由私钥控制。

账户四要素：在以太坊的世界状态中，智能合约账户包含四个核心字段：

1, Nonce：记录该合约创建了多少个其他合约（防止重放）。

2, Balance：账户持有的ETH余额（合约也能像人一样持有资金）。

3, StorageRoot：指向该合约的存储树（Merkle-Patricia Trie）根哈希，这里保存了合约的所有状态变量（如代币余额表、游戏数据等）。

4, CodeHash：合约代码（EVM字节码）的哈希值，标识了该账户的逻辑。

### 2\. 生命周期与工作流程

A. 编写与编译 (Development)

开发者使用高级语言（如 Solidity）编写逻辑，然后通过编译器将其转换为机器能读懂的两种产物：

1.  字节码（Bytecode）：EVM（以太坊虚拟机）真正执行的指令集。
    
2.  ABI（应用二进制接口）：一份JSON格式的“说明书”，告诉前端或其他合约如何与该合约交互（有哪些函数、参数类型等）。
    

B. 部署 (Deployment)

合约是如何上链的？

创建交易：用户发起一笔特殊的交易，目标地址（to）为空，数据字段（data）包含合约的初始化代码。

地址生成：合约地址不是随机的，通常由`创造者地址 + Nonce`计算得出（CREATE），或者通过`创造者地址 + 盐 + 代码哈希`计算（CREATE2），后者可以预测合约地址。

初始化：EVM执行初始化代码（构造函数），设置初始状态，然后将\*\*运行时代码（Runtime Bytecode）\*\*永久存储在链上。

C. 执行机制 (Execution via EVM)

当有人调用合约时，EVM（以太坊虚拟机）作为执行引擎开始工作。这是一个沙盒环境，保证了全网所有节点执行结果的一致性。

逐条执行：EVM将字节码拆解为操作码（OpCode），如`ADD`（加法）、`SSTORE`（写存储），逐条解释执行。

数据存储区：

Stack（栈）：用于临时运算，类似CPU寄存器。

Memory（内存）：临时数据存储，交易结束后丢弃。

Storage（存储）：永久保存合约状态（如`mapping`变量），写入成本极高。

D. 资源限制 (Gas Mechanism)

为了防止死循环或恶意攻击，执行每一步操作都需要消耗Gas（燃料）。

付费原则：发起交易的人必须预付Gas。

耗尽回滚：如果在执行过程中Gas用完（Out of Gas），EVM会立即停止并回滚所有状态修改，但已经消耗的Gas不会退还。

### 3\. 关键特性与限制

被动触发：智能合约不能主动发起交易。它必须由一个外部账户（EOA）发起交易来触发，或者由其他已经被触发的合约进行调用（内部消息调用）。

不可篡改性：合约一旦部署，其代码逻辑默认为不可修改。如果发现Bug，通常无法直接“修补”，只能通过\*\*代理模式（Proxy Pattern）\*\*将请求指向新的逻辑合约来实现“升级”。

公开透明：合约的字节码、状态变量和每一笔交易记录在链上都是公开可见的，任何人都可以进行审计。

### 4\. 总结

智能合约的工作机制可以概括为：“代码即法律，EVM即法庭”。

1.  开发者写好规则（代码）。
    
2.  部署后，代码变成链上的一个账户（有地址、有存储）。
    
3.  用户发交易触发代码。
    
4.  EVM在全网节点上以确定的方式执行代码，修改账户状态（如余额变化）。
    
5.  Gas机制确保系统不会因为恶意代码而停机。
<!-- DAILY_CHECKIN_2026-01-16_END -->

# 2026-01-15
<!-- DAILY_CHECKIN_2026-01-15_START -->

## 1, 链上身份与资产交换

> **核心主题**：ENS、DEX (去中心化交易所)、链上身份

### 1\. 核心概念

-   **链上身份 (Identity)**：在 Web3 中，你的钱包地址就是你的通用账户。不同于 Web2 每个 APP 都要注册账号，Web3 是“一个账户走天下”，你的资产（Inventory）和声誉随地址移动。
    
-   **ENS (Ethereum Name Service)**：将复杂的 `0x...` 地址映射为易读的名称（如 `sanford.eth`），类似于把 IP 地址变成网址。
    
-   **DEX (Uniswap)**：去中心化交易所。不依赖中心化机构（如币安、Coinbase），直接通过智能合约在链上进行代币兑换。
    

### 2\. 实操流程

1.  **创建/管理账户**：在 MetaMask 中创建新账户（Account），体验同一助记词下管理多个地址。
    
2.  **注册 ENS 域名**：
    
    -   访问 ENS 应用，搜索心仪域名。
        
    -   **Commit 机制**：第一笔交易“提交请求”（防抢注），等待约 1 分钟。
        
    -   **Register 机制**：第二笔交易正式注册。
        
    -   **反向解析 (Reverse Record)**：设置将地址指向域名，这样 DApp 就能显示你的名字而不是 `0x...`。
        
3.  **使用 Uniswap 换汇**：
    
    -   连接钱包，体验“身份跟随”（网站自动识别 ENS 域名）。
        
    -   将 ETH 兑换为稳定币（如 DAI）。理解稳定币是为了避险（如避免 ETH 价格波动）。
        
    -   **理解 DEX 原理**：这就像一台自动贩卖机，资金池（Pool）里有 ETH 和 DAI，你放入一种，按比例取出另一种，全程由合约执行。
        
4.  **查看资产大盘 (Zapper)**：
    
    -   访问 Zapper.fi 等资管平台，输入 ENS 域名，查看该地址下所有的 Token、NFT 和 DeFi 仓位。验证“数据公开透明，前端只是展示工具”的特性。
        

* * *

## 2, NFT 原理与元数据

> **核心主题**：ERC-721、IPFS、元数据 (Metadata)

### 1\. 核心概念

-   **同质化 vs 非同质化**：
    
    -   **ERC-20 (同质化)**：像钞票，你的 1 ETH 和我的 1 ETH 没区别，记录的是**余额 (Balance)**。
        
    -   **ERC-721 (非同质化/NFT)**：像艺术品或房产证，每个 Token 都有唯一的 **ID**，记录的是**所有权 (Owner)**。
        
-   **元数据 (Metadata)**：NFT 长什么样（图片、属性）通常不存放在昂贵的区块链上，而是存放其**链接 (URI)**。
    
-   **IPFS**：去中心化存储网络。通过内容哈希寻址（Content Addressing），保证图片一旦上传，只要有人存储，内容就不可被篡改（改了内容，哈希/地址就会变）。
    

### 2\. 实操流程

1.  **购买/铸造 (Mint) NFT**：
    
    -   可以直接通过项目官网 Mint，也可以直接在 Etherscan 上调用合约的 `mint` 函数（展示“绕过前端直接交互”的能力）。
        
2.  **查看元数据 (Token URI)**：
    
    -   在 Etherscan 读取合约，输入 Token ID，获取 `tokenURI`。
        
    -   **关键检查**：查看 URI 是指向中心化服务器（如 `http://api.game.com/...`，有被项目方篡改风险）还是 IPFS（如 `ipfs://...`，相对安全不可篡改）。
        
3.  **全链上 NFT (On-chain NFT)**：
    
    -   演示如 SVG NFT，其图像数据直接由智能合约代码生成（SVG 代码在链上），完全不依赖外部存储，最为持久。
        
4.  **跨平台展示**：
    
    -   在 OpenSea 买的 NFT，去 Rarible 或 Zapper 也能看到。验证 NFT 是存在链上的，不属于任何单一平台。
        

* * *

## 3, 进阶技巧与安全

> **核心主题**：Gas 机制、Nonce（交易序号）、Layer 2、多签钱包

### 1\. 核心概念

-   **Nonce (交易序号)**：防止重放攻击。交易必须按顺序执行（Nonce 1 -> 2 -> 3）。如果 Nonce 2 卡住了，Nonce 3 永远不会被打包。
    
-   **Gas 战争**：出价高者得区块空间。
    
-   **Layer 2 (如 Optimism)**：通过 Rollup 技术实现“主网安全，侧链速度”，Gas 费极低。
    
-   **多签钱包 (Multisig/Gnosis Safe)**：需要 N 个人中的 M 个人签名才能执行交易（如 2/3 签名）。比单一私钥更安全，适合资金管理。
    

### 2\. 实操流程 (故障排除演练)

1.  **模拟“交易卡死”与加速**：
    
    -   故意设置极低的 Gas 费发送交易，导致交易一直 Pending（卡在内存池）。
        
    -   **加速 (Speed Up)**：在钱包点击加速，本质是发出一笔**相同 Nonce 但 Gas 费更高**的交易来覆盖旧交易。
        
2.  **取消交易**：
    
    -   如果不想加速，可以发一笔 **0 ETH 转给自己** 的交易，将 Nonce 设置为与卡住的那笔交易相同，且 Gas 给高，以此“顶掉”原交易。
        
3.  **Layer 2 跨链 (Bridge)**：
    
    -   使用 Bridge 将 ETH 从主网跨到 Optimism。
        
    -   体验 L2 的秒级确认和极低 Gas 费。
        
4.  **多签钱包体验**：
    
    -   创建一个 Gnosis Safe (现为 Safe)，设置 2/3 多签规则。
        
    -   发起转账提案，体验“一人提案，多人签名”的流程。
        
    -   **WalletConnect**：演示如何用多签钱包连接 DApp（如 Uniswap），作为机构/团队身份进行交互。
<!-- DAILY_CHECKIN_2026-01-15_END -->

# 2026-01-14
<!-- DAILY_CHECKIN_2026-01-14_START -->


# Web3 安全与合规

使用费曼笔记结构。

1\. 直觉模型 (Mental Model)

“悬崖边的全透明银行”

请把 Web3 世界想象成一座建立在悬崖边的 全透明银行。

\* 安全（Security）：在这个银行里，没有保安拿着枪巡逻，而是靠 “自动触发的陷阱”（Slashing 罚没机制）来防盗。任何人如果想在大厅里搞破坏（比如双重投票），地板会瞬间裂开，直接没收他的押金。同时，因为金库大门（智能合约）是透明玻璃做的，黑客不需要炸药，只需要拿着放大镜找玻璃上的裂缝（代码漏洞）就能把钱吸走。

\* 合规（Compliance）：以前这家银行只收只有数字代码的“游戏币”，现在它开始接受现实世界的黄金和房产（RWA 现实资产）。为了收这些真金白银，它必须在门口装上 “安检门”（KYC/AML），不再是蒙面人随便进出，而是要穿西装打领带，符合现实世界的法律法规。

2\. 核心逻辑链

逻辑推导：从“代码自治”到“经济博弈”与“现实融合”

\* 因为 区块链（特别是 PoS 以太坊）不再依赖算力挖矿，而是依赖验证者质押资产（Staking）来维护共识，

\* 所以 安全的本质从“比拼硬件成本”变成了“纯粹的经济博弈”：必须设计一套 Slashing（罚没）机制，让作恶的成本（损失 32 ETH 甚至更多）远高于作恶的收益。

\* 导致 系统安全性不再由“好人多”决定，而是由“作恶太贵”决定。同时，随着 DeFi 试图引入国债、股权等 RWA（现实世界资产） 以获取真实收益，导致 纯链上的匿名规则无法满足监管要求，必须引入审计、合规基础设施，形成“合规 DeFi”的新形态（注：此处参考教材关于 RWA 与合规 DeFi 的展望）。

3\. 反常识/盲点

\* 盲点一：开源不等于安全，反而是“公开的靶子”。

初学者常以为“代码开源”意味着大家都在检查，所以很安全。但在 Web3 中，黑客比白帽子更勤奋。智能合约一旦部署就难以修改（Immutability），一个微小的逻辑漏洞（如重入攻击）在传统软件里可能只是个 Bug，在这里就是直接提款机。透明性既是信任的来源，也是攻击者的便利。

\* 盲点二：惩罚（Slashing）不仅是罚款，更是“社死”。

在 PoS 机制下，验证者如果作恶（如双重签名），不仅会损失金钱（ETH 被烧掉），还会被 强制驱逐（Force Exit） 出网络。这不是简单的“交罚单走人”，而是直接被剥夺了参与系统的资格，这种“经济+权限”的双重剥夺是 Web3 安全独有的威慑力。

\* 反常识：合规不是 Web3 的对立面，而是资产增值的“放大器”。

很多人认为 Web3 就是要逃避监管。但教材指出，Web3 的未来潜力在于 RWA（现实资产上链）。只有拥抱监管和合规（如 KYC/AML），机构级的万亿资金（国债、股票市场）才能进入链上。不合规，Web3 永远只是个小的金融游戏；合规，才是从“离岸赌场”变成“全球交易所”的关键。

4\. 我的思考

以前我总觉得 Web3 的安全是靠‘密码学’这种高深的技术来保证的，读完这份教材才发现，真正的防线其实是\*\*‘赤裸裸的人性博弈’\*\*。PoS 的 Slashing 机制简直就是把‘贪婪’变成了护城河——你越想赚钱，就越不敢作恶。而且，我原本以为 Web3 是法外之地，但看到 RWA 和合规 DeFi 的趋势，我意识到 ‘代码即法律’（Code is Law）正在向‘代码适应法律’演变。这不仅没让 Web3 变味，反而让它有了承载真实世界财富的资格。这才是以太坊想做的‘世界计算机’，而不是一个黑客游乐场。”
<!-- DAILY_CHECKIN_2026-01-14_END -->

# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->



# Web3 工作原理与运行机制

Web3 的本质是去中心化的价值互联网。它通过区块链技术，将互联网的控制权从中心化平台（如 Google、Facebook）交还给用户。以下是其具体的工作逻辑与运行流程：

## 一、 Web3 的核心运行机制：从中心化到点对点

传统的 Web2 运行在“客户端-服务器”架构上，而 Web3 运行在由成千上万个节点组成的**点对点（P2P）网络**上 。

**节点发现与连接**：当一个 Web3 节点（如以太坊节点）启动时，它通过 UDP 协议和 Kademlia 算法发现邻居节点，并建立加密的 TCP 连接 。

**“八卦”协议传播（Gossip）**：网络没有中央站，信息（交易、区块、投票）像“传八卦”一样在邻居间随机转发，数秒内即可传遍全球 。

**共识验证**：每个节点都会独立验证收到的信息。只有通过共识机制（如以太坊的 PoS）确认的信息，才会被记录在不可篡改的账本中 。

## 二、 账户体系：私钥即所有权

在 Web3 中，你的身份不是账号密码，而是**外部拥有账户（EOA）**

**私钥控制**：EOA 由私钥直接控制。私钥派生公钥，公钥生成地址（以 `0x` 开头） 。

**数字签名**：任何操作（如转账、调合约）都必须经过私钥签名。网络只认签名，不认人。丢失私钥意味着永久失去对账户资产的控制权 。

**自主权**：用户无需向任何机构申请即可创建账户，且没有任何单一实体能冻结该账户 。

## 三、 智能合约

智能合约是部署在区块链上的代码。它是 Web3 实现自动化、无中介协作的关键 。

**自动执行**：逻辑被写死在合约中（如“如果 A 收到货，则释放资金”）。一旦触发条件满足，代码会自动执行，无需律师或中介

**图灵完备**：以太坊的虚拟机（EVM）是图灵完备的，意味着它可以运行几乎任何逻辑，从而支持了 DeFi（金融）、NFT（资产）、DAO（组织）等复杂应用 。

**透明且不可篡改**：合约一旦部署，其代码和状态对全网公开，且默认不可更改，确保了规则的公平性 。

## 四、 去中心化应用

一个完整的 Web3 应用（dApp）通常由以下两部分组成：

**前端界面**：用户交互的网页或移动端，通常通过 Web3 库（如 ethers.js）连接到节点 。

**后端逻辑**：运行在区块链上的智能合约。

**Gas 机制**：为了防止网络被滥用，用户执行合约操作时必须支付 Gas 费（以 ETH 支付）。这就像是给“世界计算机”运行程序付的小费 。

## 五、 分层运作

为了解决性能瓶颈，Web3 正在向分层架构演进：

**Layer 1（主网）**：负责极致的安全、共识和最终结算，是整个系统的“大法官” 。

**Layer 2（扩展层）**：如 Rollup，在链下批量处理成千上万笔交易，然后将压缩后的数据和证明提交回 Layer 1，从而实现低费率和高速度 。

## 六、 Web3 是如何转动的？

1.  **用户发起**：用户通过钱包签名一笔交易。
    
2.  **网络广播**：交易通过 P2P 网络传播到全球验证者手中。
    
3.  **虚拟机执行**：验证者在 EVM 中运行对应的智能合约代码。
    
4.  **共识达成**：验证者对执行结果达成一致，打包成区块。
    
5.  **状态更新**：全网节点更新状态（如你的余额减少，NFT 归属权变更），交易完成。
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->




## Web3实习计划是？

由 ETHPanda 和 LXDAO 发起的 Web3 冬季实习计划是一项为期 4 周的免费实战课程，旨在通过运营、技术入门及深度技术三大方向的系统学习，帮助新人快速入行并对接实习或全职岗位。活动于 1 月 12 日正式启动，采用严格的“每日打卡”淘汰机制（每周缺勤不得超过 2 次）与积分排位体系，前两周专注技能共学，第三周进行黑客松实战，第四周直接对接就业资源。

## 阅读完《以太坊》第一章以及《以太坊概览》入门导读后，提出了一些问题。

### 1\. 为什么说PoW除了比PoS环保，还能提高协议的安全性和去中心化程度？

能耗降低是最直观最显著的。但是这样的转变有更深层次的逻辑。

首先是提高了攻击成本：在PoS下，攻击者要进入链，首先要抵押ETH代币，然而一旦对链发起攻击，协议则可以通过罚没机制直接销毁攻击者抵押的资产。然而在PoW中，协议无法直接攻击到入侵者，例如无法销毁攻击者的矿机。

第二，PoS摆脱了对电力和硬件的高度依赖，降低了普通用户的参与门槛，有助于提高分布效率，使网络变得扩展且丰富，提高了抗打击能力。

第三，PoS架构分离了执行层和共识层，这意味着即使某个软件版本出现漏洞，也不会导致整个网络瘫痪，提升了系统的鲁棒性。

### 2\. “图灵完备”对以太坊作为“世界计算机”的意义？它与比特币的脚本有何本质区别？

比特币的脚本语言是有意设计为非图灵完备的，不支持循环语句，以确保交易解析的简单和极高安全性。而以太坊的 EVM 是图灵完备的，这意味着只要给定足够的Gas，它能执行任何可计算的协议。因而图灵完备使得以太坊具有极高的延展性。同时，为了防止图灵完备带来的死循环攻击，以太坊引入了 Gas 机制，确保任何程序如果运行时间过长或消耗资源过多，都会因停气而终止。

### 3\. Layer 2（L2）与 Layer 1（L1）的关系是如何演变的？

在早期，L1 尝试承担所有工作。

现在的路线图中，L1 演变为结算层和数据可用性层，负责极致的安全和终局性；L2 演变为执行层，在链下处理成千上万条交易，然后将压缩后的结果和证明传回 L1。

Rollup通过将计算移至链下，仅将交易数据存储在 L1，既继承了以太坊的安全性，又极大提升了 TPS。通过引入 Blob 空间，L1 为 L2 开辟了专门的数据通道，标志着以太坊正式转型为支撑 L2 生态扩展的基础底座，而非直接与用户交互的零售接口。
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
