---
timezone: UTC+8
---

# Wwangjinghan

**GitHub ID:** Wwangjinghan

**Telegram:** 

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-23
<!-- DAILY_CHECKIN_2026-01-23_START -->
## **zk-SNARK 系统的一般工作流程**

虽然不同库的实现细节不同，但大多数 zk-SNARK 都可以抽象为以下几个步骤：

### **4.1 编写约束系统 / 电路**

首先，需要把我们想要证明的逻辑，转换成一种适合电路计算的形式，比如：

-   R1CS（Rank-1 Constraint System）约束；
    
-   或者算术电路（Arithmetic Circuit）形式。
    

在 ZKVote 场景中，我们想证明的逻辑包括（简化版）：

1.  证明者确实是选民集合中的一员；
    
2.  这次投票的选项属于允许的取值集合；
    
3.  为当前投票生成的 nullifier（防重复投票标识）是由身份秘密和投票 ID 计算出来的。
    

这些条件都会被转化为一系列约束，构成一个「需要被证明的程序」。

### **4.2 Setup：生成证明密钥和验证密钥**

在 zk-SNARK 中，通常需要先执行一次 **Setup**：

-   输入：约束系统 / 电路描述；
    
-   输出：
    
    -   **Proving Key（PK）**：用于之后生成证明；
        
    -   **Verification Key（VK）**：用于之后验证证明。
        

在很多实现中，这一步需要一个可信设置（Trusted Setup）阶段，由一组参与者共同执行，多余的秘密参数需要在仪式结束后安全销毁，以避免被滥用。

在本教程的上下文里，我们假设：

-   Setup 已经通过安全的方式离线完成；
    
-   合约中已经内置或存储了对应的 `Verification Key`。
    

### **4.3 证明者本地生成证明**

当你准备进行一次 ZK 投票时，浏览器会在本地执行以下操作：

1.  从你的输入中收集**公开输入（public inputs）**：
    
    -   如投票所属的 `electionId`；
        
    -   当前选民集合的 Merkle 根 `root` 等。
        
2.  从本地或钱包中收集**私有输入（witness）**：
    
    -   你的身份秘密 `identitySecret`；
        
    -   对应的 Merkle 路径；
        
    -   你选择的投票选项 `vote`。
        
3.  调用 zk 证明库，使用 `Proving Key` 计算出一份证明 `proof`。
    

生成出的证明通常是一个非常短的结构化二进制数据，可以被序列化为 JSON 再发送给智能合约。

### **4.4 智能合约端验证证明**

前端会构造一笔交易，调用投票合约的类似函数：

```
function vote(
    Proof proof,
    PublicInputs publicInputs
) external {
    // 1. 调用 Verifier 验证 proof
    // 2. 检查 nullifier 是否已被使用
    // 3. 更新计票结果
}

```

合约内部会执行以下步骤：

1.  调用内置的 Verifier 合约（或预编译）验证 `proof` 与 `publicInputs` 是否匹配且合法；
    
2.  检查 `nullifier` 是否已经被使用（防止一人多投）；
    
3.  如果验证通过且 `nullifier` 未使用：
    
    -   记录该 `nullifier`；
        
    -   更新投票结果（计票）。
        

所有这些操作都会生成交易记录，保留在链上，任何人都能复查。
<!-- DAILY_CHECKIN_2026-01-23_END -->

# 2026-01-22
<!-- DAILY_CHECKIN_2026-01-22_START -->

Gas 优化

一、 存储 (Storage) 是金钱

原则：storage 的操作（SLOAD/SSTORE）比 memory 贵 100 倍以上。

减少写操作：不要在循环里更新状态变量。先用局部变量计算，最后一次性更新。

变量包装 (Variable Packing)：在 struct 或全局变量中，将小尺寸类型（如 uint128, uint8）放在一起。Solidity 会尝试将它们压缩进同一个 32 字节的存储槽（Slot）中。

二、 循环与数组

缓存长度：在 for 循环中，i < arr.length 每次都会读取长度。先定义 uint256 len = arr.length 再循环更省钱。

Calldata vs Memory：如果函数参数是只读的，使用 calldata 而不是 memory。calldata 不会拷贝数据，Gas 消耗更低。

Unchecked 自增：Solidity 0.8 之后自带溢出检查。对于循环变量 i++，我们知道它不会溢出，使用 unchecked { i++; } 可以节省大约 30-40 Gas。

三、 数据类型选择

首选 uint256：除了在 struct 中为了变量包装，其他地方尽量使用 uint256。因为 EVM 每次处理 32 字节，处理 uint8 时需要额外的指令来掩码（mask）数据，反而更贵。

常量 (Constant/Immutable)：永远不会改变的变量一定要加 constant 或 immutable。它们直接编译进字节码，不占用存储 Slot。

四、 报错信息处理

Require 字符串：require(condition, "Error Message") 中的字符串越长越费钱。尽量控制在 32 字节以内，或者使用 Solidity 0.8.4+ 的 Custom Error（自定义错误），后者能大幅降低失败交易的 Gas。
<!-- DAILY_CHECKIN_2026-01-22_END -->

# 2026-01-21
<!-- DAILY_CHECKIN_2026-01-21_START -->


零知识证明是一种交互或非交互协议，使证明者在不泄露任何除“命题为真”之外信息的情况下，说服验证者。

三大性质：

-   完备性（Completeness）：若命题为真，诚实证明者可使验证者接受。
    
-   可靠性 / 健壮性（Soundness）：若命题为假，作弊证明者几乎不可能使验证者接受。
    
-   零知识性（Zero-Knowledge）：验证者无法获得额外信息。
    

形式化表达： 存在模拟器 S，使得真实交互与模拟输出在计算上不可区分。
<!-- DAILY_CHECKIN_2026-01-21_END -->

# 2026-01-20
<!-- DAILY_CHECKIN_2026-01-20_START -->



**代币化（Tokenization）就像是给任何物品配上一张可以放在钱包里的数字护照**。它能证明所有权，让你一键转让，还能让应用程序自动识别。

现实世界资产（RWA）

例如股票、债券、黄金和房地产。如果这些资产被代币化，代币就相当于一种**数字权益证明**或登记凭证。为了使其具有现实世界的效力，必须有发行方、托管方或法律框架将**链上转账**与**链下权利**关联起来；如果没有这种“桥梁”，该代币就只是一个收藏品，而非合法的资产转移。
<!-- DAILY_CHECKIN_2026-01-20_END -->

# 2026-01-18
<!-- DAILY_CHECKIN_2026-01-18_START -->




AI智能体结构：

大脑 LLM-推理与规划

记忆 向量数据库 （RAG流程：数据抓取-上下文存储）

工具 API接口连接外部世界

基础设施缺口：身份欺诈，不可审计，影子AI

机器经济需要新货币 机器对机器M2M微支付，按API调用，推理付费

ERC-8004智能体的链上护照

1.身份注册表 提供唯一，可转移的链上ID

2.声誉系统 记录不可篡改的反馈评分，仅付费客户可评价

3.验证机制：TEE可信执行环境或zkML证明

SpoonOS：web3 AI时代的操作系统

应用：DeFi交易智能体 数据市场代理 自主服务代理
<!-- DAILY_CHECKIN_2026-01-18_END -->

# 2026-01-16
<!-- DAILY_CHECKIN_2026-01-16_START -->





web3与AI

·为什么结合AI？

1.  Web3 系统复杂度高
    
    1.  智能合约
        
    2.  区块链协议
        
    3.  DeFi、NFT、DAO 逻辑  
        人工分析成本高，AI 适合做自动化分析与辅助决策。
        
2.  AI 与去中心化天然互补
    
    -   AI 需要数据、算力、激励机制
        
    -   Web3 提供去中心化数据、算力市场、Token 激励
        
3.  行业趋势
    
    1.  AI + Web3 是真实存在的投资和创业方向
        
    2.  不是概念叠加，而是工程层面的融合
        

. Web3 能给 AI 什么

-   去中心化数据来源
    
-   数据确权
    
-   算力市场
    
-   激励机制
    

AI能给web3带来什么

-   智能合约自动分析
    
-   安全漏洞检测
    
-   链上行为分析
    
-   DAO 决策辅助
    
-   DeFi 风险评估
<!-- DAILY_CHECKIN_2026-01-16_END -->

# 2026-01-15
<!-- DAILY_CHECKIN_2026-01-15_START -->






第二章 网络的结构与节点类型

·核心客户端：执行客户端 共识客户端+参与出块、转质押收益的验证者客户端

A.执行客户端：主要负责链上的“业务逻辑和状态”：

• 监听网络上广播来的交易与区块

• 在 EVM（以太坊虚拟机）  中执行交易和智能合约

• 维护当前链的状态数据库（账户余额、合约存储等）

• 提供 JSON-RPC  接口（eth\_\*），给 dApp /  钱包 /  脚本调用

• 通过自己的 P2P  网络转发交易和区块头 /  区块体

B.共识客户端，主要负责权益证明 PoS  共识：

• 维护信标链（Beacon Chain）视图和 fork choice  规则（LMD-GHOST  等）

• 在每个 slot  里选择谁来提议区块，并对区块进行投票（attestation）

• 跟踪验证者集合、质押余额、惩罚（slashing）等共识状态

• 把来自执行客户端的结果当作“材料”，决定哪一个区块被接受到链上类比延续刚才的法院场景：

C. 验证者客户端：负责：

·管理你的验证者密钥

·在轮到你时提议新区块

·在每个 slot  为看到的区块做 attestation（投票）

• 从实现角度看，很多共识客户端本身就自带 validator 子进程，也有项目把它拆成单独进程。

·Engine API
<!-- DAILY_CHECKIN_2026-01-15_END -->

# 2026-01-14
<!-- DAILY_CHECKIN_2026-01-14_START -->







ETH的定义与系统智能

·gas费的支付

PoS时代主要流向：base fee：由协议自动计算，随网络拥堵程度上下浮动；这部

分 被直接销毁（burn），不进入任何人的口袋；+priority fee：由用户设置，作为“加急费”支付给出块验证者，用来激励他们优先打包你的交易。

EIP-1559之前:gas fee=gas used X gas price

EIP-1559之后:gas fee=(base fee +priority fee) X gas used

·gas费受影响因素：

1\. 网络拥堵时（牛市，DeFi高峰等），争夺区块空间，费用较高

2\. 全球用户活跃时间差（以美东为主要区域）

3\. 交互复杂程度

·PoS下ETH在共识层扮演的角色

1\. 质押资产：用户持有的ETH可以质押在网络中，验证者进行：存储数据、验证交易、提议新区块和对其投票

2\. 获得奖励

共识层奖励：参与出块与投票行为

执行层奖励：来自用户支付的 优先费（tip）和可能存在的 MEV（最大可提取价值），

由打包区块的验证者获得

3\. 提供经济安全的保证金

·ETH 价值载体
<!-- DAILY_CHECKIN_2026-01-14_END -->

# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->








以太坊

·提出：vitalik buterin2013，2015上线主网，早期将网络开发划分为四个阶段：边境（Frontier，

也有“前锋”的意思）、家园（Homestead）、都会（Metropolis）和宁静（Serenity）。宁静2022合并与信标链，实现了PoW->PoS权益证明

·定位：去中心化、开源且具备智能合约功能的公共区块链平台。核心组件是以太坊虚拟机EVM(可以执行智能合约）

·以太坊还允许用户创建和交换不可替代代币，这些代币通常遵循 ERC-721  或 ERC-1155  等标准。

·特点

1\. 智能合约 2.dAPP:不依赖于单一服务器可以一直运行3.代币：可替代/不可替代 4.PoW工作量（解决数学难题，硬件与电力成本）PoS权益证明（节点质押一定数量的ETH成为验证者，质押越多表现越稳定，被其他验证者投票认可；恶意行为触发削减质押资产）

·proto-danksharding:引入blob-carrying transactions,为rollup提供临时的数据空间，blob数据在共识层保存一段时间后丢弃，减轻了L1的储存压力。每个区块配备一些blob

·分片与danksharding:像一种“数据分片（data-sharding）”，核心是引入更多 blob 数据空间，加上数据可用性采样（DAS），让节点只需要随机抽样检查一小部分数据，就能对整个大数据块“有把握”。 

·叔块uncle block（转为PoS后已被停用）：PoW时期同时挖出两个有效区块，主链选择其一剩下为叔块，叔块给予部分奖励
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->









一、合规性与法律风险

1）中国监管环境

 自 2017 年起，中国禁止 ICO、禁止交易所撮合服务、明确虚拟币非法偿性。

Web3 技术本身允许，但涉及融资、代币交易、矿池等金融属性活动时，会受到严格监管。

2）主要法律风险

代币发行与交易风险

ICO/IEO/IDO 类似募资活动均被禁止，即便代币被叫做“积分”“凭证”“治理 Token”，只要有融资属性可能违法。

技术参与者不能以“写代码”为由免责。

赌博、传销、洗钱风险

链游充值抽奖提现结构易被认定为赌博。

多层级返佣结构可能触犯传销罪。

虚拟币场外交易可能被认定为洗钱或非法外汇经营。

民商事争议风险

虚拟币买卖合同在中国法院往往不受支持。

委托投资若范围不明确可能产生赔偿/经营资格争议。

3）全球监管趋势

欧盟 MiCA：全面加密资产监管框架；美国 SEC/CFTC 等：强化证券/期货监管；香港 VASP 牌照与稳定币监管；FATF 旅行规则 强调 KYC/AML。

  二、网络安全基础与攻击类型

1）钓鱼攻击

伪造官网/邮件/社交账号诱导泄露密钥或助记词。

骗人安装恶意软件或连接钱包签名即盗币。

2）恶意软件 & 木马

伪装成面试软件或工具安装后窃取数据。

剪贴板劫持自动替换钱包地址。

恶意插件/后门扩展获取敏感权限。

3）社交工程

冒充 HR/导师/学长骗取信任进行转账或信息泄露操作。

4）供应链攻击

插件/依赖库被植入后门，影响大量用户。

5）剪贴板劫持 & 扫描木马

监听剪贴板或输入框实时替换地址，导致资产转错并不可追回。

6）传统账号安全风险

弱密码、复用密码、邮箱/SIM 被劫持、未启用双因素。

三、防护清单

1）面试与实习相关

只用 官方会议软件，拒绝安装未知软件。

核实官方域名/邮箱/联系人，多渠道确认。

2）空投/福利/奖学金

不在可疑页面连接钱包或签名。

真实福利不会要求输入助记词或私钥。

主钱包用冷存储，仅测试用钱包谨慎操作。

3）社交与群聊安全

不信任群内链接、管理员或奇怪身份私聊的信息。

对陌生人发来的链接开展二次验证。

4）软件/插件安装规范

只从官网或官方应用商店下载软件。

安装前查 SHA256、数字签名与官方资源比对。

 制插件数量，仅用可信插件。

5）账号密码安全

启用 2FA（优先使用谷歌验证/硬件密钥）。

使用密码管理器，每平台独立密码。

6）钱包与转账安全原则

转账前核对地址前后几位。

私钥/助记词 只离线保存，绝不上传或分享。

定期检查授权并撤销不必要的权限（如使用 [Revoke.cash](http://Revoke.cash)）。
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
