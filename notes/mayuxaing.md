---
timezone: UTC+8
---

# mayuxiang

**GitHub ID:** mayuxaing

**Telegram:** @Ma_0xFly

## Self-introduction

Web3 实习计划 2025 冬季实习生

## Notes

<!-- Content_START -->
# 2026-01-13
<!-- DAILY_CHECKIN_2026-01-13_START -->
视频1是 Austin Griffith **“Web2 to Web3” 四周特训营**的开篇介绍，核心要点：这是从传统开发转向 Solidity 开发的路线图，强调动手实践（Shipping），并将“安全审计”定义为技术进阶的终极目标。

\### 扩展层（Layer2）

**为什么需要 Layer2**

1\. **以太坊 L1 吞吐量极低（~15 TPS）**

所有节点必须重复执行所有交易，无法提升执行能力。

2\. **Gas 昂贵、链易拥堵**

大量应用（DeFi、NFT、游戏）无法在 L1 承担高成本。

Layer2 是构建在以太坊 L1 之上的\*\*扩展执行环境\*\*，目标是：

1\. **提高吞吐量（TPS）**

2\. **降低交易成本（Gas）**

3\. **保持以太坊主链安全性（最终性与数据可用性）**

核心思想：

\`\`\`plain

执行在 Layer2，安全在 Layer1。

\`\`\`

L2 将大量计算从 L1 挪到链外，但最终结果仍必须通过 L1 验证或结算。

\#### 两大主流路线

\##### Optimistic Rollup（以“欺诈证明”生效）

**代表：**Optimism、Arbitrum

**执行流程：**

1\. L2 执行所有交易（EVM 等价）

2\. 将交易数据或状态根批量上报至 L1

3\. 假设（optimistic）结果是正确的

4\. 有“挑战窗口”（如 7 天）

5\. 若有人质疑 → 执行 fraud proof，即验证器在 L1 上重放某段执行来检查是否造假

**特点：**

| 指标 | 特性 |

| --- | --- |

| 安全性 | 基于争议解决机制 + 挑战者经济激励 |

| 延迟 | 有挑战窗口（通常几天） |

| 兼容性 | 原生 EVM（Arbitrum Stylus 扩展 WebAssembly） |

| 成本 | 较低 |

\##### 3.2 ZK Rollup（以“有效性证明”生效）

**代表：**zkSync、StarkNet、Scroll、Polygon zkEVM

**核心思路：L1 只需要一次“Verify(proof)”即可确认状态合法。**

\+ L2 执行交易

\+ 构造零知识证明（ZKP）

\+ L1 仅需验证证明（快速、成本低）而无需重放执行

**特点：**

| 指标 | 特性 |

| --- | --- |

| 安全性 | 密码学强保证，无需挑战窗口 |

| 延迟 | 无需等待，可快速 finality |

| 计算成本 | 生成证明耗时高（链下重计算） |

| 兼容性 | zkEVM 系列努力做到与 EVM 字节码等价 |

**ZK 的显著优势：**

\+ 抗攻击性强：结果“数学上正确”，攻击者无法注入错误状态

\+ 低延迟转账和提现

\### 应用层

核心作用：基于以太坊底层技术开发的各类实际应用，是 “世界计算机” 的 “软件应用程序”，直接面向用户提供服务

常见应用类型：

去中心化金融（DeFi）：如借贷平台（Aave）、去中心化交易所（Uniswap）

非同质化代币（NFT）：如数字艺术品交易（OpenSea）、NFT 游戏

去中心化应用（DApp）：如社交应用、供应链溯源应用等

核心特点：依托底层四层结构的安全性与去中心化特性，无需依赖中心化机构即可运行，用户对自身数据与资产拥有更高控制权

\## DApp

\### 1. 核心定义：什么是 dApp？

\> **dApp = 链上智能合约（后端） + 链下用户界面（前端）**

它不像传统 App 那样把后端代码跑在阿里云或 AWS 的中心化服务器上，而是把核心逻辑（资金处理、业务规则）部署在\*\*以太坊区块链\*\*上。

• dApp 的后端代码 （智能合约）运行在以太坊主网或其 Rollup （二层网 络）之上的 EVM 中，由全网节点共同执行和记录；

• dApp 的前端可以用任意 Web / App 技术编写，既可以放在传统服务器 上，也可以托管在 IPFS、Arweave 等去中心化存储上。

\### 2. 架构对比：Web2 vs Web3

\- **传统 App (Web2)**：

\- **后端**：中心化服务器（可随时关机、随时由管理员修改数据）。

\- **信任模型**：信任“公司”不作恶。

\- **dApp (Web3)**：

\- **后端**：智能合约（运行在去中心化的 EVM 节点网络中）。

\- **数据**：存储在公开透明的区块链上。

\- **信任模型**：信任“代码”和“共识规则”（Code is Law）。

\### 3. dApp 的关键特性（双刃剑）

\- **零停机时间 (Zero Downtime)**：没有“总机房”，只要以太坊网络还在，后端就永远在线。

\- **抗审查 (Censorship Resistance)**：没有单一机构能按下“删除键”或阻止特定用户交互。

\- **代码不可篡改 (Immutability)**：这是最大的特性，也是最大的挑战。合约一旦部署，逻辑通常就无法直接修改（除非预留了代理升级模式）。
<!-- DAILY_CHECKIN_2026-01-13_END -->

# 2026-01-12
<!-- DAILY_CHECKIN_2026-01-12_START -->

\# 以太坊（世界计算机）

以太坊被称为 “世界计算机”，核心是它突破了比特币仅能处理简单价值转移的局限，靠去中心化架构、图灵完备的智能合约等技术，构建了一个全球可访问、能承载复杂计算与多样化应用的分布式计算平台。下面以计算机五层结构拆解分析

\## 五层结构

\### 硬件层

核心作用：为整个以太坊网络提供物理硬件支持，是 “世界计算机” 的 “硬件主机”

组成部分：全球范围内参与以太坊网络的节点设备，包括个人电脑、服务器、专业矿机（合并后以验证节点设备为主）等

关键特点：去中心化分布，无单一控制中心，节点越多，网络安全性、稳定性越强，确保 “世界计算机” 持续运行不宕机

\### 内核层（操作系统层）

核心作用： 在这些不可信硬件上，实现“一个统一的状态机 + 资源调度”

核心功能：pos权益证明机制，gas机制

1\. 把所有节点连成一个 P2P 网络（网络子系统）

2\. 在节点之间达成“\*\*谁的区块算数\*\*”的共识（共识子系统）

3\. 控制“\*\*谁先来打包交易谁来验证交易、每个区块能装多少东西\*\*”（调度/调度器）

4\. 控制“\*\*每个操作要花多少资源 / 钱\*\*”（资源管理：Gas & Fee Market）

5\. 把“执行层（EVM）”的状态转移结果纳入全局（状态机转移接口）

\#### pos权益证明机制

当前共识机制：权益证明（PoS），取代原有的工作量证明（PoW）

原理：节点通过质押一定数量的 ETH 成为验证者，按规则打包交易、生成区块，合规则验证者获得奖励，违规者将被惩罚（扣除质押的 ETH）

优势：降低能源消耗，提升网络效率，同时通过 “质押成本” 保障节点诚实性

\#### gas

1\. **资源计量与成本化**

所有 EVM 操作（opcode）都有固定 gas 消耗，gas 用于精确计量“计算量 + 存储 + 带宽”。

通过让执行成本显式化，确保链上资源稀缺可定价。

2\. **防止 DoS 与无限计算**

交易必须预付 gas，执行过程中 gas 用尽会被中止。

这使得任何无限循环、恶意大计算、垃圾交易都无法无成本消耗网络资源。

3\. **交易排序与拥堵调节（Fee Market）**

Gas price/priority fee 作为经济信号，在拥堵情况下让用户竞争区块空间。

节点根据费用从高到低选择交易，实现市场化调度。

总结：

**Gas = 区块链的资源管理系统，负责计量成本、防 DoS、调节交易优先级，是以太坊作为“世界计算机”能稳定运行的关键内核机制。**

\### 处理层（以太坊虚拟机EVM，全球同步的软件CPU）

EVM 是以太坊上的 **虚拟 CPU + 沙箱执行环境**，专门用来运行智能合约。它执行 bytecode，确保所有节点执行结果一致（确定性）。

\#### EVM 的执行模型（Execution Model）

EVM 执行一笔交易主要包含以下步骤：

1\. 加载交易

交易包含 to、value、data，用作智能合约调用的入口。

2\. 初始化执行上下文

包含：

\+ 程序计数器 PC

\+ 栈（stack）

\+ 内存（memory）

\+ 存储（storage）

\+ gas（燃料配额）

3\. 逐条执行 opcode

EVM 执行汇编级操作，包括算术、控制流、调用、存储、日志等。

4\. gas 用尽则 revert

执行中 gas 不够，会回滚所有状态修改，但已消耗的 gas 不退还。

\---

\#### EVM 的内存结构（Stack/Memory/Storage）

栈（Stack）

\+ LIFO 栈

\+ 最大深度 1024

\+ 所有 opcode 参数都来自栈顶

内存（Memory）

\+ 执行期间的临时数据区

\+ 线性扩展，执行结束即清空

存储（Storage）

\+ 合约的持久化状态

\+ 写入非常贵（类似写磁盘）

\---

\#### 合约间调用（CALL / DELEGATECALL）

CALL

\+ 新建一个独立的执行上下文

\+ 自己用自己的 storage

\+ 能转 ETH

DELEGATECALL

\+ 使用 **被调用合约的代码**

\+ 使用 **调用者的 storage（非常危险）**

\+ 是代理合约与许多漏洞的源头

（类比：把别人的函数在你的进程里执行，并用你的全局变量）

\---

\#### Solidity → EVM 的编译流程

1\. Solidity 源码

2\. 编译为 Yul（中间 IR）

3\. 编译为 EVM bytecode

4\. 部署到链上

5\. 由 EVM 逐条执行指令

（类比：C → LLVM IR → 汇编 → 机器码 → CPU）

\---

\#### EVM 的局限性

\+ 是纯栈机（无寄存器）

\+ 无浮点数

\+ 内存只增大不缩小

\+ CALL 返回值要手动检查

\+ DELEGATECALL 容易被利用

\+ 无线程和并发
<!-- DAILY_CHECKIN_2026-01-12_END -->
<!-- Content_END -->
